;
(self.AMP=self.AMP||[]).push({m:1,v:"2205120110001",n:"amp-font",ev:"0.1",l:!0,f:function(t,i){(()=>{var{hasOwnProperty:i,toString:n}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var s=self.__AMP_LOG;function o(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function e(t,i,n,s,o,e,r,h,l,a,u){return t}function r(t,i){e(function(t,i){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!n||!n.ctor)}(t,i));const n=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return n.obj||(e(n.ctor),e(n.context),n.obj=new n.ctor(n.context),e(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}var h,l=t=>r(t,"timer"),a=["Webkit","webkit","Moz","moz","ms","O","o"];function u(t,i,n,s,o){const e=function(t,i,n){if(i.startsWith("--"))return i;h||(h=Object.create(null));let s=h[i];if(!s||n){if(s=i,void 0===t[i]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),o=function(t,i){for(let n=0;n<a.length;n++){const s=a[n]+i;if(void 0!==t[s])return s}return""}(t,n);void 0!==t[o]&&(s=o)}n||(h[i]=s)}return s}(t.style,i,o);if(!e)return;const r=s?n+s:n;t.style.setProperty(function(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return a.some((t=>i.startsWith(t+"-")))?`-${i}`:i}(e),r)}function f(t,i){for(const n in i)u(t,n,i[n])}var c=["sans-serif","serif"],d=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.dT="",this._T="",this.mT="",this.AT="",this.PT=null}buildCallback(){var t,i;this.dT=(t=this.element.getAttribute("font-family"),"The font-family attribute is required for <amp-font> %s",i=this.element,(s.user||(s.user=o()),void s.user.win?s.userForEmbed||(s.userForEmbed=o()):s.user).assert(t,"The font-family attribute is required for <amp-font> %s",i,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this._T=this.element.getAttribute("font-weight")||"400",this.mT=this.element.getAttribute("font-style")||"normal",this.AT=this.element.getAttribute("font-variant")||"normal",this.PT=new class{constructor(t){this.Ni=t,this.Zh=t.win.document,this.hf=null,this.vT=null,this.pT=!1,this.ET=!1}load(t,i){return this.vT=t,l(this.Ni.win).timeoutPromise(i,this.wT()).then((()=>{this.pT=!0,this.MT()}),(t=>{throw this.ET=!0,this.MT(),t}))}wT(){return new Promise(((t,i)=>{const n=this.vT.fontStyle+" "+this.vT.variant+" "+this.vT.weight+" "+this.vT.size+" '"+this.vT.family+"'";this.TT()?this.Zh.fonts.check(n)?t():this.Zh.fonts.load(n).then((()=>this.Zh.fonts.load(n))).then((()=>{this.Zh.fonts.check(n)?t():i(new Error("Font could not be loaded, probably due to incorrect @font-face."))})).catch(i):this.bT().then(t,i)}))}TT(){return"fonts"in this.Zh}bT(){return new Promise(((t,i)=>{const n=(e=this.Ni.win,r((h=e).__AMP_TOP||(h.__AMP_TOP=h),"vsync")),s=this.gT(),o=n.createTask({measure:()=>{this.pT?t():this.ET?i(new Error("Font loading timed out.")):s.some((t=>t.compare()))?t():o()}});var e,h;o()}))}gT(){const t=this.hf=this.Zh.createElement("div");f(t,{fontSize:"40px",fontVariant:this.vT.variant,fontWeight:this.vT.weight,fontStyle:this.vT.fontStyle,left:"-999px",lineHeight:"normal",margin:0,padding:0,position:"absolute",top:"-999px",visibility:"hidden"});const i=c.map((i=>new class{constructor(t,i,n){const s=t.ownerDocument,o=`${i},${n}`;this.yT=this.IT(s,n),this.VT=this.IT(s,o),t.appendChild(this.yT),t.appendChild(this.VT)}IT(t,i){const n=t.createElement("div");return n.textContent="MAxmTYklsjo190QW",f(n,{float:"left",fontFamily:i,margin:0,padding:0,whiteSpace:"nowrap"}),n}compare(){const t=Math.abs(this.yT.offsetWidth-this.VT.offsetWidth)>2,i=Math.abs(this.yT.offsetHeight-this.VT.offsetHeight)>2;return t||i}}(t,this.vT.family,i)));return this.Ni.getBody().appendChild(t),i}MT(){var t,i;this.hf&&(null===(i=(t=this.hf).parentElement)||void 0===i||i.removeChild(t)),this.hf=null}}(this.getAmpDoc()),this.RT()}RT(){const t={fontStyle:this.mT,variant:this.AT,weight:this._T,size:"medium",family:this.dT};this.PT.load(t,this.FT()).then((()=>{this.ST()})).catch((t=>{this.xT()}))}ST(){const t=this.element.getAttribute("on-load-add-class"),i=this.element.getAttribute("on-load-remove-class");this.LT(t,i)}xT(){const t=this.element.getAttribute("on-error-add-class"),i=this.element.getAttribute("on-error-remove-class");this.LT(t,i)}LT(t,i){const n=this.getAmpDoc(),s=n.getRootNode().documentElement||n.getBody();t&&s.classList.add(t),i&&s.classList.remove(i),this.MT()}MT(){this.PT=null}FT(){let t=parseInt(this.element.getAttribute("timeout"),10);var i;return t="number"!=typeof(i=t)||!isFinite(i)||t<0?3e3:t,t=Math.max(t-l(this.win).timeSinceStart(),100),t}};t.registerElement("amp-font",d)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-font-0.1.mjs.map