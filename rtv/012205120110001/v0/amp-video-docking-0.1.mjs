;
(self.AMP=self.AMP||[]).push({m:1,v:"2205120110001",n:"amp-video-docking",ev:"0.1",l:!0,f:function(t,i){(()=>{function i(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function o(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.push.apply(o,e)}return o}var e,s,n,{isArray:r}=Array,{hasOwnProperty:h,toString:a}=Object.prototype;function d(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function l(t,i,o,e,s,n,r,h,a,d,l){return t}function c(t,i){t.classList.add("i-amphtml-fill-content"),i&&t.classList.add("i-amphtml-replaced-content")}function u(t,i,o,e){return{left:t,top:i,width:o,height:e,bottom:i+e,right:t+o,x:t,y:i}}function m(t){const i=t.ownerDocument||t;return s&&s.ownerDocument===i||(s=i.createElement("div")),p}function p(t){return function(t,i){l(1===i.length),t.innerHTML=i[0];const o=t.firstElementChild;return l(o),l(!o.nextElementSibling),t.removeChild(o),o}(s,t)}function v(t){const i=t.querySelectorAll("[ref]"),o=d();for(let t=0;t<i.length;t++){const e=i[t],s=e.getAttribute("ref");l(s),e.removeAttribute("ref"),l(void 0===o[s]),o[s]=e}return o}function g(t){const i=Object.getOwnPropertyDescriptor(t,"message");if(null!=i&&i.writable)return t;const{message:o,stack:e}=t,s=new Error(o);for(const i in t)s[i]=t[i];return s.stack=e,s}function _(t){let i=null,o="";for(const t of arguments)t instanceof Error&&!i?i=g(t):(o&&(o+=" "),o+=t);return i?o&&(i.message=o+": "+i.message):i=new Error(o),i}function f(t){const i=_.apply(null,arguments);return i.expected=!0,i}function k(t,...i){var o,e,s;o=f.apply(null,i),null===(e=(s=self).__AMP_REPORT_ERROR)||void 0===e||e.call(s,o)}var A=["Webkit","webkit","Moz","moz","ms","O","o"];function P(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return A.some((t=>i.startsWith(t+"-")))?`-${i}`:i}function b(t,i,o){if(i.startsWith("--"))return i;n||(n=d());let e=n[i];if(!e||o){if(e=i,void 0===t[i]){const o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),s=function(t,i){for(let o=0;o<A.length;o++){const e=A[o]+i;if(void 0!==t[e])return e}return""}(t,o);void 0!==t[s]&&(e=s)}o||(n[i]=e)}return e}function M(t,i){const{style:o}=t;for(const t in i)o.setProperty(P(b(o,t)),String(i[t]),"important")}function w(t,i,o,e,s){const n=b(t.style,i,s);if(!n)return;const r=e?o+e:o;t.style.setProperty(P(n),r)}function V(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function x(t){return`${t}px`}function T(t,i){return"number"==typeof t?i(t):t}function E(t,i){return null==i?`translate(${T(t,x)})`:`translate(${T(t,x)}, ${T(i,x)})`}function R(t,i){for(let o=0;o<i.length;o++)w(t,i[o],null)}function I(t){return t.querySelector("video, iframe")}function y(t){let i=!1,o=null,e=t;return(...t)=>(i||(o=e.apply(self,t),i=!0,e=null),o)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function H(t){return z.user||(z.user=O()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(z.user.win,t)?z.userForEmbed||(z.userForEmbed=O()):z.user}function O(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function B(t,i,o,e,s,n,r,h,a,d,l){return t}function D(t,i,o,e,s,n,r,h,a,d,l){return H().assert(t,i,o,e,s,n,r,h,a,d,l)}function j(t,i){return C(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function S(t,i){return C(L($(t)),i)}function $(t){return t.nodeType?(o=t,i=(o.ownerDocument||o).defaultView,j(i,"ampdoc")).getAmpDoc(t):t;var i,o}function L(t){const i=$(t);return i.isSingleDoc()?i.win:i}function C(t,i){B(N(t,i));const o=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return o.obj||(B(o.ctor),B(o.context),o.obj=new o.ctor(o.context),B(o.obj),o.context=null,o.resolve&&o.resolve(o.obj)),o.obj}function N(t,i){const o=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!o||!o.ctor)}var W,X=t=>j(t,"platform"),U=t=>C(t,"timer"),F=t=>S(t,"video-manager");function Y(t,i,o,e){let s=t,n=o,r=t=>{try{return n(t)}catch(t){var i,o;throw null===(i=(o=self).__AMP_REPORT_ERROR)||void 0===i||i.call(o,t),t}};const h=function(){if(void 0!==W)return W;W=!1;try{const t={get capture(){return W=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return W}(),a=!(null==e||!e.capture);return s.addEventListener(i,r,h?e:a),()=>{null==s||s.removeEventListener(i,r,h?e:a),n=null,s=null,r=null}}function Z(t,i,o,e){const s={detail:o};return Object.assign(s,e),new t.CustomEvent(i,s)}function q(t,i,o,e){return Y(t,i,o,e)}function G(t,i,o,e){let s=o;const n=Y(t,i,(t=>{try{s(t)}finally{s=null,n()}}),e);return n}function J(t,i,o){o=o.sort(((t,i)=>i.minWidth-t.minWidth));let e=-1;o.forEach((o=>{const{className:s,minWidth:n}=o;n<=i&&n>e?(t.classList.add(s),e=n):t.classList.remove(s)}))}var K="dock-dismiss-on-tap",Q="dock-scroll-back";function tt(t){const i=t.touches?t.touches[0]:t;return{x:"x"in i?i.x:i.clientX,y:"y"in i?i.y:i.clientY}}var it="dock",ot="registered",et=["<div class=i-amphtml-video-docked-overlay hidden></div>"],st=['<div class=amp-video-docked-controls hidden><div class="amp-video-docked-main-button-group amp-video-docked-control-set-playback"><div class=amp-video-docked-button-group><div role=button ref=playButton class=amp-video-docked-play></div><div role=button ref=pauseButton class=amp-video-docked-pause></div></div><div class=amp-video-docked-button-group><div role=button ref=muteButton class=amp-video-docked-mute></div><div role=button ref=unmuteButton class=amp-video-docked-unmute></div></div><div class=amp-video-docked-button-group><div role=button ref=fullscreenButton class=amp-video-docked-fullscreen></div></div></div><div class="amp-video-docked-main-button-group amp-video-docked-control-set-scroll-back" hidden><div class=amp-video-docked-button-group><div role=button ref=scrollBackButton class=amp-video-docked-scroll-back></div></div></div><div class=amp-video-docked-button-dismiss-group ref=dismissContainer><div role=button ref=dismissButton class=amp-video-docked-dismiss></div></div></div>'],nt="playback",rt="scroll-back",ht=[{className:"amp-small",minWidth:0},{className:"amp-large",minWidth:300}];function at(t,i){V(t,!1),V(i,!0)}var dt="left",lt="right",ct="bottom";function ut(t,i,o,e){return e*(t-i-2*o)}function mt(t,i,o,e){return ut(t,i,o,e)}function pt(t,i,o,e){return ut(t,i,o,-e)}var vt=(t,i,o)=>{return(e=t)<0?e=0:e>1&&(e=1),(e-0)*(o-(s=i))/1+s;var e,s};function gt(t,i){const{height:o,width:e}=t,{height:s,left:n,top:r,width:h}=i;let a,d,l;return e/o>h/s?(l=h/e,d=r+s/2-o*l/2,a=n):(l=s/o,a=n+h/2-e*l/2,d=r),u(a,d,e*l,o*l)}function _t(t,i,o,e,s,n,r){const h=i.width,a=Math.min(r,n*h),d=t.width/t.height,l=Math.max(s,h*e),c=l/d;return u(o==lt?i.right-a-l:i.left+a,a,l,c)}var ft=t=>t.width>0&&t.height>0,kt=t=>({get:t,configurable:!1,enumerable:!0});function At(t,i,o){if(i[o])return i[o];const e=t.querySelector(`style[${o}], link[${o}]`);return e?(i[o]=e,e):null}var Pt=["<div class=amp-video-docked-shadow hidden></div>"],bt=["<div class=amp-video-docked-placeholder-background><div class=amp-video-docked-placeholder-background-poster ref=poster></div><div class=amp-video-docked-placeholder-icon ref=icon></div></div>"],Mt=.85,wt=[{className:"amp-small",minWidth:0},{className:"amp-large",minWidth:420}],Vt="i-amphtml-video-docked",xt="slot",Tt=(t,i,o)=>`translate(${t}px, ${i}px) scale(${o})`;function Et(t,i){let o=!1;return(...e)=>{o||(o=!0,t.requestAnimationFrame((()=>{i.apply(null,e),o=!1})))}}t.registerServiceForDoc("video-docking",class{constructor(t){this.Ni=t,this.x_=y((()=>F(t))),this.Uu=S(t,"viewport"),this.Tt=function(t){const i=kt((()=>t.getSize().width)),o=kt((()=>t.getSize().height));return Object.defineProperties(u(0,0,0,0),{width:i,height:o,right:i,bottom:o})}(this.Uu),this.tz=null,this.iz=null;const i=m(this.oz());this.ez=y((()=>this.sx((t=>t(Pt))(i)))),this.sz=y((()=>this.nz())),this.rz=y((()=>this.sx((t=>t(bt))(i)))),this.hz=y((()=>v(this.rz()))),this.az=null,this.dz=null,this.lz=null,this.cz=null,this.Fx=this.Uu.getScrollTop(),this.uz=!1,this.mz=0,this.pz=0,this.vz=0,this.Li=[],this.Mx=y((()=>{const t=this.Ni;this.Uu.onScroll(Et(t.win,(()=>this.gz()))),this.Uu.onResize((()=>this._z())),function(t,i,o,e,s){const n=t.getHeadNode();!function(t,i,o,e){let s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=d());const n=`amp-extension=${e}`;if(n){const o=At(t,s,n);if(o)return"STYLE"==o.tagName&&o.textContent!==i&&(o.textContent=i),o}const r=(t.ownerDocument||t).createElement("style");r.textContent=i;let h=null;r.setAttribute("amp-extension",e),h=At(t,s,"amp-runtime"),function(t,i,o=null){if(!o)return void function(t,i){t.insertBefore(i,t.firstChild)}(t,i);const e=o.nextSibling;t.insertBefore(i,e)}(t,r,h),n&&(s[n]=r)}(n,function(t,i){const o=t.__AMP_CSS_TR;return o?o(i):i}(n,'.amp-video-docked-controls{direction:ltr!important;opacity:0;pointer-events:none!important;transition:opacity 0.3s ease;height:120px}.amp-video-docked-main-button-group{height:40px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin:-20px 0 0 -60px}.amp-large>.amp-video-docked-main-button-group{margin-left:-70px}.amp-large>.amp-video-docked-main-button-group>.amp-video-docked-button-group{margin-right:10px}.amp-large>.amp-video-docked-control-set-scroll-back,.amp-small>.amp-video-docked-control-set-scroll-back{margin-left:-32px}.amp-large>.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group{margin-right:0}.amp-large>.amp-video-docked-button-dismiss-group{margin:6px 0 0 -6px}.amp-small>.amp-video-docked-button-dismiss-group,.amp-small>.amp-video-docked-button-dismiss-group>div[role=button]{min-width:32px;height:32px;border-radius:32px;background-size:20px 20px}.amp-small>.amp-video-docked-button-dismiss-group{margin-left:8px}.amp-video-docked-controls-shown{opacity:1;pointer-events:initial!important}.amp-video-docked-button-group{margin:0}.amp-video-docked-button-dismiss-group,.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group,.amp-video-docked-button-group>div[role=button]{min-width:40px;height:40px;border-radius:40px}.amp-video-docked-button-dismiss-group:active,.amp-video-docked-button-group:active{background-color:hsla(0,0%,100%,0.7)}.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group,.amp-video-docked-button-group>div[role=button],.amp-video-docked-controls,.i-amphtml-video-docked-overlay{-webkit-tap-highlight-color:rgba(0,0,0,0)!important}.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group>div[role=button]{background-repeat:no-repeat;background-position:50%}.amp-video-docked-shadow{box-shadow:0px 0 20px 6px rgba(0,0,0,0.2);transition-property:transform,opacity!important}.amp-video-docked-controls-bg{background:hsla(0,0%,90%,0.6)}.amp-video-docked-mute{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-unmute{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-pause{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-play{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-fullscreen{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>\')}.amp-video-docked-dismiss{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-scroll-back{background-size:50%}.amp-rtl .amp-video-docked-scroll-back,.amp-video-docked-scroll-back{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\')}.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group,.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group>div[role=button]{min-width:64px;height:64px}.amp-video-docked-shadow,.i-amphtml-video-docked,.i-amphtml-video-docked-overlay{margin:0!important}.i-amphtml-video-docked{transition-property:transform!important}.amp-video-docked-controls,.amp-video-docked-shadow,.i-amphtml-video-docked,.i-amphtml-video-docked-overlay{position:fixed!important;top:0!important;left:0!important;right:auto!important;bottom:auto!important;padding:0!important;min-width:0!important;min-height:0!important;max-width:auto!important;max-height:auto!important;transform-origin:left top!important;will-change:width,height,transition,transform,opacity;transition:transform 0.05s}.i-amphtml-video-docked-overlay{opacity:0;transition:opacity 0.3s ease;contain:strict!important}.amp-video-docked-controls-bg{opacity:1}.i-amphtml-video-docked-overlay.amp-video-docked-almost-dismissed{opacity:1;background:hsla(0,0%,39%,0.1)}.i-amphtml-video-docked-shadow.amp-video-docked-almost-dismissed,.i-amphtml-video-docked.amp-video-docked-almost-dismissed{opacity:0.3}.amp-video-docked-button-dismiss-group{position:absolute;top:-40px}.amp-video-docked-placeholder-background{background:hsla(0,0%,78%,0.5);transition-property:opacity;overflow:hidden;pointer-events:none;z-index:0;opacity:0}.amp-video-docked-placeholder-icon{-webkit-mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h48v48H0z"/><path d="M40 4H16c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4V8c0-2.2-1.8-4-4-4zM8 12H4v28c0 2.2 1.8 4 4 4h28v-4H8V12zm28 3.868L23.382 28.486l-2.828-2.828L33.212 13H25V9h15v15h-4v-8.132z" fill="%23000" fill-rule="nonzero"/></g></svg>\');mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h48v48H0z"/><path d="M40 4H16c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4V8c0-2.2-1.8-4-4-4zM8 12H4v28c0 2.2 1.8 4 4 4h28v-4H8V12zm28 3.868L23.382 28.486l-2.828-2.828L33.212 13H25V9h15v15h-4v-8.132z" fill="%23000" fill-rule="nonzero"/></g></svg>\');-webkit-mask-size:48px 48px;mask-size:48px 48px;height:48px;width:48px;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:bottom left;mask-position:bottom left;background:hsla(0,0%,39%,0.8);transition-property:opacity,transform;will-change:opacity,transform;position:absolute;bottom:40px;left:40px}.amp-video-docked-placeholder-icon.amp-rtl{-webkit-mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\');mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\');left:auto;right:40px}.amp-video-docked-placeholder-icon.amp-small{-webkit-mask-size:32px 32px;mask-size:32px 32px;width:32px;height:32px;bottom:20px;left:20px}.amp-video-docked-placeholder-icon.amp-rtl.amp-small{left:auto;right:20px}.amp-video-docked-placeholder-background-poster{background-size:cover;background-repeat:no-repeat;filter:blur(20px);transform:scale(1.1);opacity:0.3}.amp-video-docked-controls{z-index:2147483646!important}.i-amphtml-video-docked-overlay{z-index:2147483645!important}.i-amphtml-video-docked{z-index:2147483644!important}.amp-video-docked-shadow{z-index:2147483643!important}\n/*# sourceURL=/extensions/amp-video-docking/0.1/amp-video-docking.css*/'),0,"amp-video-docking")}(t,0,null)})),this.fz=y((()=>this.kz())),this.Pb=null,this.Az=!1,this.Pz()}Pz(){if(!this.bz())return;const t=this.Ni,i=`[${it,CSS.escape("dock")}]`,o=t.getRootNode().querySelectorAll(i);for(let t=0;t<o.length;t++){const i=o[t];i.signals&&i.signals().get(ot)&&this.registerElement(i)}q(t.getBody(),ot,(t=>{const i=t.target;i.hasAttribute(it)&&this.registerElement(i)}))}bz(){return!X(this.Ni.win).isIos()||!(t=this.Ni,S(t,"viewer")).isEmbedded();var t}kz(){const t=this.Ni.getRootNode(),i=t.querySelector("[dock]");D(i.signals().get(ot),"`dock` attribute can only be set on video components.");const o=i.getAttribute("dock").trim();if(""==o)return null;const e=t.querySelector(o);return e&&D("amp-layout"==e.tagName.toLowerCase(),"Dock slot must be an <amp-layout> element."),e}_z(){var t;this.Tt.width!==(null===(t=this.tz)||void 0===t?void 0:t.viewportRect.width)&&this.Li.forEach((t=>this.Mz(t)))}wz(){const t=this.Vz();return t?t.getBoundingClientRect().top:0}register(t){this.Mx(),this.Pb||(this.Pb=new IntersectionObserver((t=>{const i=[];for(let o=t.length-1;o>=0;o--){const{boundingClientRect:e,target:s}=t[o];i.indexOf(s)<0&&(s.getImpl().then((t=>{this.xz(t,e)})),i.push(s))}}),{threshold:[0,.1,.2,.8,.9,1]})),this.Pb.observe(t.element),this.Li.push(t)}registerElement(t){t.getImpl().then((t=>this.register(t)))}gz(){const t=this.Uu.getScrollTop();if(Math.abs(t-this.Fx)<5)return;const i=t>this.Fx?"top":ct;this.cz=i,this.Fx=t}oz(){const t=this.Ni.getRootNode();return t.ownerDocument||t}sx(t){return(this.oz().body||this.oz()).appendChild(t)}Tz(t){const i=t=>this.Lm(t);return q(t,"touchstart",i),q(t,"mousedown",i),t}nz(){const t=new class{constructor(t){this.Ni=t;const i=m(t.getBody());this.container=(t=>t(st))(i),this.overlay=(t=>t(et))(i);const o=v(this.container),e=t=>o[t];this.Ez=e("dismissButton"),this.Rz=e("playButton"),this.Iz=e("pauseButton"),this.yz=e("muteButton"),this.zz=e("unmuteButton"),this.Oz=e("fullscreenButton"),this.Bz=e("scrollBackButton"),this.Dz=e("dismissContainer"),this.jz=this.container.querySelectorAll(".amp-video-docked-main-button-group"),this.Sz=!1,this.$z=!1,this.Lz=y((()=>new class{constructor(t,i){this.Ie=U(t),this.Me=i,this.di=null}trigger(t,...i){this.cancel(),this.di=this.Ie.delay((()=>this.Me.apply(null,i)),t)}cancel(){null!==this.di&&(this.Ie.cancel(this.di),this.di=null)}isWaiting(){return null!==this.di}}(this.Ni.win,(()=>{this.hide(!0)})))),this.Cz=[],this.Nz=null,this.Wz=null,this.Xz=null,this.HP=null,this.Uz(),this.Fz()}disable(){this.Sz=!0}enable(){this.Sz=!1}setVideo(t,i){this.Xz=i,this.HP!==t&&(this.HP=t,this.Yz(t))}Zz(t){const i=`amp-video-docked-control-set-${t}`;!function(t,o){const{length:e}=t;for(let o=0;o<e;o++)V(s=t[o],s.classList.contains(i));var s}(this.jz)}Yz(t){this.Mb();const i="click",{element:o}=t;this.Cz.push(this.qz(this.Ez,i,(()=>{this.Gz(K)})),this.qz(this.Rz,i,(()=>{!function(t,i){var o;(o=()=>t.play(!1),new Promise((t=>{t(o())}))).catch((t=>{k(0,t)}))}(t)})),this.qz(this.Iz,i,(()=>{t.pause()})),this.qz(this.yz,i,(()=>{t.mute()})),this.qz(this.zz,i,(()=>{t.unmute()})),this.qz(this.Oz,i,(()=>{t.fullscreenEnter()})),this.qz(this.Bz,i,(()=>{this.Gz(Q)})),q(this.container,"mouseup",(()=>this.hideOnTimeout(800))),q(o,"playing",(()=>this.Jz())),q(o,"pause",(()=>this.Kz())),q(o,"muted",(()=>this.Qz())),q(o,"unmuted",(()=>this.tH())),q(o,"ad_start",(()=>this.Zz(rt))),q(o,"ad_end",(()=>this.Zz(nt))))}Gz(t){this.container.dispatchEvent(Z(this.Ni.win,t,void 0))}Jz(){const{Iz:t,Rz:i}=this;this.$z=!1,at(i,t)}Kz(){const{Iz:t,Rz:i}=this;this.$z=!0,at(t,i)}Qz(){const{yz:t,zz:i}=this;at(t,i)}tH(){const{yz:t,zz:i}=this;at(i,t)}qz(t,i,o){return q(t,i,(()=>{this.Sz||o()}))}Mb(){for(;this.Cz.length>0;)this.Cz.pop().call()}hideOnTimeout(t=1200){this.Lz().trigger(t)}Fz(){const{overlay:t}=this,i=()=>this.iH();this.qz(t,"click",i),this.qz(t,"mouseover",i)}iH(){this.Ni.win.requestAnimationFrame((()=>{this.oH()}))}oH(){const t=F(this.Ni),i=B(this.HP),o=t.isRollingAd(i),e=t.isMuted(i),s="paused"!==t.getPlayingState(i),{container:n,overlay:r}=this;V(n,!0),n.classList.add("amp-video-docked-controls-shown"),r.classList.add("amp-video-docked-controls-bg"),this.Zz(o?rt:nt),V(this.Rz,!s),V(this.Iz,s),V(this.yz,!e),V(this.zz,e),this.eH(),this.hideOnTimeout()}positionOnVsync(t,i,o,e,s){this.Xz=u(i,o,e*t,s*t);const{container:n}=this,r=t/2,h=i+e*r,a=o+s*r;J(n,t*e,ht),M(n,{"transform":E(h,a)});const d=e*r-4-40,l=-(s*r-4-40);M(this.Dz,{"transform":E(d,l)})}Uz(){q(this.Ni.getRootNode(),"mousedown",(t=>{this.sH(t.target)||this.hide(!0)}))}sH(t){return t==this.overlay||!!t.closest(".amp-video-docked-controls")}hide(t,i){const o="amp-video-docked-controls-shown",{container:e,overlay:s}=this;e.classList.contains(o)&&(t&&this.$z||(i&&(V(e,!1),V(s,!1)),s.classList.remove("amp-video-docked-controls-bg"),e.classList.remove(o)))}eH(){this.Nz||(this.Nz=q(this.overlay,"mousemove",(()=>{this.iH()})),this.Wz=q(this.overlay,"mouseout",(t=>{B(this.Xz);const{x:i,y:o}=tt(t),{bottom:e,left:s,right:n,top:r}=this.Xz;(i<s||i>n||o<r||o>e)&&(this.hide(!0),this.nH())})))}nH(){this.Nz&&(this.Nz(),this.Nz=null),this.Wz&&(this.Wz(),this.Wz=null)}reset(){const{container:t,overlay:i}=this,o=[i,t];V(i,!1),this.hide();for(let t=0;t<o.length;t++)R(o[t],["transform","transition","width","height"])}}(this.Ni),{container:i,overlay:o}=t;return q(i,K,(()=>{this.rH()})),q(i,Q,(()=>{this.hH()})),this.Tz(i),this.Tz(o),this.sx(i),this.sx(o),t}rH(){this.sz().hide(!1,!0),this.aH(this.dH())}dH(){return B(this.tz).video}lH(t,i){if(this.uz||!this.cH(t,i)||this.uH(t)||this.mH(t))return null;const{element:o}=t,e=function(t){let i=-1/0,o=1/0,e=-1/0,s=1/0;for(let t=0;t<arguments.length;t++){const n=arguments[t];if(n&&(i=Math.max(i,n.left),o=Math.min(o,n.left+n.width),e=Math.max(e,n.top),s=Math.min(s,n.top+n.height),o<i||s<e))return null}return o==1/0?null:u(i,e,o-i,s-e)}(i||o.getBoundingClientRect(),this.Tt);return e&&ft(e)?e.top>this.wz()?null:this.pH(t,i):null}vH(t){return(t=t.element||t).getBoundingClientRect()}Mz(t){this.Ph((()=>{const i=this.lH(t);i?this.gH(t,i,1):this._H(t)&&this.aH(t)}))}Ph(t){this.Ni.win.requestAnimationFrame(t)}xz(t,i){if(!this.Az)if("top"==this.cz){const o=this.lH(t,i);o&&this.fH(t,o,i)}else if(this.cz==ct){if(!this.tz)return;t===this.dH()&&this.rs(t,Mt,i)&&this.aH(t,!1,i)}}mH(t){return!this.tz&&!this.gf(t)}uH(t){return!!this.tz&&!this._H(t)}cH(t,i){const{height:o,width:e}=i||t.element.getBoundingClientRect();return e/o<.98?(function(t){const i=t.tagName.toUpperCase();H().error(i,"Minimize-to-corner (`dock`) does not support portrait video.",t)}(t.element),!1):this.Tt.width>=320&&this.Tt.height>=o*Mt}gf(t=null){const i=t||this.dH();return"playing_manual"==this.x_().getPlayingState(i)}fH(t,i,o){this.kH(t)||this.tz||this.AH(t,i,o)}AH(t,i,o){return this.gH(t,i,.05,o,!0).then((()=>new Promise((e=>{this.Ph((()=>{this.gH(t,i,1,o).then(e)}))}))))}gH(t,i,o,e,s){const{element:n}=t;this.SA(n);const{relativeX:r,scale:h,x:a,y:d}=this.PH(t,i,o,e);t.hideControls();const l=this.bH(o);return this.MH(t,i,o),this.wH(t,a,d,h,o,l,r,e).then((()=>{s||this.sz().enable()}))}Ee(t,i){const o=i&&i.slot||this.Vz()||this.dH().element,e=Z(this.Ni.win,t,{});(t=>function(t,i){const o=L($(t));return N(o,i)?C(o,i):null}(t,"action"))(o).trigger(o,t,e,1)}kH(t){return this.az==t&&(this.rs(t.element,.02)&&this.VH(),!0)}VH(){this.az=null}bH(t){return this.tz?300*Math.abs(t-this.tz.step):0}xH(t,i,o){return!!this.dz&&this.dz.x==t&&this.dz.y==i&&this.dz.scale==o}wH(t,i,o,s,n,r,h,a,d="fixed"){if(this.xH(i,o,s))return e||(e=Promise.resolve(void 0));this.Az=!0;const{element:l}=t,u=a||t.element.getBoundingClientRect(),{height:m,width:p}=u;this.dz={x:i,y:o,scale:s};const v=n>0?"ease-out":"ease-in",g=I(l),_=this.ez(),{overlay:f}=this.sz(),k=this.rz(),A=this.hz().icon,P=void 0!==h,b=h==dt;P&&(J(A,p,wt),A.classList.toggle("amp-rtl",b),this.sz().container.classList.toggle("amp-rtl",b));const w=this.TH(p,m),T=t=>M(t,{"opacity":n}),E=t=>M(t,{"transition-duration":`${r}ms`,"transition-timing-function":v}),R=A.classList.contains("amp-small"),y=(b?pt:mt)(p,R?32:48,R?20:40,n);return t.mutateElement((()=>{g.classList.add(Vt),M(l,{"overflow":"visible"}),V(_,!0),V(f,!0),c(this.hz().poster),c(k),this.EH(t),l.appendChild(k),this.Ph((()=>{t.mutateElement((()=>{T(k),E(k),E(A),P&&M(A,{"transform":Tt(y,0,1)})}))}));let e=0,n=0,r=0,h=0;"absolute"===d&&(e=u.left,n=u.top,r=l.offsetLeft,h=l.offsetTop),this.RH(t).forEach((t=>{const a=Number(t!==g),l=a*h-n;M(t,{"position":d,"left":x(a*r-e),"top":x(l),"transform":Tt(i,o,s)}),E(t),(t=>{w&&M(t,{"width":x(p),"height":x(m),"min-width":x(p),"min-height":x(m)})})(t)})),T(_),this.sz().positionOnVsync(s,i,o,p,m)})),this.IH().promise(r).then((()=>{this.Az=!1}))}IH(){return U(this.Ni.win)}RH(t){return[I(t.element),this.ez(),this.sz().overlay]}EH(t){const i=this.hz().poster,o=function(t){const i=t.getAttribute("poster")||t.getAttribute("data-poster");if(i)return i;const o=("amp-img[placeholder],img[placeholder],[placeholder] amp-img",t.querySelector(function(t,i){return t.replace(/^|,/g,"$&:scope ")}("amp-img[placeholder],img[placeholder],[placeholder] amp-img")));return o?o.getAttribute("src"):void 0}(t.element);o?(V(i,!0),function(t,i){for(const o in i)w(t,o,i[o])}(i,{"background-image":`url(${o})`})):V(i,!1)}TH(t,i){const o=!this.lz||this.lz.width!=t||this.lz.height!=i;return o&&(this.lz={width:t,height:i}),o}_H(t){return!!this.tz&&this.tz.video==t}MH(t,e,s){const n=this.tz,r=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(o){i(t,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}({},this.Tt);var h,a;this.tz={video:t,target:e,step:s,viewportRect:r},n&&n.video==t&&(h=e.rect,a=n.target.rect,h&&a&&h.left==a.left&&h.top==a.top&&h.width==a.width&&h.height==a.height)||(this.sz().setVideo(t,e.rect),this.Ee("dock",e))}yH(t){const i=this.dH(),{target:o}=this.tz,{scale:e,x:s,y:n}=this.PH(i,o,1),r=this.zH(t),h=this.HH(r);this.vz=t-this.pz,this.pz=t,this.wH(i,s+t,n,e,1,0,h)}rs(t,i=1,o){const e=o||this.vH(t);if(!ft(e))return 0;const s=Math.min(e.bottom,this.Tt.bottom)-Math.max(e.top,this.Tt.top);return Math.max(0,s/e.height)>i-.02}Lm(t){if(!this.tz)return;if(this.OH(xt))return;if(this.Az)return;this.mz=0;const{x:i}=tt(t),{directionX:o}=this.tz.target,e=Et(this.Ni.win,(t=>this.BH(t,o,i))),s=()=>this.DH(r),n=this.Ni.getRootNode(),r=[this.jH(),this.SH(),this.$H(),q(n,"touchmove",e),q(n,"mousemove",e),G(n,"touchend",s),G(n,"mouseup",s)]}OH(t){return!!this.tz&&this.tz.target.type===t}SH(){const t=this.oz().documentElement,i="i-amphtml-select-disabled";return t.classList.add(i),()=>t.classList.remove(i)}jH(){return this.Uu.disableScroll(),this.Uu.resetScroll.bind(this.Uu)}BH(t,i,o){if(this.tz.target.directionX!==i)return;const e=tt(t).x-o;this.mz=e,e<=10||(t.preventDefault(),t.stopPropagation(),this.sz().hide(!1,!0),this.uz=!0,this.sz().disable(),this.yH(e))}$H(){const{win:t}=this.Ni;if(!X(t).isIos())return()=>{};const i=t=>t.preventDefault();return t.addEventListener("touchmove",i,{passive:!1}),()=>t.removeEventListener("touchmove",i)}DH(t){t.forEach((t=>t.call())),this.uz=!1,this.sz().enable(),Math.abs(this.vz)<40?this.LH(this.mz):this.CH(this.pz,Math.sign(this.vz)),this.vz=0,this.pz=0,this.mz=0}CH(t,i){B(1==Math.abs(i));const o=this.dH();if(o.pause(),this.rs(o,.2))return void this.NH(o,t,i);const{target:e}=B(this.tz),{width:s,x:n,y:r}=e.rect,{scale:h}=this.PH(o,e,1),a=n+t,d=1==i?this.Tt.right:this.Tt.left-s,l=this.WH(d-a);this.XH(),o.showControls(),this.wH(o,d,r,h,0,l).then((()=>{this.UH(o)}))}NH(t,i,o){B(1==Math.abs(o));const{target:e}=B(this.tz),{width:s,x:n,y:r}=e.rect,{scale:h}=this.PH(t,e,1),a=this.Tt.width,d=n+i,l=1==o?mt(a,s,0,1):pt(a,s,0,1),c=this.WH(l-d);this.XH(),this.wH(t,l,r,h,0,c).then((()=>{this.aH(t,!0),t.showControls()}))}WH(t){return Math.min(300,Math.abs(t)/2)}zH(t){const{step:i,target:o}=this.tz,e=this.dH(),{width:s}=e.element.getBoundingClientRect(),{scale:n,x:r}=this.PH(e,o,i);return r+t+s*n/2}LH(t){const i=this.dH(),{step:o}=this.tz,e=this.HH(t);this.iz=e;const s=this.pH(i);this.tz.target=s;const{scale:n,x:r,y:h}=this.PH(i,s,o);this.wH(i,r,h,n,o,200,e)}HH(t){return this.zH(t)>=this.Tt.width/2?lt:dt}PH(t,i,o,e){return function(t,i,o=1){const e=i.x<t.x?dt:lt;return{x:vt(o,t.x,i.x),y:vt(o,t.y,i.y),scale:vt(o,t.width,i.width)/t.width,relativeX:e}}(e||this.vH(t),i.rect,o)}aH(t,i,o){const e=this.rs(t,Mt,o);e||(t.pause(),t.showControls()),i||this.XH();const{target:s}=B(this.tz),{relativeX:n,scale:r,x:h,y:a}=this.PH(t,s,0),d=e?this.bH(0):0;return this.wH(t,h,a,r,0,d,n,o,"absolute").then((()=>{t.showControls(),this.UH(t)}))}XH(){this.sz().disable(),this.sz().hide(!1,!0),this.Ee("undock")}UH(t){const{element:i}=t,o=I(i);return t.mutateElement((()=>{o.classList.remove(Vt);const t=this.ez(),i=this.hz().icon,e=this.rz();V(t,!1),this.sz().reset(),[o,t,e,i].forEach((t=>{R(t,["transform","transition","min-width","min-height","width","height","opacity","overflow","position","left","top"])})),this.dz=null,this.lz=null,this.tz=null}))}SA(t){const i=t.querySelector(".i-amphtml-android-poster-bug");var o,e;i&&(null===(e=(o=i).parentElement)||void 0===e||e.removeChild(o))}hH(){this.tz&&this.Uu.animateScrollIntoView(this.dH().element,"center")}pH(t,i){const o=this.Vz(),e=i||t.element.getBoundingClientRect();return o?{type:xt,rect:gt(e,o.getBoundingClientRect()),slot:o}:(null===this.iz&&(this.iz="rtl"==((s=this.oz()).body.getAttribute("dir")||s.documentElement.getAttribute("dir")||"ltr")?dt:lt),{type:"corner",rect:_t(e,this.Tt,this.iz,.3,180,.04,30),directionX:this.iz});var s}Vz(){const t=this.fz();return t&&ft(t.getBoundingClientRect())?t:null}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-video-docking-0.1.mjs.map