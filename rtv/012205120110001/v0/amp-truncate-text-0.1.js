;
(self.AMP=self.AMP||[]).push({m:0,v:"2205120110001",n:"amp-truncate-text",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,e){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,e)}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function i(t){return t?Array.prototype.slice.call(t):[]}var a=Array.isArray;function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=Object.prototype;function f(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function p(t,n,e,r,o,i,a,u,c,l,s){return t}function m(t){var n=t.ownerDocument||t;return l&&l.ownerDocument===n||(l=n.createElement("div")),d}function d(t){return function(t,n){p(1===n.length),t.innerHTML=n[0];var e=t.firstElementChild;return p(e),p(!e.nextElementSibling),t.removeChild(e),e}(l,t)}function h(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function b(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach((function(n){h(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}s.hasOwnProperty,s.toString;var y=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function x(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function j(t,n,e,r,o,i,a,u,c,l,s){return t}function O(t){return t.nodeType?(e=t,n=(e.ownerDocument||e).defaultView,function(t,n){return g(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),"ampdoc")}(n)).getAmpDoc(t):t;var n,e}function g(t,n){j(N(t,n));var e=function(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(j(e.ctor),j(e.context),e.obj=new e.ctor(e.context),j(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function N(t,n){var e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var E="__AMP__EXPERIMENT_TOGGLES",T="i-amphtml-truncate-overflow",A="i-amphtml-truncate-child-overflow",S="__AMP_TRUNCATE_TEXT_DATA",_="__AMP_TRUNCATE_TRUNCATED";function R(t){t[_]&&(t[_]=!1,t.removeAttribute(T),U(t))}function M(t,n){for(var e="slot"==t.localName?t.assignedNodes({flatten:!0}):t.childNodes,r=0;r<e.length;r++)n(e[r])}function U(t){var n=t[S];n&&n.modifiedText==t.data&&(t.data=n.originalText),t.nodeType==Node.ELEMENT_NODE&&t.removeAttribute(A),M(t,(function(t){return U(t)}))}function C(t,n,e){t[S]={originalText:n,modifiedText:e},t.data=e}function I(t){return t.scrollHeight-t.offsetHeight}function P(t){var n=t.container,e=t.overflowNodes;if(R(n),!(I(n)<=0)){var r,o=n.getBoundingClientRect();(r=n)[_]=!0,r.setAttribute(T,""),function(t,n,e){for(var r=k(t,(function(t){return!e.includes(t)})),o=r.length-1;o>=0;o--){var i=r[o];if(i.nodeType==Node.ELEMENT_NODE&&i.setAttribute(A,""),i.nodeType==Node.TEXT_NODE&&z(i,t,n))break}}(n,o,e)}}function k(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n(t)?(e.push(t),M(t,(function(t){return k(t,n,e)})),e):e}function z(t,n,e){var r=document.createRange();r.selectNode(t);var o=r.getBoundingClientRect(),i=t.data;if(o.height){if(!(o.top>e.bottom)){var a,u=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;j(t<=n);for(var i=t,a=n-1,u=NaN,c=NaN;a>=i;){var l=i+Math.floor((a-i)/2),s=e(l);if(s>0||0==s&&1==r)u=2==o?l:u,c=0==s?l:c,i=l+1;else{if(!(s<0||0==s&&2==r)){c=l;break}u=1==o?l:u,c=0==s?l:c,a=l-1}}return isNaN(c)?-((isNaN(u)?1==o?i:a:u)+1):c}(0,i.length,(function(e){for(;!i[e].trim()&&e>0;)e--;return function(t,n,e,r){return n.data=e.slice(0,r+1)+"… ",0-I(t)}(n,t,i,e)}),1,1),c=u>=0?u+1:-(u+1),l=(a=i.slice(0,c)).trimEnd?a.trimEnd():("_"+a).trim().slice(1);return C(t,i,l?l+"… ":""),!!l}C(t,i,"")}}var L=["<div class=i-amphtml-truncate-content><span class=i-amphtml-default-slot></span> <span class=i-amphtml-truncate-collapsed-slot name=collapsed></span> <span class=i-amphtml-truncate-expanded-slot name=expanded></span> <span class=i-amphtml-truncate-persistent-slot name=persistent></span></div>"],D=["<div class=content><slot></slot><slot class=collapsed-slot name=collapsed></slot><slot class=expanded-slot name=expanded></slot><slot class=persistent-slot name=persistent></slot></div>"],X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(d,t);var r,u,l=(r=d,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=e(r);if(u){var i=e(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return o(this,t)}),s=d.prototype;function d(t){var n;return(n=l.call(this,t)).tU=null,n.nU=null,n.eU=null,n.rU=null,n.oU=!1,n.ln=new n.win.MutationObserver((function(){n.iU()})),n}return s.aU=function(){var t=this;this.registerAction("expand",(function(){return t.B_()})),this.registerAction("collapse",(function(){return t.M_()}))},s.buildCallback=function(){var t,n=this;this.ln.observe(this.element,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),this.oU=!!this.element.attachShadow&&("amp-truncate-text-shadow",t=function(t){var n,e,r,o,i;if(t[E])return t[E];t[E]=f();var u=t[E];p(u);var l,s=b(b({},null!==(n=t.AMP_CONFIG)&&void 0!==n?n:{}),null!==(e=t.AMP_EXP)&&void 0!==e?e:(l=(null===(r=t.__AMP_EXP)||void 0===r?void 0:r.textContent)||"{}",JSON.parse(l)));for(var m in s){var d=s[m];"number"==typeof d&&d>=0&&d<=1&&(u[m]=Math.random()<d)}var h=null===(o=t.AMP_CONFIG)||void 0===o?void 0:o["allow-doc-opt-in"];if(a(h)&&h.length){var v=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(v)for(var j,O,g=c((null===(j=v.getAttribute("content"))||void 0===j?void 0:j.split(","))||[],!0);!(O=g()).done;){var N=O.value;h.includes(N)&&(u[N]=!0)}}Object.assign(u,function(t){var n,e="";try{var r;"localStorage"in t&&(e=null!==(r=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==r?r:"")}catch(t){(w.dev||(w.dev=function(t,n){throw new Error("failed to call initLogConstructor")}())).warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}for(var o,i=(null===(n=e)||void 0===n?void 0:n.split(/\s*,\s*/g))||[],a=f(),u=c(i,!0);!(o=u()).done;){var l=o.value;l&&("-"==l[0]?a[l.substr(1)]=!1:a[l]=!0)}return a}(t));var T=null===(i=t.AMP_CONFIG)||void 0===i?void 0:i["allow-url-opt-in"];if(a(T)&&T.length)for(var A,S=function(t){var n,e=f();if(!t)return e;for(;n=y.exec(t);){var r=x(n[1],n[1]),o=n[2]?x(n[2].replace(/\+/g," "),n[2]):"";e[r]=o}return e}(t.location.originalHash||t.location.hash),_=c(T,!0);!(A=_()).done;){var R=A.value,M=S["e-".concat(R)];"1"==M&&(u[R]=!0),"0"==M&&(u[R]=!1)}return u}(this.win),!!t["amp-truncate-text-shadow"]),this.oU?this.uU():this.cU(),this.aU(),this.nU.addEventListener("click",(function(t){n.lU(t)})),this.eU.addEventListener("click",(function(t){n.sU(t)}))},s.cU=function(){var t=this,n=m(this.element);this.tU=n(L);var e,r=this.tU.querySelector(".i-amphtml-default-slot");this.nU=this.tU.querySelector(".i-amphtml-truncate-collapsed-slot"),this.eU=this.tU.querySelector(".i-amphtml-truncate-expanded-slot"),this.rU=this.tU.querySelector(".i-amphtml-truncate-persistent-slot"),this.element.querySelectorAll('[slot="collapsed"]').forEach((function(n){t.nU.appendChild(n)})),this.element.querySelectorAll('[slot="expanded"]').forEach((function(n){t.eU.appendChild(n)})),this.element.querySelectorAll('[slot="persistent"]').forEach((function(n){t.rU.appendChild(n)})),(e=this.element,function(t,n){for(var e=[],r=t.firstChild;r;r=r.nextSibling)void 0,a=void 0,u=void 0,"string"==typeof(i=o=r)?a=i:1==(null==(u=i)?void 0:u.nodeType)&&(a=i.tagName),!(a&&a.toLowerCase().startsWith("i-")||o.nodeType===Node.ELEMENT_NODE&&(o.hasAttribute("placeholder")||o.hasAttribute("fallback")||o.hasAttribute("overflow")))&&e.push(r);var o,i,a,u;return e}(e)).forEach((function(t){r.appendChild(t)})),this.element.appendChild(this.tU)},s.uU=function(){var t=m(this.element),n=function(t,n,e){var r=t.querySelector("i-amphtml-sizer");r&&r.setAttribute("slot","i-amphtml-sizer");var o=t.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=":host{padding:0!important;border:none!important}:host([i-amphtml-truncate-expanded]){height:auto!important}:host([i-amphtml-truncate-expanded]) ::slotted(i-amphtml-sizer){display:none!important}:host([i-amphtml-truncate-expanded]) .content{position:static}:host(:not([i-amphtml-truncate-expanded])) .expanded-slot{display:none}.content{position:absolute;top:0;left:0;bottom:0;right:0}.expand-slot::slotted(*){margin:0!important;white-space:nowrap!important}:host(:not([i-amphtml-truncate-overflow])) .collapsed-slot{display:none}::slotted([i-amphtml-truncate-child-overflow]){display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text-shadow.css*/";var a=document.createElement("slot");return a.setAttribute("name","i-amphtml-sizer"),o.appendChild(i),o.appendChild(a),o.appendChild(e),o}(this.element,0,t(D));this.tU=null,this.nU=n.querySelector(".collapsed-slot"),this.eU=n.querySelector(".expanded-slot"),this.rU=n.querySelector(".persistent-slot")},s.layoutCallback=function(){var t=this;return this.mutateElement((function(){t.iU()}))},s.isRelayoutNeeded=function(){return!0},s.isLayoutSupported=function(){return!0},s.fU=function(){return this.oU?i(this.element.querySelectorAll('[slot="persistent"], [slot="collapsed"]')):i(this.element.querySelectorAll(".i-amphtml-truncate-persistent-slot, .i-amphtml-truncate-collapsed-slot"))},s.iU=function(){P({container:this.oU?this.element:this.tU,overflowNodes:this.fU()}),this.ln.takeRecords()},s.lU=function(t){this.pU(t,!0)},s.sU=function(t){this.pU(t,!1)},s.pU=function(t,n){var e,r=t.target;(function(t){return n="action",e=O(t),N(o=(r=O(e)).isSingleDoc()?r.win:r,n)?g(o,n):null;var n,e,r,o})(this.element).hasAction(r,"tap")||("a[href]",((e=r).closest?e.closest("a[href]"):function(t,n,e){var r;for(r=t;r&&void 0!==r;r=r.parentElement)if(n(r))return r;return null}(e,(function(t){return function(t,n){var e=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!e&&e.call(t,"a[href]")}(t)})))||(n?this.B_():this.M_()))},s.B_=function(){this.element.setAttribute("i-amphtml-truncate-expanded","")},s.M_=function(){this.element.removeAttribute("i-amphtml-truncate-expanded")},d}(t.BaseElement);t.registerElement("amp-truncate-text",X,"amp-truncate-text{padding:0!important;border:none!important}amp-truncate-text[i-amphtml-truncate-expanded]{height:auto!important}amp-truncate-text[i-amphtml-truncate-expanded]>i-amphtml-sizer{display:none!important}amp-truncate-text[i-amphtml-truncate-expanded] .i-amphtml-truncate-content{position:static!important}amp-truncate-text:not([i-amphtml-truncate-expanded]) .i-amphtml-truncate-expanded-slot{display:none!important}.i-amphtml-truncate-content{position:absolute!important;top:0!important;left:0!important;bottom:0!important;right:0!important}.i-amphtml-truncate-content [slot=expanded]{margin:0!important;white-space:nowrap!important}.i-amphtml-truncate-content:not([i-amphtml-truncate-overflow]) .i-amphtml-truncate-collapsed-slot,[i-amphtml-truncate-child-overflow]{display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-truncate-text-0.1.js.map