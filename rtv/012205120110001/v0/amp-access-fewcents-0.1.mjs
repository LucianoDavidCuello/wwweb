;
(self.AMP=self.AMP||[]).push({m:1,v:"2205120110001",n:"amp-access-fewcents",ev:"0.1",l:!1,f:function(t,e){(()=>{var{hasOwnProperty:e,toString:n}=Object.prototype;function i(t,e,n){return function(t,e){for(const n in e)t.setAttribute(n,e[n]);return t}(t.createElement(e),n)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var r,s=self.__AMP_LOG;function a(t){return s.user||(s.user=o()),function(t,e){return e&&e.ownerDocument.defaultView!=t}(s.user.win,t)?s.userForEmbed||(s.userForEmbed=o()):s.user}function o(t){return function(t,e){throw new Error("failed to call initLogConstructor")}()}function c(t,e,n,i,r,s,a,o,c,l,u){return t}function l(t,e){return p(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function u(t,e){return d(h(t),e)}function f(t){return t.nodeType?(n=t,e=(n.ownerDocument||n).defaultView,l(e,"ampdoc")).getAmpDoc(t):t;var e,n}function h(t){const e=f(t);return e.isSingleDoc()?e.win:e}function p(t,e){c(function(t,e){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!n||!n.ctor)}(t,e));const n=m(t)[e];return n.obj||(c(n.ctor),c(n.context),n.obj=new n.ctor(n.context),c(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function d(t,e){const n=m(t)[e];return n?n.promise?n.promise:(p(t,e),n.promise=Promise.resolve(n.obj)):null}function m(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}function g(t,e,n,i){return function(t,e,n,i){const r=u(t,e);if(r)return r;const s=f(t);return s.whenExtensionsKnown().then((()=>{const t=s.getExtensionVersion(n);return t?l(s.win,"extensions").waitForExtension(n,t):null})).then((n=>n?i?u(t,e):function(t,e){return function(t,e){const n=d(t,e);if(n)return n;const i=m(t);return i[e]=function(){const t=new class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}},{promise:e,reject:n,resolve:i}=t;return e.catch((()=>{})),{obj:null,promise:e,resolve:i,reject:n,context:null,ctor:null}}(),i[e].promise}(h(t),e)}(t,e):null))}(t,e,n,i).then((t=>function(t,e,n){return i=t,r=e,s=n,o=n,c=n,a().assert(i,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",r,s,o,c,void 0,void 0,void 0,void 0,void 0);var i,r,s,o,c}(t,e,n)))}var x,v,w={fcTitleText:"Instant Access With Fewcents.",fcPromptText:"I already bought this",fcButtonText:"Unlock",fcPoweredImageRef:"https://images.fewcents.co/paywall/powered-fewcents.png",fcTermsRef:"https://www.fewcents.co/terms",fcPrivacyRef:"https://www.fewcents.co/privacy",fcContactUsRef:"mailto:support@fewcents.co"};function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t,e,n,i){return function(t,e,n,i){let r=t,s=n,a=t=>{try{return s(t)}catch(t){var e,n;throw null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t),t}};const o=function(){if(void 0!==x)return x;x=!1;try{const t={get capture(){return x=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return x}(),c=!(null==i||!i.capture);return r.addEventListener(e,a,o?i:c),()=>{null==r||r.removeEventListener(e,a,o?i:c),s=null,r=null,a=null}}(t,e,n,i)}function R(t,e,n){if(e[n])return e[n];const i=t.querySelector(`style[${n}], link[${n}]`);return i?(e[n]=i,i):null}function y(t,e){const n=t.styleSheets;for(let t=0;t<n.length;t++)if(n[t].ownerNode==e)return!0;return!1}new Set(["c","v","a","ad"]),t.registerServiceForDoc("fewcents",(function(t){return(e=t.getHeadNode(),g(e,"access","amp-access")).then((t=>{const e=t.getVendorSource("fewcents"),n=new class{constructor(t,e){this.ampdoc=t.ampdoc,this.kR=e,this.Cct=null,this.dft=null,this.gft=this.kR.getAdapterConfig(),this.xft=this.vft(),this.Uct=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},w),this.wft=null,this.NR=l(this.ampdoc.win,"xhr"),this.Ie=(t=>p(this.ampdoc.win,"timer"))(),this.ar=(t=>l(this.ampdoc.win,"vsync"))(),this.Mct=null,this.bft=null,function(t,e,n,i,r){const s=t.getHeadNode(),a=function(t,e,n,i){let r=t.__AMP_CSS_SM;r||(r=t.__AMP_CSS_SM=Object.create(null));const s=!n&&i&&"amp-custom"!=i&&"amp-keyframes"!=i,a=n?"amp-runtime":s?`amp-extension=${i}`:null;if(a){const n=R(t,r,a);if(n)return"STYLE"==n.tagName&&n.textContent!==e&&(n.textContent=e),n}const o=(t.ownerDocument||t).createElement("style");o.textContent=e;let c=null;return n?o.setAttribute("amp-runtime",""):s?(o.setAttribute("amp-extension",i||""),c=R(t,r,"amp-runtime")):(i&&o.setAttribute(i,""),c=t.lastChild),function(t,e,n=null){if(!n)return void function(t,e){t.insertBefore(e,t.firstChild)}(t,e);const i=n.nextSibling;t.insertBefore(e,i)}(t,o,c),a&&(r[a]=o),o}(s,function(t,e){const n=t.__AMP_CSS_TR;return n?n(e):e}(s,e),i||!1,r||null);if(n){const e=t.getRootNode();if(y(e,a))return n(a),a;const i=setInterval((()=>{y(e,a)&&(clearInterval(i),n(a))}),4)}}(this.ampdoc,"#amp-access-fewcents-dialog{padding:20px}.aaf-container{height:auto;width:70%;max-width:540px;-ms-flex-align:center;align-items:center;margin:20px auto auto;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:5px 15px;background-color:#f5f5f5;border:0px;border-radius:5px;opacity:1;transition:opacity 0.5s ease 0s;font-family:Arial;font-weight:400;box-shadow:1px 2px 2px 2px grey;overflow:hidden}.aaf-headerText{font-size:17px;text-align:center;word-wrap:normal;overflow:hidden;margin-top:10px}.aaf-purchase-button{line-height:1.2;cursor:pointer;color:#fff;border:0;background:#08289a;width:100%;border-radius:5px;height:40px;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-size:16px;outline:none;margin:auto;padding:0px 25px;max-width:160px}.aaf-imageTag{max-height:30px}.aaf-already-bought{font-size:13px;font-weight:500;text-align:center;margin-top:4px;color:#08289a}.aaf-price-btn-div{display:-ms-flexbox;display:flex;place-content:center space-evenly;-ms-flex-align:center;align-items:center;margin:12px auto 0px;max-width:250px}.aaf-article-price{font-size:24px;font-weight:400;text-align:center;margin-right:10px;color:#000}.aaf-btn-div{line-height:1.2;margin-top:0.5 rem;text-align:center}.aaf-bottom-div{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.aaf-fewcents-image-tag{max-height:45px}.aaf-refRow{word-break:break-word}.aaf-refElements,.aaf-refRow{text-align:center;color:#a8a3a3}.aaf-refElements{padding:4px;font-size:11px;white-space:nowrap}.aaf-partition-bar{font-size:11px;margin:0px 4px}@media (max-width:786px){#amp-access-fewcents-dialog{width:350px}}\n/*# sourceURL=/extensions/amp-access-fewcents/0.1/amp-access-fewcents.css*/",(()=>{}),!1,"amp-access-fewcents")}authorize(){return this._ft().then((t=>(this.$ct(),{access:t.data.access,data:JSON.stringify(t)})),(t=>{if(!t||!t.response)throw t;const{response:e}=t;if(402!==e.status)throw t;return e.json().catch((()=>{throw t})).then((t=>(this.Pft(t),this.$ct().then(this.Jct.bind(this)),{access:!1,data:JSON.stringify(t)})))})).catch((()=>(this.$ct(),{access:!0})))}vft(){const t=this.gft.accessKey,e=this.gft.articleIdentifier,n=this.gft.category,{hostname:i}=(v||(v=self.document.createElement("a")),(r=v).href="",new URL(void 0,r.href));var r;return this.Rft()+"v1/amp/authorizeBid?articleUrl=SOURCE_URL&ampReaderId=READER_ID&returnUrl=RETURN_URL&accessKey="+encodeURIComponent(t)+"&category="+encodeURIComponent(n)+"&articleIdentifier="+encodeURIComponent(e)+"&domain="+encodeURIComponent(i)}Rft(){const t=this.gft.environment;return"development"===t?"https://api.hounds.fewcents.co/":"demo"===t?"https://api.demo.fewcents.co/":"https://api.fewcents.co/"}Pft(t){var e,n,i;const r=null==t||null===(e=t.data)||void 0===e?void 0:e.purchaseOptions;this.Mct=null==r?void 0:r[0],this.bft=null==t||null===(n=t.data)||void 0===n?void 0:n.loginUrl;const s=null==t||null===(i=t.data)||void 0===i?void 0:i.bidId;s&&(this.wft=s)}_ft(){let t=this.xft;return this.wft&&(t=t+"&bidId="+this.wft),this.kR.buildUrl(t,!1).then((t=>this.kR.getLoginUrl(t))).then((t=>this.Ie.timeoutPromise(1e4,this.NR.fetchJson(t,{})).then((t=>t.json()))))}$ct(){return this.kct?r||(r=Promise.resolve(void 0)):(this.yft&&(this.yft=null),this.jct&&(this.jct=null),this.ar.mutatePromise((()=>{this.kct=!0,this.Cct=null,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(this.Aft())})))}Aft(){const t=this.gft.contentSelector,e=this.ampdoc.getElementById(t);return a().assertElement(e,"No element found with given id",t)}Jct(){this.dft=this.Aft(),this.Cct=i(this.ampdoc.win.document,"div",{class:"aaf-container"}),this.Eft(),this.Ift(),this.Tft();const t=i(this.ampdoc.win.document,"div",{class:"aaf-bottom-div"}),e=this.Oft();t.appendChild(e);const n=i(this.ampdoc.win.document,"img",{class:"aaf-fewcents-image-tag",src:this.Uct.fcPoweredImageRef});t.appendChild(n),this.Cct.appendChild(t),this.dft.appendChild(this.Cct),this.kct=!1}Eft(){const t=i(this.ampdoc.win.document,"img",{class:"aaf-imageTag",src:this.gft.publisherLogoUrl});this.Cct.appendChild(t);const e=i(this.ampdoc.win.document,"div",{class:"aaf-headerText"});e.textContent=this.Uct.fcTitleText,this.Cct.appendChild(e)}Ift(){const t=i(this.ampdoc.win.document,"a",{class:"aaf-already-bought",href:this.bft,target:"_blank",rel:"noopener noreferrer"});t.textContent=this.Uct.fcPromptText,this.jct=P(t,"click",(t=>{this.Qct(t)})),this.Cct.appendChild(t)}Tft(){var t,e;const n=i(this.ampdoc.win.document,"div",{class:"aaf-price-btn-div"});this.Cct.appendChild(n);const r=i(this.ampdoc.win.document,"div",{class:"aaf-article-price"});r.textContent=null===(t=this.Mct)||void 0===t||null===(e=t.price)||void 0===e?void 0:e.price,n.appendChild(r);const s=i(this.ampdoc.win.document,"div",{class:"aaf-btn-div"}),a=i(this.ampdoc.win.document,"button",{class:"aaf-purchase-button",style:"background:".concat(this.gft.primaryColor)});a.textContent=this.Uct.fcButtonText,this.yft=P(a,"click",(t=>{this.Qct(t)})),s.appendChild(a),n.appendChild(s)}Oft(){const t=i(this.ampdoc.win.document,"div",{class:"aaf-refRow"}),e=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.Uct.fcTermsRef,target:"_blank",rel:"noopener noreferrer"});e.textContent="Terms",t.appendChild(e),this.jft(t);const n=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.Uct.fcPrivacyRef,target:"_blank",rel:"noopener noreferrer"});n.textContent="Privacy",t.appendChild(n),this.jft(t);const r=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.Uct.fcContactUsRef,target:"_blank",rel:"noopener noreferrer"});return r.textContent="Contact Us",t.appendChild(r),this.jft(t),t}jft(t){const e=i(this.ampdoc.win.document,"span",{class:"aaf-partition-bar"});e.textContent="|",t.appendChild(e)}Qct(t){return t.preventDefault(),this.kR.buildUrl(this.bft,!1).then((t=>{this.kR.loginWithUrl(t)}))}}(t,e);return e.getAdapter().registerVendor(n),n}));var e}))})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-access-fewcents-0.1.mjs.map