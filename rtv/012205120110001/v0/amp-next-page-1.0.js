;
(self.AMP=self.AMP||[]).push({m:0,v:"2205120110001",n:"amp-next-page",ev:"1.0",l:!0,f:function(t,n){!function(){function n(t,i){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,i)}function i(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&n(t,i)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,e=r(t);if(n){var u=r(this).constructor;i=Reflect.construct(e,arguments,u)}else i=e.apply(this,arguments);return o(this,i)}}function s(t){return t?Array.prototype.slice.call(t):[]}var a=Array.isArray;function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}var h=Object.prototype,f=h.hasOwnProperty,l=h.toString;function v(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function p(t,n){return f.call(t,n)}function d(t,n){if("."==n)return t;for(var i,r=t,o=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return c(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,n):void 0}}(t))||t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n.split("."));!(i=o()).done;){var u=i.value;if(!(u&&r&&void 0!==r[u]&&"object"==e(r)&&p(r,u))){r=void 0;break}r=r[u]}return r}function m(t,n,i,r,e,o,u,s,a,c,h){return t}function g(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function b(t){return(t.ownerDocument||t).defaultView}var y,x=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function w(t,n,i,r,e){return e||(n?"ï¿½":r?t.slice(0,-1)+"\\"+t.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+t)}function k(t){return void 0!==y?y:y=function(t){try{var n=t.ownerDocument,i=n.createElement("div"),r=n.createElement("div");return i.appendChild(r),i.querySelector(":scope div")===r}catch(t){return!1}}(t)}function S(t,n){return t.replace(/^|,/g,"$&".concat(n," "))}function R(t){return String(t).replace(x,w)}function E(t){m(/^[\w-]+$/.test(t))}function j(t,n){var i=t.classList,r="i-amphtml-scoped";i.add(r);var e=S(n,".".concat(r)),o=t.querySelectorAll(e);return i.remove(r),o}function O(t,n){if(k(t))return t.querySelector(S(n,":scope"));var i=j(t,n)[0];return void 0===i?null:i}function P(t,n){return E(n),O(t,"> [".concat(n,"]"))}function I(t,n){return E(n),i=t,r="> ".concat(n),k(i)?i.querySelectorAll(S(r,":scope")):j(i,r);var i,r}function N(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function A(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function T(t,n){t.insertBefore(n,t.firstChild)}function C(t){if(Node.prototype.getRootNode)return t.getRootNode();var n,i;for(n=t;n.parentNode&&(!(i=n)||"I-AMPHTML-SHADOW-ROOT"!=i.tagName&&(11!=i.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(i)));n=n.parentNode);return n}var U=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function L(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function M(t){var n=(t||self).location;return function(t){var n,i=v();if(!t)return i;for(;n=U.exec(t);){var r=L(n[1],n[1]),e=n[2]?L(n[2].replace(/\+/g," "),n[2]):"";i[r]=e}return i}(n.originalHash||n.hash)}var z="";function $(t){var n;return z||(z=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"01".concat("2205120110001")),z}function D(t,n){var i=n||M(t);return["1","actions","amp","amp4ads","amp4email"].includes(i.development)||!!t.AMP_DEV_MODE}function _(t){if(!t)return null;var n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i),i=n?n[2]:void 0,r=n?n[3]:void 0;return i&&r?{extensionId:i,extensionVersion:r}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var V,Z=self.__AMP_LOG;function q(t,n){throw new Error("failed to call initLogConstructor")}function B(t){return Z.user||(Z.user=H()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(Z.user.win,t)?Z.userForEmbed||(Z.userForEmbed=H()):Z.user}function H(t){return q()}function J(){return Z.dev||(Z.dev=q())}function W(t,n,i,r,e,o,u,s,a,c,h){return t}function Y(t,n,i,r,e,o,u,s,a,c,h){return B().assert(t,n,i,r,e,o,u,s,a,c,h)}function F(){return V||(V=Promise.resolve(void 0))}var K=function(){var t=this;this.promise=new Promise((function(n,i){t.resolve=n,t.reject=i}))};function G(t,n){return rt(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function Q(t,n){return rt(it(nt(t)),n)}function X(t,n){var i=it(nt(t));return at(i,n)?rt(i,n):null}function tt(t,n){return et(it(t),n)}function nt(t){return t.nodeType?(n=b(t),G(n,"ampdoc")).getAmpDoc(t):t;var n}function it(t){var n=nt(t);return n.isSingleDoc()?n.win:n}function rt(t,n){W(at(t,n));var i=ot(t)[n];return i.obj||(W(i.ctor),W(i.context),i.obj=new i.ctor(i.context),W(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function et(t,n){var i=ot(t)[n];return i?i.promise?i.promise:(rt(t,n),i.promise=Promise.resolve(i.obj)):null}function ot(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function ut(t){return"function"==typeof t.dispose}function st(t,n){if(ut(n))try{(function(t){return W(ut(t)),t})(n).dispose()}catch(n){J().error("SERVICE","failed to dispose service",t,n)}}function at(t,n){var i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}function ct(t,n,i,r){var e=tt(t,n);if(e)return e;var o=nt(t);return o.whenExtensionsKnown().then((function(){var t=o.getExtensionVersion(i);return t?G(o.win,"extensions").waitForExtension(i,t):null})).then((function(i){return i?r?tt(t,n):function(t,n){return function(t,n){var i=et(t,n);if(i)return i;var r,e,o,u,s=ot(t);return s[n]=(e=(r=new K).promise,o=r.reject,u=r.resolve,e.catch((function(){})),{obj:null,promise:e,resolve:u,reject:o,context:null,ctor:null}),s[n].promise}(it(t),n)}(t,n):null}))}var ht,ft,lt=function(t){return ct(t,"amp-analytics-instrumentation","amp-analytics")},vt=function(t){return G(t,"batched-xhr")},pt=function(t){return function(t,n,i){var r=X(t,n);return r?Promise.resolve(r):ct(t,n,"amp-bind")}(t,"bind")},dt=function(t){return Q(t,"mutator")},mt=function(t){return Q(t,"viewer")},gt=function(t){return G(t,"vsync")},bt=function(t){return Q(t,"viewport")},yt=function(t){return G(t,"xhr")},xt="prerender",wt="visible",kt="hidden";function St(t){var n=t.ownerDocument||t;return ht&&ht.ownerDocument===n||(ht=n.createElement("div")),Rt}function Rt(t){return function(t,n){m(1===n.length),t.innerHTML=n[0];var i=t.firstElementChild;return m(i),m(!i.nextElementSibling),t.removeChild(i),i}(ht,t)}var Et=["Webkit","webkit","Moz","moz","ms","O","o"];function jt(t,n,i,r,e){var o=function(t,n,i){if(n.startsWith("--"))return n;ft||(ft=v());var r=ft[n];if(!r||i){if(r=n,void 0===t[n]){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(var i=0;i<Et.length;i++){var r=Et[i]+n;if(void 0!==t[r])return r}return""}(t,e);void 0!==t[o]&&(r=o)}i||(ft[n]=r)}return r}(t.style,n,e);if(o){var u,s=r?i+r:i;t.style.setProperty((u=o.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),Et.some((function(t){return u.startsWith(t+"-")}))?"-".concat(u):u),s)}}function Ot(t,n){void 0===n&&(n=t.hasAttribute("hidden")),n?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function Pt(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];lt(t).then((function(e){e&&e.triggerEventForTarget(t,n,i,r)}))}function It(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,n,i){return n&&It(t.prototype,n),i&&It(t,i),t}var At="inside",Tt="top",Ct="bottom";function Ut(t,n){return!(!t||!n)&&t.left==n.left&&t.top==n.top&&t.width==n.width&&t.height==n.height}var Lt,Mt,zt=function(){function t(t,n,i,r){this.element=n,this.Te=r,this.fidelity=i,this.turn=0==i?Math.floor(4*Math.random()):0,this.BO=null,this.bo=bt(t)}var n=t.prototype;return n.Ee=function(t){var n=this.BO;if(!(n&&Ut(n.positionRect,t.positionRect)&&Ut(n.viewportRect,t.viewportRect))){W(t.positionRect);var i,r,e=t.positionRect;t.relativePos=(i=e,r=t.viewportRect,i.top<r.top?Tt:i.bottom>r.bottom?Ct:At),function(t,n){return t.top<=n.bottom&&n.top<=t.bottom&&t.left<=n.right&&n.left<=t.right}(e,t.viewportRect)?(this.BO=t,this.Te(t)):this.BO&&(this.BO=null,t.positionRect=null,this.Te(t))}},n.update=function(t){var n=this;if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}var i,r,e=this.bo.getSize(),o={left:0,top:0,width:i=e.width,height:r=e.height,bottom:0+r,right:0+i,x:0,y:0};this.bo.getClientRectAsync(this.element).then((function(t){n.Ee({positionRect:t,viewportRect:o,relativePos:null})}))},t}(),$t=function(){function t(t){var n=this;this.Bi=t,this.t=t.win,this.$O=[],this.yo=gt(this.t),this.bo=bt(t),this.yw=[],this.DO=!1,this.zO=!1,this.LO=!1,this.GO=function(t,n,i){var r=0,e=0,o=null;function u(){r=0;var i,s=500-(t.Date.now()-e);s>0?r=t.setTimeout(u,s):(i=o,o=null,n.apply(null,i))}return function(){e=t.Date.now();for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];o=i,r||(r=t.setTimeout(u,500))}}(this.t,(function(){n.DO=!1}))}var n=t.prototype;return n.observe=function(t,n,i){var r=this,e=new zt(this.Bi,t,n,i);return this.$O.push(e),this.LO||this.HO(),e.update(),function(){for(var t=0;t<r.$O.length;t++)if(r.$O[t]==e)return void r.JO(t)}},n.unobserve=function(t){for(var n=0;n<this.$O.length;n++)if(this.$O[n].element==t)return void this.JO(n);J().error("POSITION_OBSERVER","cannot unobserve unobserved element")},n.JO=function(t){this.$O.splice(t,1),0==this.$O.length&&this.KO()},n.HO=function(){var t=this;this.LO=!0,this.yw.push(this.bo.onScroll((function(){t.QO()}))),this.yw.push(this.bo.onResize((function(){t.UO()})))},n.KO=function(){for(this.LO=!1;this.yw.length;)this.yw.pop()()},n.updateAllEntries=function(t){for(var n=0;n<this.$O.length;n++)this.$O[n].update(t)},n.QO=function(){this.GO(),this.DO=!0,this.zO||this.WO()},n.UO=function(){this.updateAllEntries(!0)},n.WO=function(){var t=this;this.updateAllEntries(),this.zO=!0,this.DO?this.yo.measure((function(){t.WO()})):this.zO=!1},t}(),Dt=function(){function t(t,n){this.qi=t,this.tct=null,this.nct=null,this.callback=n}var n=t.prototype;return n.observe=function(t,n){var i=this,r=t.ownerDocument.createElement("div");r.classList.add("i-amphtml-next-page-document-top-sentinel");var e=t.ownerDocument.createElement("div");e.classList.add("i-amphtml-next-page-document-bottom-sentinel"),n.insertBefore(r,t),n.insertBefore(e,t.nextSibling),this.qi.getPositionObserver().observe(r,0,(function(t){return i.ict(t)})),this.qi.getPositionObserver().observe(e,0,(function(t){return i.rct(t)}))},n.ict=function(t){this.tct=t.relativePos,this.qi.updateRelativePos(this)},n.rct=function(t){this.nct=t.relativePos,this.qi.updateRelativePos(this)},n.usesSentinel=function(){return!0},Nt(t,[{key:"top",get:function(){return this.tct}},{key:"bottom",get:function(){return this.nct}}]),t}(),_t=function(t){i(r,t);var n=u(r);function r(t,i,r){var e;return(e=n.call(this,t,i)).ect=r,e}return r.prototype.usesSentinel=function(){return!1},Nt(r,[{key:"nextPageEl",get:function(){return this.ect}}]),r}(Dt),Vt=function(){function t(t){this.Bi=t,this.Py=[],this.gA=0,this.Dz=-1,this.oct=null,this.bo=bt(t),this.uct=0,this.sct=!1,this.dh=dt(t);var n=function(t,n,i){var r=0,e=null;function o(i){e=null,r=t.setTimeout(u,200),n.apply(null,i)}function u(){r=0,e&&o(e)}return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r?e=n:o(n)}}(t.win,this.Kz.bind(this));this.bo.onScroll(n.bind(this)),this.bo.onResize(n.bind(this)),this.Kz()}var n=t.prototype;return n.Kz=function(){var t=this;this.sct||(this.sct=!0,this.dh.measureElement((function(){t.uct=t.bo.getHeight();var n=t.bo.getScrollTop(),i=n-t.gA;if(!(Math.abs(i)<20)){var r=i>0?-1:1;t.Py.forEach((function(n){n.usesSentinel()&&t.oct===r||t.updateRelativePos(n)})),t.gA=n,t.oct=t.Dz,t.Dz=r}})).then((function(){t.sct=!1})))},n.isScrollingUp=function(){return 1===this.Dz},n.isScrollingDown=function(){return-1===this.Dz},n.observe=function(t,n,i){var r=new Dt(this,i);this.Py.push(r),r.observe(t,n)},n.observeHost=function(t,n){var i=new _t(this,n,t);this.Py.push(i)},n.getPositionObserver=function(){return t=this.Bi,n="position-observer",i=$t,function(t,n,i,r,e,o){var u=ot(t),s=u[i];s||(s=u[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),s.ctor||(s.ctor=r,s.context=n,s.sharedInstance=!1,s.resolve&&rt(t,i))}(it(r=nt(t)),r,n,i),Q(this.Bi.getHeadNode(),"position-observer");var t,n,i,r},n.updateRelativePos=function(t){var n=t.usesSentinel()?this.getRelativePosFromSentinel(t):this.getRelativePosFromScroll(t);n&&t.callback(W(n))},n.getRelativePosFromScroll=function(t){var n=this.gA,i=this.uct,r=t.nextPageEl.getLayoutBox().top;return n<r-i?5:n<r&&r<=i&&n<=0?1:n<r?this.isScrollingDown()?3:4:2},n.getRelativePosFromSentinel=function(t){var n=t.bottom,i=t.top;return i||n?i===At&&n===At?1:i&&i!==Tt||n&&n!==Ct?(i&&i!==Tt||n!==Tt)&&(i!==Ct||n&&n!==Ct)?!(i!==Tt&&i!==At||n&&n!==Ct)==!!this.isScrollingUp()?3:4:2:5:null},Nt(t,[{key:"mutator",get:function(){return this.dh}}]),t}(),Zt="amp-next-page-hidden",qt=function(){function t(t,n){this.Jy=t,this.sz=n.title,this.ci=n.url,this.act=n.url,this.OX=n.image,this.cct=null,this.ft=null,this.tU=null,this.Ti=1,this.J=xt,this.hct=2}var n=t.prototype;return n.is=function(t){return this.Ti===t},n.isLoaded=function(){return 3===this.Ti||5===this.Ti||6===this.Ti},n.isVisible=function(){return this.isLoaded()&&this.J===wt},n.setVisibility=function(t){this.isLoaded()&&t!=this.J&&(this.is(6)&&t===wt&&this.resume(),this.J=t,this.cct&&(this.cct.setVisibilityState(t),this.cct.ampdoc.getBody().classList.toggle("amp-next-page-visible",this.isVisible()),this.cct.ampdoc.getBody().classList.toggle(Zt,!this.isVisible())))},n.pause=function(){var t=this;return this.cct?this.cct.close().then((function(){return t.Jy.closeDocument(t).then((function(){t.cct=null,t.J=kt,t.Ti=6}))})):F()},n.resume=function(){return this.fct()},n.fetch=function(){var t=this;return 5===this.Ti||2===this.Ti||3===this.Ti||4===this.Ti?F():(this.Ti=2,this.Jy.fetchPageDocument(this).then((function(n){return t.Ti=3,t.tU=n,t.ft=t.Jy.createDocumentContainerForPage(t),t.fct()})).catch((function(){t.Ti=4})))},n.fct=function(){var t=this;return this.Jy.attachDocumentToPage(this,W(this.tU),this.is(6)).then((function(n){n?(t.Ti=5,t.cct=n,t.is(6)||t.Jy.setLastFetchedPage(t)):t.Ti=4}))},Nt(t,[{key:"url",get:function(){return this.ci},set:function(t){this.ci=t}},{key:"initialUrl",get:function(){return this.act}},{key:"image",get:function(){return this.OX}},{key:"title",get:function(){return this.sz}},{key:"relativePos",get:function(){return this.hct},set:function(t){this.hct=t}},{key:"document",get:function(){if(this.cct)return this.cct.ampdoc.getRootNode()}},{key:"container",get:function(){return this.ft}},{key:"shadowDoc",get:function(){return this.cct}}]),t}(),Bt=function(t){i(r,t);var n=u(r);function r(t,i,r,e,o){var u;return(u=n.call(this,t,i)).Ti=r,u.J=e,u.Vf=o,u}return Nt(r,[{key:"document",get:function(){return this.Vf}}]),r}(qt),Ht=function(){function t(t){this.pi=t,this.bi=0,this.gi=0,this.yi=v()}var n=t.prototype;return n.has=function(t){return!!this.yi[t]},n.get=function(t){var n=this.yi[t];if(n)return n.access=++this.gi,n.payload},n.put=function(t,n){this.has(t)||this.bi++,this.yi[t]={payload:n,access:this.gi},this.wi()},n.wi=function(){if(!(this.bi<=this.pi)){var t,n=this.yi,i=this.gi+1;for(var r in n){var e=n[r].access;e<i&&(i=e,t=r)}void 0!==t&&(delete n[t],this.bi--)}},t}(),Jt=function(){return self.AMP.config.urls}(),Wt=new Set(["c","v","a","ad"]),Yt=function(t){return"string"==typeof t?Ft(t):t};function Ft(t,n){return Lt||(Lt=self.document.createElement("a"),Mt=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new Ht(100))),function(t,n,i){if(i&&i.has(n))return i.get(n);t.href=n,t.protocol||(t.href=t.href);var r,e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),r=t.origin&&"null"!=t.origin?t.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,e.origin=r;var o=e;return i&&i.put(n,o),o}(Lt,t,n?null:Mt)}function Kt(t){return"https:"==(t=Yt(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(i=".localhost",(r=(n=t.hostname).length-i.length)>=0&&n.indexOf(i,r)==r);var n,i,r}function Gt(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";return Y(null!=t,"%s %s must be available",n,i),Y(Kt(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,i,t),t}function Qt(t){if(!function(t){return Jt.cdnProxyRegex.test(Yt(t).origin)}(t=Yt(t)))return t.href;var n=t.pathname.split("/"),i=n[1];Y(Wt.has(i),"Unknown path prefix in url %s",t.href);var r=n[2],e="s"==r?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(r);return Y(e.indexOf(".")>0,"Expected a . in origin %s",e),n.splice(1,"s"==r?3:2),e+n.join("/")+function(t,n){if(!t||"?"==t)return"";var i=new RegExp("[?&]".concat("(amp_(js[^&=]*|gsa|r|kit)|usqp)","\\b[^&]*"),"g"),r=t.replace(i,"").replace(/^[?&]/,"");return r?"?"+r:""}(t.search)+(t.hash||"")}function Xt(t){return Ft(Qt(t)).origin}function tn(t,n){var i=Ft(t),r=Ft(n).origin,e=Xt(n);return Y(i.origin===r||i.origin===e,"Invalid page URL supplied to amp-next-page, pages must be from the same origin as the current document"),i}var nn='.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/';function rn(t,n,i,r){var e=function(t){return X(t,"url-replace")}(t);return(i>=1?e.expandUrlAsync(n):Promise.resolve(n)).then((function(n){if(1===i){var o=e.collectDisallowedVarsSync(t);if(o.length>0)throw B().createError("URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. "+'Please add data-amp-replace="'.concat(o.join(" "),'" to the ')+"<".concat(t.tagName,"> element. See https://bit.ly/amp-var-subs."))}var u={};return t.hasAttribute("credentials")&&(u.credentials=t.getAttribute("credentials")),r&&(u.cache="reload"),{"xhrUrl":n,"fetchOpt":u}}))}var en,on,un="render-start",sn="none";function an(){return void 0===on&&(on=hn()!=sn&&(cn(Element.prototype.attachShadow)||cn(Element.prototype.createShadowRoot))),on}function cn(t){return!!t&&-1!=t.toString().indexOf("[native code]")}function hn(t){return void 0===en&&(n=t||Element,en=n.prototype.attachShadow?"v1":n.prototype.createShadowRoot?"v0":sn),en;var n}function fn(t,n,i){var r="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)r+=function(t,n,i){var r=[];return t.split(",").forEach((function(t){t=t.trim(),i&&(t=i(t)),function(t,n){var i=function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+pn,"m")}(n);return!t.match(i)}(t,n)&&(t=function(t,n){return function(t,n){return t.match(mn)?(t=t.replace(dn,n)).replace(mn,n+" "):n+" "+t}(t,n)}(t,n)),r.push(t)})),r.join(", ")}(t.selectorText,n,i)+" {\n\t",r+=function(t){var n=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(n=n.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var i=t.style;for(var r in i)"initial"===i[r]&&(n+=r+": initial; ");return n}(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)r+="@media "+t.media.mediaText+" {\n",r+=fn(t.cssRules,n),r+="\n}\n\n";else try{t.cssText&&(r+=t.cssText+"\n\n")}catch(t){}})),r}var ln="-shadowcsshost",vn=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",pn=(new RegExp("("+ln+vn,"gim"),new RegExp("(-shadowcsscontext"+vn,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),dn=ln+"-no-combinator",mn=new RegExp(ln,"gim");function gn(t,n,i,r,e){var o=t.getHeadNode(),u=function(t,n,i,r){var e=t.__AMP_CSS_SM;e||(e=t.__AMP_CSS_SM=v());var o=!i&&r&&"amp-custom"!=r&&"amp-keyframes"!=r,u=i?"amp-runtime":o?"amp-extension=".concat(r):null;if(u){var s=bn(t,e,u);if(s)return"STYLE"==s.tagName&&s.textContent!==n&&(s.textContent=n),s}var a=(t.ownerDocument||t).createElement("style");a.textContent=n;var c=null;return i?a.setAttribute("amp-runtime",""):o?(a.setAttribute("amp-extension",r||""),c=bn(t,e,"amp-runtime")):(r&&a.setAttribute(r,""),c=t.lastChild),function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i){var r=i.nextSibling;t.insertBefore(n,r)}else T(t,n)}(t,a,c),u&&(e[u]=a),a}(o,function(t,n){var i=t.__AMP_CSS_TR;return i?i(n):n}(o,n),r||!1,e||null);if(i){var s=t.getRootNode();if(yn(s,u))return i(u),u;var a=setInterval((function(){yn(s,u)&&(clearInterval(a),i(u))}),4)}return u}function bn(t,n,i){if(n[i])return n[i];var r=t.querySelector("style[".concat(i,"], link[").concat(i,"]"));return r?(n[i]=r,r):null}function yn(t,n){for(var i=t.styleSheets,r=0;r<i.length;r++)if(i[r].ownerNode==n)return!0;return!1}new RegExp("-shadowcsscontext","gim");var xn=function(){function t(t){this.hl=t.document.implementation.createHTMLDocument(""),this.hl.open(),this.yo=gt(t),this.al=this.cl.bind(this),this.fl=null,this.ll=null,this.vl=null,this.dl=!1,this.ml=F(),this.pl=!1,this.bl=null}var n=t.prototype;return n.onBody=function(t){this.fl=t},n.onBodyChunk=function(t){this.ll=t},n.onEnd=function(t){this.vl=t},n.write=function(t){if(this.pl)throw new Error("closed already");return t&&this.hl.write(t),this.Er(),this.ml},n.close=function(){return this.hl.close(),this.pl=!0,this.Er(),this.ml},n.abort=function(t){throw new Error("Not implemented")},n.releaseLock=function(){throw new Error("Not implemented")},n.Er=function(){m(this.fl&&this.ll&&this.vl),this.dl||(this.dl=!0,this.yo.mutate(this.al))},n.cl=function(){if(this.dl=!1,!this.bl&&this.hl.body&&(this.bl=this.fl(this.hl)),this.bl){var t=this.hl.body,n=m(this.bl),i=0;for(kn(t);t.firstChild;)i++,n.appendChild(t.firstChild);i>0&&this.ll()}this.pl&&this.vl()},Nt(t,[{key:"closed",get:function(){throw new Error("Not implemented")}},{key:"desiredSize",get:function(){throw new Error("Not implemented")}},{key:"ready",get:function(){throw new Error("Not implemented")}}]),t}(),wn=function(){function t(t){this.gl=[],this.yo=gt(t),this.fl=null,this.ll=null,this.vl=null,this.ml=F(),this.pl=!1}var n=t.prototype;return n.onBody=function(t){this.fl=t},n.onBodyChunk=function(t){this.ll=t},n.onEnd=function(t){this.vl=t},n.write=function(t){if(m(this.fl&&this.ll&&this.vl),this.pl)throw new Error("closed already");return t&&this.gl.push(t),this.ml},n.close=function(){var t=this;return m(this.fl&&this.ll&&this.vl),this.pl=!0,this.yo.mutate((function(){return t.wc()})),this.ml},n.abort=function(t){throw new Error("Not implemented")},n.releaseLock=function(){throw new Error("Not implemented")},n.wc=function(){var t=this.gl.join(""),n=(new DOMParser).parseFromString(t,"text/html");if(n.body){var i=n.body,r=this.fl(n),e=0;for(kn(i);i.firstChild;)e++,r.appendChild(i.firstChild);e>0&&this.ll()}this.vl()},Nt(t,[{key:"closed",get:function(){throw new Error("Not implemented")}},{key:"desiredSize",get:function(){throw new Error("Not implemented")}},{key:"ready",get:function(){throw new Error("Not implemented")}}]),t}();function kn(t){I(t,"noscript").forEach(N)}var Sn,Rn=/[^\.\-\_0-9a-zA-Z]/,En=/[^\-\_0-9a-zA-Z]/;function jn(t,n,i){var r,e,o=t.ownerDocument;if(an())r=o.importNode(n,i);else{"block",e=(r=o.createElement("amp-body")).style,m(!0),m(!e.display),e.display="block";for(var u=0;u<n.attributes.length;u++)r.setAttribute(n.attributes[0].name,n.attributes[0].value);if(i)for(var s=n.firstChild;s;s=s.nextSibling)r.appendChild(o.importNode(s,!0))}jt(r,"position","relative");var a=t.body;return a&&t.removeChild(a),t.appendChild(r),Object.defineProperty(t,"body",{configurable:!0,value:r}),r}function On(t){return t.replace(/(html|body)/g,Pn)}function Pn(t,n,i,r){var e=r.charAt(i-1),o=r.charAt(i+t.length);return e&&!Rn.test(e)||o&&!En.test(o)?t:"amp-"+t}function In(t,n){var i=t.createElement("style");i.textContent=n;try{return(t.head||t.documentElement).appendChild(i),i.sheet?i.sheet.cssRules:null}finally{i.parentNode&&i.parentNode.removeChild(i)}}var Nn="multidoc-manager",An=function(){function n(t,n,i,r){this.win=t,this.af=n,this.Jf=i,this.Pe=r,this.yl=[]}var i=n.prototype;return i.wl=function(n,i,r,e){var o=this;r=r||Object.create(null),this.Al(),jt(n,"visibility","hidden");var u=function(t){var n,i=b(t),r=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(r)return r.innerHTML="",r;var e,o=hn();if("v1"==o?(n=t.attachShadow({mode:"open"})).styleSheets||Object.defineProperty(n,"styleSheets",{get:function(){var t=[];return n.childNodes.forEach((function(n){"STYLE"===n.tagName&&t.push(n.sheet)})),t}}):n="v0"==o?t.createShadowRoot():function(t){var n=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");var i=n.createElement("style");i.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(i);var r=n.createElement("i-amphtml-shadow-root");return t.appendChild(r),t.__AMP_SHADOW_ROOT=r,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:r}),r.host=t,r.getElementById=function(t){var n=R(t);return r.querySelector("#".concat(n))},Object.defineProperty(r,"styleSheets",{get:function(){return n.styleSheets?s(n.styleSheets).filter((function(t){return r.contains(t.ownerNode)})):[]}}),r}(t),!an()){var u="i-amphtml-sd-".concat(i.Math.floor(1e4*i.Math.random()));n.id=u,n.host.classList.add(u),e=function(t){return function(t,n){return function(t,n){var i=W(t.id),r=t.ownerDocument,e=null;try{e=In(r.implementation.createHTMLDocument(""),n)}catch(t){}if(!e)try{e=In(r,n)}catch(t){}return e?fn(e,".".concat(i),On):n}(t,n)}(n,t)},n.__AMP_CSS_TR=e}return n}(n);u.AMP&&(B().warn(Nn,"Shadow doc wasn't previously closed"),this.xl(u));var c={};u.AMP=c,c.url=i;var h=Ft(i).origin,f=this.af.installShadowDoc(i,u,{params:r});c.ampdoc=f,J().fine(Nn,"Attach to shadow root:",u,f),gn(f,t.combinedCss,null,!0),t.installAmpdocServices(f);var v,p,d=mt(f);return c.setVisibilityState=function(t){f.overrideVisibilityState(t)},c.postMessage=d.receiveMessage.bind(d),c.onMessage=function(t){v=t},d.setMessageDeliverer((function(t,n,i){var r;return"broadcast"==t?(o.El(n,u),i?F():void 0):null===(r=v)||void 0===r?void 0:r(t,n,i)}),h),c.close=function(){return o.xl(u)},(p=self,p.__AMP_MODE?p.__AMP_MODE:p.__AMP_MODE=function(t){return{localDev:!1,development:D(t,M(t)),esm:!1,test:!1,rtvVersion:$(t)}}(p)).development&&(c.toggleRuntime=d.toggleRuntime.bind(d),c.resources=Q(f,"resources")),c.getState=function(t){return pt(u).then((function(n){return n?n.getState(t):Promise.reject("amp-bind is not available in this document")}))},c.setState=function(t){return pt(u).then((function(n){return n?"string"==typeof t?n.setStateWithExpression(t,{}):(i=t,"[object Object]"===l.call(i)||a(t)?n.setStateWithObject(t):Promise.reject("Invalid state")):Promise.reject("amp-bind is not available in this document");var i}))},e(c,u,f).then((function(){f.setReady(),f.signals().signal(un),jt(n,"visibility","visible")})),this.yl.includes(u)||this.yl.push(u),J().fine(Nn,"Shadow root initialization is done:",u,f),c},i.attachShadowDoc=function(t,n,i,r){var e=this;return B().assertString(i),J().fine(Nn,"Attach shadow doc:",n),this.wl(t,i,r,(function(i,r,o){if(e.Ol(o,r,n),n.body){var u=jn(r,n.body,!0);u.classList.add("amp-shadow"),o.setBody(u)}return setTimeout((function(){o.signals().signal(un),jt(t,"visibility","visible")}),50),F()}))},i.attachShadowDocAsStream=function(t,n,i){var r=this;return B().assertString(n),J().fine(Nn,"Attach shadow doc as stream"),this.wl(t,n,i,(function(n,i,e){var o,u=!1,s=function(t){return void 0===Sn&&(Sn=function(t){return!(!t.document.implementation||"function"!=typeof t.document.implementation.createHTMLDocument||(n=t,G(n,"platform")).isFirefox());var n}(t)),Sn}(o=r.win)?new xn(o):new wn(o);return n.writer=s,s.onBody((function(t){r.Ol(e,i,t);var n=jn(i,t.body,!1);return n.classList.add("amp-shadow"),e.setBody(n),n})),s.onBodyChunk((function(){u||(u=!0,setTimeout((function(){e.signals().signal(un),jt(t,"visibility","visible")}),50))})),new Promise((function(t){s.onEnd((function(){t(),n.writer=null}))}))}))},i.Ol=function(t,n,i){if(i.head){n.AMP.head=i.head;for(var r={},e=I(this.win.document.head,"link"),o=0;o<e.length;o++){var u=e[o].getAttribute("href");u&&(r[u]=!0)}for(var s=i.head.firstElementChild;s;s=s.nextElementSibling){var a=s.tagName,c=s.getAttribute("name"),h=s.getAttribute("rel");switch(a){case"TITLE":n.AMP.title=s.textContent,J().fine(Nn,"- set title: ",n.AMP.title);break;case"META":s.hasAttribute("charset")||"viewport"==c||(c?t.setMetaByName(c,s.getAttribute("content")||""):J().warn(Nn,"meta ignored: ",s));break;case"LINK":var f=s.getAttribute("href");if("canonical"==h)n.AMP.canonicalUrl=f,J().fine(Nn,"- set canonical: ",n.AMP.canonicalUrl);else if("stylesheet"==h)if(r[f])J().fine(Nn,"- stylesheet already included: ",f),gn(t,'@import "'.concat(f,'"'),null,!1);else{r[f]=!0;var l=this.win.document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),l.setAttribute("href",f),this.win.document.head.appendChild(l),J().fine(Nn,"- import font to parent: ",f,l)}else J().fine(Nn,"- ignore link rel=",h);break;case"STYLE":s.hasAttribute("amp-boilerplate")?J().fine(Nn,"- ignore boilerplate style: ",s):s.hasAttribute("amp-custom")?(gn(t,s.textContent,null,!1,"amp-custom"),J().fine(Nn,"- import style: ",s)):s.hasAttribute("amp-keyframes")&&(gn(t,s.textContent,null,!1,"amp-keyframes"),J().fine(Nn,"- import style: ",s));break;case"SCRIPT":if(s.hasAttribute("src")){J().fine(Nn,"- src script: ",s);var v=s.getAttribute("src"),p=_(v),d=s.getAttribute("custom-element"),m=s.getAttribute("custom-template"),g=d||m;p?g?this.Jf.installExtensionForDoc(t,g,p.extensionVersion):s.hasAttribute("data-amp-report-test")||B().error(Nn,"- unknown script: ",s,v):J().fine(Nn,"- ignore runtime script: ",v)}else-1==(s.getAttribute("type")||"application/javascript").indexOf("javascript")?(n.appendChild(this.win.document.importNode(s,!0)),J().fine(Nn,"- non-src script: ",s)):s.hasAttribute("amp-onerror")||B().error(Nn,"- unallowed inline javascript: ",s);break;case"NOSCRIPT":break;default:B().error(Nn,"- UNKNOWN head element:",s)}}}t.setExtensionsKnown()},i.El=function(t,n){var i=this;this.Al(),this.yl.forEach((function(r){if(r!=n){var e=mt(r.AMP.ampdoc);i.Pe.delay((function(){e.receiveMessage("broadcast",t,!1)}),0)}}))},i.xl=function(t){this.Pl(t);var n=t.AMP;delete t.AMP;var i=n.ampdoc;return i.overrideVisibilityState("inactive"),function(t){!function(t){var n=ot(t),i=function(t){if(!Object.prototype.hasOwnProperty.call(n,t))return"continue";var i=n[t];if(i.sharedInstance)return"continue";i.obj?st(t,i.obj):i.promise&&i.promise.then((function(n){return st(t,n)}))};for(var r in n)i(r)}(t)}(i),this.Pe.timeoutPromise(15,new this.win.Promise((function(t){tt(i,"resources").then((function(n){n?n.onNextPass(t):t()}))})),"Timeout reached waiting for visibility state change callback").catch((function(t){B().info(Nn,t)}))},i.Pl=function(t){var n=this.yl.indexOf(t);-1!=n&&this.yl.splice(n,1)},i.Tl=function(t){var n=this;this.Pe.delay((function(){n.xl(t)}),0)},i.Al=function(){var t=this;this.yl.forEach((function(n){n.host&&function(t){var n=t.isConnected;if(void 0!==n)return n;for(var i=t;(i=C(i)).host;)i=i.host;return i.nodeType===Node.DOCUMENT_NODE}(n.host)||(B().warn(Nn,"Shadow doc wasn't previously closed"),t.Pl(n),t.Tl(n))}))},n}(),Tn=['<div class=amp-next-page-separator aria-label="Next article separator" tabindex=0></div>'],Cn=['<div class=amp-next-page-links aria-label="Read more articles"></div>'],Un=["<a class=amp-next-page-link><img ref=image class=amp-next-page-image> <span ref=title class=amp-next-page-text></span></a>"],Ln="amp-next-page",Mn="i-amphtml-next-page-document",zn="i-amphtml-next-page-shadow-root",$n="i-amphtml-next-page-placeholder",Dn=function(){return F()},_n=function(){function t(t){var n=this;this.Bi=t,this.t=t.win,this.tp=this.t.document,this.bo=bt(t),this.Ze=mt(t),this.dh=dt(t),this.ty=Q(t,"templates"),this.lct=null,this.vct=null,this.pct=Dn,this.dct=!1,this.mct=null,this.gct=null,this.bct=null,this.yct=null,this.lo=null,this.UE=null,this.ort,this.xct=null,this.wct=null,this.kct=null,this.Sct={},this.Rct=!1,this.Ect=1/0,this.jct=null,this.mi=null,this.ai=new Promise((function(t){n.mi=t}))}var n=t.prototype;return n.isBuilt=function(){return!!this.ort},n.build=function(t){var n=this;if(this.isBuilt())return F();this.Bi.getBody().lastElementChild!==t&&B().warn(Ln,"should be the last element in the body of the document, a footer element can be added as a child of <amp-next-page> if it has the `footer` attribute"),this.gct=t,this.jct=this.Oct().getAttribute("src"),this.Rct=this.Oct().hasAttribute("deep-parsing")?"false"!==this.Oct().getAttribute("deep-parsing"):!this.jct,this.Ect=this.Oct().hasAttribute("max-pages")?parseInt(this.Oct().getAttribute("max-pages"),10):1/0,this.lct=this.Pct(t),this.vct=this.Ict(t),this.wct=this.createHostPage(),this.kct=this.wct,this.toggleHiddenAndReplaceableElements(this.tp),T(this.gct,this.vct),this.lo=Q(this.Bi,"history"),this.UE=Q(this.Bi,"navigation"),this.yct=new An(this.t,G(this.t,"ampdoc"),function(t){return G(t,"extensions")}(this.t),rt(this.t,"timer")),this.bct=new Vt(this.Bi),this.ai.then((function(){n.bct.observeHost(n.Oct(),(function(t){n.wct.relativePos=t,n.updateVisibility()}))})),this.ort||(this.ort=[this.wct],this.setLastFetchedPage(this.wct));var i=function(){n.pct(),n.mi()};return this.Nct().then((function(){return n.Act()})).then(i,i),this.Oct().classList.add("i-amphtml-next-page"),this.ai},n.Nct=function(){var t=this;return new Promise((function(n){if(0!=t.bo.getScrollTop())return n();var i=t.bo.onScroll((function(){n(),i()}))}))},n.Oct=function(){return this.gct},n.maybeFetchNext=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.ort.filter((function(t){return!t.is(1)})).length>this.Ect,r=this.ort.some((function(t){return t.is(2)})),e=this.Tct()>3&&!n;if(this.dct||r||e||i)return F();var o=this.ort.length,u=this.ort[this.Cct(this.xct)+1];return u?u.fetch().then((function(){u.is(4)&&t.setLastFetchedPage(u)})).then((function(){return t.pct()}),(function(n){return t.pct().then((function(){throw n}))})):this.Uct().then((function(n){return t.Lct(n)})).then((function(){return t.ort.length<=o?(t.dct=!0,t.pct()):t.maybeFetchNext(!0)}))},n.updateVisibility=function(){var t=this;this.ort.forEach((function(n,i){2===n.relativePos?n.isVisible()&&n.setVisibility(kt):3!==n.relativePos&&(n.isVisible()||n.setVisibility(wt),t.Mct(i),t.zct(i))})),this.ort.some((function(t){return t.isVisible()}))||this.wct.setVisibility(wt),this.ort.filter((function(t){return t.isVisible()})).forEach((function(n){return t.toggleHiddenAndReplaceableElements(W(n.document))}));var n=function(t,n){for(var i=0;i<t.length;i++)if(t[i].isVisible())return i;return-1}(this.ort),i=this.ort[n]||null;i&&this.kct!==i&&this.setTitlePage(i),this.maybeFetchNext()},n.Mct=function(t,n){var i=void 0===n?5:n;this.bct.isScrollingDown()&&this.wct.isVisible()&&this.wct.setVisibility(kt);var r=this.bct.isScrollingDown()?this.ort.slice(1,t).reverse():this.ort.slice(t+1);return Promise.all(r.filter((function(t){return 2===t.relativePos})).map((function(t,n){if(t.isVisible()&&t.setVisibility(kt),n>=i)return t.pause()})))},n.zct=function(t,n){var i=void 0===n?5:n,r=this.ort.slice(1).slice(Math.max(0,t-i-1),Math.min(this.ort.length,t+i+1)).filter((function(t){return t.is(6)}));return Promise.all(r.map((function(t){return t.resume()})))},n.setLastFetchedPage=function(t){this.xct=t},n.setTitlePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.wct;if(t){var n=t.title,i=t.url;this.tp.title=n,this.lo.replace({title:n,url:i}),this.kct=t,Pt(this.Oct(),"amp-next-page-scroll",{"title":n,"url":i},!1)}else J().warn(Ln,"setTitlePage called before next-page-service is built")},n.createHostPage=function(){var t,n,i,r=this.tp,e=r.location,o=r.title,u=e.href,s=function(t){var n=t.querySelector('script[type="application/ld+json"]');if(n){var i=g(n.textContent);if(i&&i.image)return"string"==typeof i.image?i.image:i.image["@list"]&&"string"==typeof i.image["@list"][0]?i.image["@list"][0]:"string"==typeof i.image.url?i.image.url:"string"==typeof i.image[0]?i.image[0]:void 0}}(this.tp)||((t=this.tp.querySelector('meta[property="og:image"]'))?t.getAttribute("content"):void 0)||(n=this.tp,(i=n.querySelector('link[rel="shortcut icon"]')||n.querySelector('link[rel="icon"]'))?i.getAttribute("href"):void 0)||"";return new Bt(this,{url:u,title:o||"",image:s},5,wt,this.tp)},n.createDocumentContainerForPage=function(t){var n=this,i=this.tp.createElement("div");i.classList.add("i-amphtml-next-page-document-container"),this.gct.insertBefore(i,this.vct);var r=this.tp.createElement("div");return r.classList.add(zn),i.appendChild(r),this.bct.observe(r,i,(function(i){t.relativePos=i,n.updateVisibility()})),i},n.$ct=function(){return this.Ze.hasCapability("cid")?"cid":null},n.attachDocumentToPage=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.Tct()<1&&!i)return Promise.resolve(null);var r=t.container,e=O(r,"> .".concat(R(zn)));if(!e){W(t.is(6));var o=O(r,"> .".concat(R($n)));(e=this.tp.createElement("div")).classList.add(zn),r.replaceChild(e,o)}this.sanitizeDoc(n);try{var u=this.yct.attachShadowDoc(e,n,t.url,{visibilityState:xt,cap:this.$ct()}),s=this.Ze.maybeGetMessageDeliverer();s&&u.onMessage((function(t,n,i){if("documentHeight"!==t&&"scroll"!==t&&"viewport"!==t)return s(t,n,i)}));var a=W(u.ampdoc);gn(a,nn,null,!1,Ln);var c=a.getBody();c.classList.add(Mn);var h=this.lct.cloneNode(!0);T(r,h);var f=this.Dct(h,t);return f.then((function(){return u}))}catch(t){return J().error(Ln,"failed to attach shadow document for page",t),Promise.resolve(null)}},n.closeDocument=function(t){if(t.is(6))return F();var n=t.container,i=O(n,"> .".concat(R(zn))),r=this.tp.createElement("div");r.classList.add($n);var e=0,o=0;return this.dh.measureMutateElement(i,(function(){e=i.offsetHeight,o=i.offsetWidth}),(function(){!function(t,n){for(var i in n)jt(t,i,n[i])}(r,{"height":"".concat(e,"px"),"width":"".concat(o,"px")}),n.replaceChild(r,i)}))},n.sanitizeDoc=function(t){var n=this;s(t.querySelectorAll("amp-next-page")).forEach((function(t){if(n.Rct){var i=n._ct(t);n.Vct(i)}N(t)})),t.body.classList.add(Zt),this.toggleHiddenAndReplaceableElements(t,!1)},n.toggleHiddenAndReplaceableElements=function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.wct.document&&s(t.querySelectorAll("[next-page-hide]")).forEach((function(t){return Ot(t,!1)})),i&&s(t.querySelectorAll("*:not(amp-next-page) [next-page-replace]")).forEach((function(t){var i=t.getAttribute("next-page-replace");i||(i=String(Date.now()+Math.floor(100*Math.random())),t.setAttribute("next-page-replace",i)),n.Sct[i]&&n.Sct[i]!==t&&Ot(n.Sct[i],!1),n.Sct[i]=t,Ot(t,!0)}))},n.Tct=function(){return Math.round((this.bo.getScrollHeight()-this.bo.getScrollTop()-this.bo.getHeight())/this.bo.getHeight())},n.Cct=function(t){return this.ort.indexOf(t)},n.fetchPageDocument=function(t){var n=this;return yt(this.t).fetch(t.url,{ampCors:!1}).then((function(i){return tn(i.url,n.Bi.getUrl()),t.url=i.url,i.text()})).then((function(t){var i=n.tp.implementation.createHTMLDocument("");return i.open(),i.write(t),i.close(),i})).catch((function(n){throw B().error(Ln,"failed to fetch %s",t.url,n),n}))},n.Act=function(){var t=this,n=this._ct(this.Oct());return n.length?this.Vct(n):(Y(this.jct,"%s should contain a <script> child or a URL specified in [src]",Ln),this.Uct().then((function(n){return 0===n.length?(B().warn(Ln,"Could not find recommendations"),F()):t.Vct(n)})))},n.Lct=function(t){var n=this;return!t.length||this.dct||t.forEach((function(t){try{if(function(t,n){B().assertString(t.url,"page url must be a string");var i,r,e=Qt(n),o=Ft(n).origin;t.url=(i=t.url,r=Yt(r=e),"function"==typeof URL?new URL(i,r.href).toString():function(t,n){n=Yt(n);var i=Ft(t=t.replace(/\\/g,"/"));return t.toLowerCase().startsWith(i.protocol)?i.href:t.startsWith("//")?n.protocol+t:t.startsWith("/")?n.origin+t:n.origin+n.pathname.replace(/\/[^/]*$/,"/")+t}(i,r));var u=tn(t.url,n);B().assertString(t.image,"page image must be a string"),B().assertString(t.title,"page title must be a string");var s=Xt(n);s!==o&&u.origin===s&&(t.url="".concat(o,"/c/")+("https:"===u.protocol?"s/":"")+encodeURIComponent(u.host)+u.pathname+(u.search||"")+(u.hash||""))}(t,n.Bi.getUrl()),n.ort.some((function(n){return n.initialUrl==t.url})))return;n.ort.push(new qt(n,t))}catch(t){B().error(Ln,"Failed to queue page due to error:",t)}})),F()},n.Vct=function(t){var n=this;return this.Lct(t).then((function(){return n.maybeFetchNext()}))},n._ct=function(t){var n=I(t,"SCRIPT");if(!n.length)return[];Y(1===n.length,"".concat(Ln," should contain at most one <script> child"));var i=n[0];Y(function(t){var n;return"SCRIPT"==t.tagName&&"APPLICATION/JSON"==(null===(n=t.getAttribute("type"))||void 0===n?void 0:n.toUpperCase())}(i),"".concat(Ln," page list should ")+'be inside a <script> tag with type="application/json"');var r=g(i.textContent,(function(t){B().error(Ln,"failed to parse inline page list",t)})),o=B().assertArray(r,"".concat(Ln," Page list expected an array, found: ").concat(e(r)));return N(i),o},n.Uct=function(){var t=this;return this.jct?(this.mct||(this.mct=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.expr,e=void 0===r?".":r,o=i.urlReplacement,u=void 0===o?0:o,s=i.refresh,a=void 0!==s&&s,c=i.xssiPrefix,h=void 0===c?void 0:c,f=i.url,l=void 0===f?n.getAttribute("src"):f;Gt(l,n);var v=vt(t.win);return rn(n,l,u,a).then((function(t){return v.fetchJson(t.xhrUrl,t.fetchOpt)})).then((function(n){return yt(t.win).xssiJson(n,h)})).then((function(t){if(null==t)throw new Error("Response is undefined.");return d(t,e||".")})).catch((function(t){throw B().createError("failed fetching JSON data",t)}))}(this.Bi,this.Oct(),{urlReplacement:2,xssiPrefix:this.Oct().getAttribute("xssi-prefix")||void 0}).then((function(n){return t.jct=n.next||null,t.jct&&t.Oct().setAttribute("src",t.jct),n.pages||[]})).catch((function(n){return B().error(Ln,"error fetching page list from remote server",n),t.jct=null,[]}))),this.mct):Promise.resolve([])},n.Pct=function(t){var n=P(t,"separator");return n?(N(n),n.hasAttribute("tabindex")||n.setAttribute("tabindex","0"),n):this.Zct()},n.Zct=function(){return St(this.Oct())(Tn)},n.Dct=function(t,n){var i=this;if(!this.ty.hasTemplate(t))return F();var r={title:n.title,url:n.url,image:n.image};return this.ty.findAndRenderTemplate(t,r).then((function(n){return i.dh.mutateElement(t,(function(){A(t),t.appendChild(n)}))}))},n.Ict=function(t){var n=this,i=P(t,"recommendation-box");return i?(this.pct=this.ty.hasTemplate(i)?function(){return n.qct()}:Dn,i):(this.pct=function(){return n.Bct()},this.Hct())},n.Hct=function(){return St(this.Oct())(Cn)},n.qct=function(){var t=this,n=this.vct;W(this.ty.hasTemplate(n));var i=this.ty.maybeFindTemplate(n),r={pages:(this.ort||[]).filter((function(t){return!t.isLoaded()&&!t.is(2)})).map((function(t){return{title:t.title,url:t.url,image:t.image}}))};return this.ty.findAndRenderTemplate(n,r).then((function(r){return t.dh.mutateElement(n,(function(){A(n),n.appendChild(i),n.appendChild(r)}))}))},n.Bct=function(){var t=this,n=this.vct,i={pages:(this.ort||[]).filter((function(t){return!t.isLoaded()&&!t.is(2)})).map((function(t){return{title:t.title,url:t.url,image:t.image}}))},r=St(this.Oct()),e=i.pages.map((function(n){var i=r(Un),e=function(t){for(var n=t.querySelectorAll("[ref]"),i=v(),r=0;r<n.length;r++){var e=n[r],o=e.getAttribute("ref");m(o),e.removeAttribute("ref"),m(void 0===i[o]),i[o]=e}return i}(i),o=e.image,u=e.title;return o.src=n.image,u.textContent=n.title,i.href=n.url,i.addEventListener("click",(function(i){Pt(t.Oct(),"amp-next-page-click",{"title":n.title,"url":n.url},!1),t.UE.navigateToAmpUrl(n.url,"content-discovery")&&i.preventDefault()})),i}));return this.dh.mutateElement(n,(function(){A(n),e.forEach((function(t){return n.appendChild(t)}))}))},t}(),Vn=function(t){i(r,t);var n=u(r);function r(t){var i;return(i=n.call(this,t)).Jct=null,i}var e=r.prototype;return e.isLayoutSupported=function(t){return"container"===t},e.buildCallback=function(){return this.Jct=Q(this.element,"next-page"),this.Jct.build(this.element)},r}(t.BaseElement);t.registerServiceForDoc("next-page",_n),t.registerElement("amp-next-page",Vn,nn)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-next-page-1.0.js.map