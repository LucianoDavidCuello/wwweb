;
(self.AMP=self.AMP||[]).push({m:1,v:"2205120110001",n:"amp-story-subscriptions",ev:"0.1",l:!1,f:function(t,i){(()=>{function i(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function n(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?n(Object(s),!0).forEach((function(n){i(t,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}var{isArray:s}=Array,{hasOwnProperty:o,toString:e}=Object.prototype;function a(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function l(t,i){return o.call(t,i)}function p(t,i){if(!!i===i||null==i)return;if(Array.isArray(i))return void i.forEach((i=>{p(t,i)}));const n=i;t.appendChild(n.nodeType?n:self.document.createTextNode(String(i)))}function u(t,i,...n){if("string"!=typeof t)return t(r(r({},i),{},{children:n}));const s=null==i?void 0:i.xmlns;s&&delete i.xmlns;const o=s?self.document.createElementNS(s,t):self.document.createElement(t);return p(o,n),i&&Object.keys(i).forEach((t=>{!function(t,i,n){if(!1!==n&&null!=n)if("function"!=typeof n||"o"!==i[0]||"n"!==i[1])t.setAttribute(i,!0===n?"":String(n));else{const r=i.toLowerCase().substring(2);t.addEventListener(r,n)}}(o,t,i[t])})),o}var c,m=["Webkit","webkit","Moz","moz","ms","O","o"];function h(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return m.some((t=>i.startsWith(t+"-")))?`-${i}`:i}function b(t,i,n){if(i.startsWith("--"))return i;c||(c=a());let r=c[i];if(!r||n){if(r=i,void 0===t[i]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),s=function(t,i){for(let n=0;n<m.length;n++){const r=m[n]+i;if(void 0!==t[r])return r}return""}(t,n);void 0!==t[s]&&(r=s)}n||(c[i]=r)}return r}function d(t,i,n=5){if(!isFinite(n)||n<0)throw new Error("Invalid depth: "+n);if(t===i)return!0;const r=[{a:t,b:i,depth:n}];for(;r.length>0;){const{a:t,b:i,depth:n}=r.shift();if(n>0){if(typeof t!=typeof i)return!1;if(s(t)&&s(i)){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)r.push({a:t[s],b:i[s],depth:n-1});continue}if(t&&i&&"object"==typeof t&&"object"==typeof i){const s=Object.keys(t),o=Object.keys(i);if(s.length!==o.length)return!1;for(const o of s)r.push({a:t[o],b:i[o],depth:n-1});continue}}if(t!==i)return!1}return!0}function f(t){return(t.ownerDocument||t).defaultView}var g=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function A(t,i=""){try{return decodeURIComponent(t)}catch(t){return i}}function _(t){if(!t)return null;const i=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i),n=i?i[2]:void 0,r=i?i[3]:void 0;return n&&r?{extensionId:n,extensionVersion:r}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function T(t,i){throw new Error("failed to call initLogConstructor")}function S(t){return y.user||(y.user=E()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(y.user.win,t)?y.userForEmbed||(y.userForEmbed=E()):y.user}function E(t){return T()}function v(){return y.dev||(y.dev=T())}function I(t,i,n,r,s,o,e,a,l,p,u){return t}function P(t,i,n,r){(function(t,i,n,r,s,o){const e=G(t);let a=e[n];a||(a=e[n]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=r,a.context=i,a.sharedInstance=!1,a.resolve&&D(t,n))})(t=C(t),t,i,n),r&&D(t,i)}function w(t,i){return D(t=C(t),i)}function O(t,i){return j(t=C(t),i)?D(t,i):null}function x(t,i){return V(t,i)}function N(t,i){return k(M(t),i)}function R(t,i){return V(M(t),i)}function C(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function U(t){return t.nodeType?(i=f(t),w(i,"ampdoc")).getAmpDoc(t):t;var i}function M(t){const i=U(t);return i.isSingleDoc()?i.win:i}function D(t,i){I(j(t,i));const n=G(t)[i];return n.obj||(I(n.ctor),I(n.context),n.obj=new n.ctor(n.context),I(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function k(t,i){const n=V(t,i);if(n)return n;const r=G(t);return r[i]=function(){const t=new class{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}},{promise:i,reject:n,resolve:r}=t;return i.catch((()=>{})),{obj:null,promise:i,resolve:r,reject:n,context:null,ctor:null}}(),r[i].promise}function V(t,i){const n=G(t)[i];return n?n.promise?n.promise:(D(t,i),n.promise=Promise.resolve(n.obj)):null}function G(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}function j(t,i){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!n||!n.ctor)}function L(t,i,n,r,s){return x(t,i)||function(t,i,n,r,s){return(o=t.document,new Promise((t=>function(t,i){!function(t,i,n){if(i())n();else{const r=new(f(t).MutationObserver)((()=>{i()&&(r.disconnect(),n())}));r.observe(t,{childList:!0})}}(t.documentElement,(()=>!!t.body),i)}(o,t)))).then((()=>{const i=w(t,"extensions");return function(t,i,n){return function(t){if(!t)return[];const i=t.querySelectorAll("script[custom-element],script[custom-template]"),n=[];for(let t=0;t<i.length;t++){const r=i[t],s=r.getAttribute("custom-element")||r.getAttribute("custom-template"),o=_(r.src);s&&o&&n.push({script:r,extensionId:s,extensionVersion:o.extensionVersion})}return n}(t.document.head).some((({extensionId:t,extensionVersion:r})=>i==t&&n==r))}(i.win,n,r)?i.waitForExtension(n,r):null})).then((n=>n?s?x(t,i):function(t,i){return k(t,i)}(t,i):null));var o}(t,i,n,r,s)}function H(t,i,n,r){return function(t,i,n,r){const s=R(t,i);if(s)return s;const o=U(t);return o.whenExtensionsKnown().then((()=>{const t=o.getExtensionVersion(n);return t?w(o.win,"extensions").waitForExtension(n,t):null})).then((n=>n?r?R(t,i):N(t,i):null))}(t,i,n,r).then((t=>function(t,i,n){return r=t,s=i,o=n,e=n,a=n,S().assert(r,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",s,o,e,a,void 0,void 0,void 0,void 0,void 0);var r,s,o,e,a}(t,i,n)))}var z="amp-story",Y=t=>{let i=(t=>O(t,"story-store"))(t);return i||(i=new X(t),P(t,"story-store",(function(){return i}))),i},W={CAN_INSERT_AUTOMATIC_AD:1,CAN_SHOW_AUDIO_UI:2,CAN_SHOW_NAVIGATION_OVERLAY_HINT:3,CAN_SHOW_PAGINATION_BUTTONS:4,CAN_SHOW_PREVIOUS_PAGE_HELP:5,CAN_SHOW_SHARING_UIS:6,CAN_SHOW_STORY_URL_INFO:7,CAN_SHOW_SYSTEM_LAYER_BUTTONS:8,VIEWER_CUSTOM_CONTROLS:9,AD_STATE:10,PAGE_ATTACHMENT_STATE:11,EDUCATION_STATE:12,GYROSCOPE_PERMISSION_STATE:13,INFO_DIALOG_STATE:14,INTERACTIVE_COMPONENT_STATE:15,INTERACTIVE_REACT_STATE:16,KEYBOARD_ACTIVE_STATE:17,MUTED_STATE:18,PAGE_HAS_AUDIO_STATE:19,PAGE_HAS_CAPTION_STATE:20,CAPTIONS_STATE:21,PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE:22,PANNING_MEDIA_STATE:23,PAUSED_STATE:24,PREVIEW_STATE:25,RTL_STATE:26,SHARE_MENU_STATE:27,SHOPPING_DATA:28,STORY_HAS_BACKGROUND_AUDIO_STATE:29,STORY_HAS_PLAYBACK_UI_STATE:30,SYSTEM_UI_IS_VISIBLE_STATE:31,UI_STATE:32,ACTIONS_ALLOWLIST:33,CONSENT_ID:34,CURRENT_PAGE_ID:35,CURRENT_PAGE_INDEX:36,ADVANCEMENT_MODE:37,NAVIGATION_PATH:38,NEW_PAGE_AVAILABLE_ID:39,PAGE_IDS:40,PAGE_SIZE:41,SUBSCRIPTIONS_DIALOG_UI_STATE:42,SUBSCRIPTIONS_STATE:43},B={[W.ACTIONS_ALLOWLIST]:(t,i)=>t.length!==i.length,[W.INTERACTIVE_COMPONENT_STATE]:(t,i)=>t.element!==i.element||t.state!==i.state,[W.NAVIGATION_PATH]:(t,i)=>t.length!==i.length,[W.PAGE_IDS]:(t,i)=>t.length!==i.length,[W.PAGE_SIZE]:(t,i)=>null===t||null===i||t.width!==i.width||t.height!==i.height,[W.PANNING_MEDIA_STATE]:(t,i)=>null===t||null===i||!d(t,i,2),[W.SHOPPING_DATA]:(t,i)=>null===t||null===i||!d(t,i,2),[W.INTERACTIVE_REACT_STATE]:(t,i)=>!d(t,i,3)},X=class{constructor(t){this.i=t,this.Wf={},this.Ai=r(r({},this.y0()),this.T0())}get(t){if(l(this.Ai,t))return this.Ai[t];v().error(z,"Unknown state %s.",t)}subscribe(t,i,n=!1){l(this.Ai,t)?(this.Wf[t]||(this.Wf[t]=new class{constructor(){this.St=null}add(t){return this.St||(this.St=[]),this.St.push(t),()=>{this.remove(t)}}remove(t){this.St&&function(t,i){const n=t.indexOf(i);-1!=n&&t.splice(n,1)}(this.St,t)}removeAll(){this.St&&(this.St.length=0)}fire(t){if(this.St)for(const i of this.St.slice())i(t)}getHandlerCount(){var t,i;return null!==(t=null===(i=this.St)||void 0===i?void 0:i.length)&&void 0!==t?t:0}}),this.Wf[t].add(i),n&&i(this.get(t))):v().error(z,"Can't subscribe to unknown state %s.",t)}dispatch(t,i){const n=r({},this.Ai);let s;this.Ai=((t,i,n)=>{switch(i){case 1:return r(r({},t),{},{[W.INTERACTIVE_REACT_STATE]:r(r({},t[W.INTERACTIVE_REACT_STATE]),{},{[n.interactiveId]:n})});case 2:return r(r({},t),{},{[W.NEW_PAGE_AVAILABLE_ID]:n});case 3:const s=r(r({},t[W.PANNING_MEDIA_STATE]),n);return r(r({},t),{},{[W.PANNING_MEDIA_STATE]:s});case 4:const o=r(r({},t[W.SHOPPING_DATA]),n);return r(r({},t),{},{[W.SHOPPING_DATA]:o});case 5:const e=[].concat(t[W.ACTIONS_ALLOWLIST],n);return r(r({},t),{},{[W.ACTIONS_ALLOWLIST]:e});case 20:return r(r({},t),{},{[W.PAGE_ATTACHMENT_STATE]:!!n});case 14:return r(r({},t),{},{[W.AD_STATE]:!!n});case 15:return r(r({},t),{},{[W.EDUCATION_STATE]:!!n});case 17:return n=n,r(r({},t),{},{[W.PAUSED_STATE]:1===n.state,[W.SYSTEM_UI_IS_VISIBLE_STATE]:!0,[W.INTERACTIVE_COMPONENT_STATE]:n});case 16:return r(r({},t),{},{[W.INFO_DIALOG_STATE]:!!n,[W.PAUSED_STATE]:!!n});case 29:return r(r({},t),{},{[W.STORY_HAS_PLAYBACK_UI_STATE]:!!n});case 28:return r(r({},t),{},{[W.STORY_HAS_BACKGROUND_AUDIO_STATE]:!!n});case 19:return r(r({},t),{},{[W.MUTED_STATE]:!!n});case 21:return r(r({},t),{},{[W.PAGE_HAS_AUDIO_STATE]:!!n});case 22:return r(r({},t),{},{[W.PAGE_HAS_CAPTIONS_STATE]:!!n});case 23:return r(r({},t),{},{[W.CAPTIONS_STATE]:!!n});case 24:return r(r({},t),{},{[W.PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE]:!!n});case 25:return r(r({},t),{},{[W.PAUSED_STATE]:!!n});case 26:return r(r({},t),{},{[W.RTL_STATE]:!!n});case 18:return r(r({},t),{},{[W.KEYBOARD_ACTIVE_STATE]:!!n});case 27:return r(r({},t),{},{[W.PAUSED_STATE]:!!n,[W.SHARE_MENU_STATE]:!!n});case 32:return r(r({},t),{},{[W.SYSTEM_UI_IS_VISIBLE_STATE]:!!n});case 33:return 3===t[W.UI_STATE]&&3!==n?(v().error(z,"Cannot switch away from UIType_Enum.VERTICAL"),t):r(r({},t),{},{[W.UI_STATE]:n});case 9:return r(r({},t),{},{[W.GYROSCOPE_PERMISSION_STATE]:n});case 8:return r(r({},t),{},{[W.CONSENT_ID]:n});case 6:return r(r({},t),{},{[W.CURRENT_PAGE_ID]:n.id,[W.CURRENT_PAGE_INDEX]:n.index});case 7:return r(r({},t),{},{[W.ADVANCEMENT_MODE]:n});case 10:return r(r({},t),{},{[W.NAVIGATION_PATH]:n});case 11:return r(r({},t),{},{[W.PAGE_IDS]:n});case 12:return r(r({},t),{},{[W.PAGE_SIZE]:n});case 13:return r(r({},t),{},{[W.VIEWER_CUSTOM_CONTROLS]:n});case 30:return r(r({},t),{},{[W.SUBSCRIPTIONS_DIALOG_UI_STATE]:!!n,[W.PAUSED_STATE]:!!n});case 31:return r(r({},t),{},{[W.SUBSCRIPTIONS_STATE]:n});default:return v().error(z,"Unknown action %s.",i),t}})(this.Ai,t,i),Object.keys(this.Wf).forEach((t=>{s=B[t],(s?s(n[t],this.Ai[t]):n[t]!==this.Ai[t])&&this.Wf[t].fire(this.Ai[t])}))}y0(){return{[W.CAN_INSERT_AUTOMATIC_AD]:!0,[W.CAN_SHOW_AUDIO_UI]:!0,[W.CAN_SHOW_NAVIGATION_OVERLAY_HINT]:!0,[W.CAN_SHOW_PREVIOUS_PAGE_HELP]:!0,[W.CAN_SHOW_PAGINATION_BUTTONS]:!0,[W.CAN_SHOW_SHARING_UIS]:!0,[W.CAN_SHOW_STORY_URL_INFO]:!0,[W.CAN_SHOW_SYSTEM_LAYER_BUTTONS]:!0,[W.VIEWER_CUSTOM_CONTROLS]:[],[W.AD_STATE]:!1,[W.EDUCATION_STATE]:!1,[W.GYROSCOPE_PERMISSION_STATE]:"",[W.INFO_DIALOG_STATE]:!1,[W.INTERACTIVE_COMPONENT_STATE]:{state:0},[W.INTERACTIVE_REACT_STATE]:{},[W.KEYBOARD_ACTIVE_STATE]:!1,[W.MUTED_STATE]:!0,[W.PAGE_ATTACHMENT_STATE]:!1,[W.PAGE_HAS_AUDIO_STATE]:!1,[W.PAGE_HAS_CAPTIONS_STATE]:!1,[W.CAPTIONS_STATE]:!0,[W.PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE]:!1,[W.PANNING_MEDIA_STATE]:{},[W.PAUSED_STATE]:!1,[W.RTL_STATE]:!1,[W.SHARE_MENU_STATE]:!1,[W.SHOPPING_DATA]:{},[W.STORY_HAS_BACKGROUND_AUDIO_STATE]:!1,[W.STORY_HAS_PLAYBACK_UI_STATE]:!1,[W.SYSTEM_UI_IS_VISIBLE_STATE]:!0,[W.UI_STATE]:0,[W.ACTIONS_ALLOWLIST]:[],[W.CONSENT_ID]:null,[W.CURRENT_PAGE_ID]:"",[W.CURRENT_PAGE_INDEX]:0,[W.ADVANCEMENT_MODE]:"",[W.NEW_PAGE_AVAILABLE_ID]:"",[W.NAVIGATION_PATH]:[],[W.PAGE_IDS]:[],[W.PAGE_SIZE]:null,[W.PREVIEW_STATE]:!1,[W.SUBSCRIPTIONS_DIALOG_UI_STATE]:!1,[W.SUBSCRIPTIONS_STATE]:0}}T0(){switch(function(t){const i=function(t){const i=a();if(!t)return i;let n;for(;n=g.exec(t);){const t=A(n[1],n[1]),r=n[2]?A(n[2].replace(/\+/g," "),n[2]):"";i[t]=r}return i}(t).embedMode,n=parseInt(i,10);return 0===(r=n)||1===r||2===r||3===r||4===r?n:0;var r}(this.i.location.hash)){case 1:return{[W.CAN_INSERT_AUTOMATIC_AD]:!1,[W.CAN_SHOW_NAVIGATION_OVERLAY_HINT]:!1,[W.CAN_SHOW_PAGINATION_BUTTONS]:!1,[W.CAN_SHOW_PREVIOUS_PAGE_HELP]:!0,[W.CAN_SHOW_SYSTEM_LAYER_BUTTONS]:!1,[W.MUTED_STATE]:!1};case 2:return{[W.CAN_SHOW_SHARING_UIS]:!1};case 3:return{[W.PREVIEW_STATE]:!0,[W.CAN_INSERT_AUTOMATIC_AD]:!1,[W.CAN_SHOW_NAVIGATION_OVERLAY_HINT]:!1,[W.CAN_SHOW_PAGINATION_BUTTONS]:!1,[W.CAN_SHOW_PREVIOUS_PAGE_HELP]:!1,[W.CAN_SHOW_SYSTEM_LAYER_BUTTONS]:!1};case 4:return{[W.CAN_SHOW_AUDIO_UI]:!1,[W.CAN_SHOW_SHARING_UIS]:!1,[W.CAN_SHOW_STORY_URL_INFO]:!1};default:return{}}}},F="storyPageCount",K="storyProgress",Z="amp-story-viewer-messaging-handler",$={"CAPTIONS_STATE":{dataSource:0,property:W.CAPTIONS_STATE},"CURRENT_PAGE_ID":{dataSource:0,property:W.CURRENT_PAGE_ID},"EDUCATION_STATE":{dataSource:0,property:W.EDUCATION_STATE},"MUTED_STATE":{dataSource:0,property:W.MUTED_STATE},"PAGE_ATTACHMENT_STATE":{dataSource:0,property:W.PAGE_ATTACHMENT_STATE},"UI_STATE":{dataSource:0,property:W.UI_STATE},"STORY_PROGRESS":{dataSource:2,property:K},"STORY_PAGE_COUNT":{dataSource:2,property:F}},q={"CAPTIONS_STATE":{action:23,isValueValid:t=>"boolean"==typeof t},"MUTED_STATE":{action:19,isValueValid:t=>"boolean"==typeof t}},J="-shadowcsshost",Q=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)";function tt(t,i,n){const r=function(t,i){return t.closest("AMP-STORY")}(t),s=r.getAttribute(i);return s?(t=>function(t,i){const n=M(U(t));return j(n,"url")?D(n,"url"):null}(t))(r).assertHttpsUrl(s,r,i):null}new RegExp("("+J+Q,"gim"),new RegExp("(-shadowcsscontext"+Q,"gim"),new RegExp(J,"gim"),new RegExp("-shadowcsscontext","gim");var it=class extends t.BaseElement{constructor(t){super(t),this.zV=null,this.S0=null,this.jK=null,this.Fe=null,this.E0=null}buildCallback(){return this.Fe=function(t,i){return D(M(U(t)),"viewer")}(this.element),this.E0=this.Fe.isEmbedded()?new class{constructor(t,i){this.zV=Y(t),this.I0=(t=>{let i=(t=>O(t,"story-variable"))(t);return i||(i=new class{constructor(t){this.O0={storyInteractiveId:null,storyInteractiveResponse:null,storyInteractiveType:null,storyPageIndex:null,storyPageId:null,[F]:null,[K]:null,storyIsMuted:null,storyPreviousPageId:null,storyAdvancementMode:null,storyShoppingProductId:null},this.zV=Y(t),this.DV()}DV(){this.zV.subscribe(W.PAGE_IDS,(()=>this.N0())),this.zV.subscribe(W.CURRENT_PAGE_ID,(()=>this.N0()),!0)}N0(){const t=this.zV.get(W.PAGE_IDS),i=t.filter((t=>!t.startsWith("i-amphtml-ad-"))).length;this.O0.storyPageCount=i;const n=this.zV.get(W.CURRENT_PAGE_ID);if(!n)return;this.O0.storyPreviousPageId=this.O0.storyPageId,this.O0.storyPageId=n;const r=this.zV.get(W.CURRENT_PAGE_INDEX),s=t.slice(0,r).filter((t=>t.startsWith("i-amphtml-ad-"))).length;this.O0.storyPageIndex=r-s,1===i?this.O0.storyProgress=0:i>1&&(this.O0.storyProgress=(r-s)/(i-1))}onVariableUpdate(t,i){this.O0[t]=i}get(){return this.O0}}(t),P(t,"story-variable",(function(){return i}))),i})(t),this.Fe=i}startListening(){this.Fe.onMessageRespond("getDocumentState",(t=>this.R0(t))),this.Fe.onMessage("onDocumentState",(t=>this.C0(t))),this.Fe.onMessageRespond("setDocumentState",(t=>this.U0(t))),this.Fe.onMessageRespond("customDocumentUI",(t=>this.M0(t)))}send(t,i,n=!1){this.Fe.sendMessage(t,i,n)}R0(t={}){const{state:i}=t,n=$[i];if(!n)return Promise.reject("Invalid 'state' parameter");let r;switch(n.dataSource){case 0:r=this.zV.get(n.property);break;case 2:r=this.I0.get()[n.property];break;default:v().error(Z,"Unknown data source %s.",n.dataSource)}return Promise.resolve({state:i,value:r})}C0(t={}){const{state:i}=t,n=$[i];n?this.zV.subscribe(n.property,(t=>{this.Fe.sendMessage("documentStateUpdate",{"state":i,"value":t})})):S().error(Z,"Invalid 'state' parameter")}U0(t={}){const{state:i,value:n}=t,r=q[i];return r?r.isValueValid(n)?(this.zV.dispatch(r.action,n),Promise.resolve({state:i,value:n})):Promise.reject("Invalid 'value' parameter"):Promise.reject("Invalid 'state' parameter")}M0(t){this.zV.dispatch(13,t.controls)}}(this.win,this.Fe):null,Promise.all([(n=this.win,L(n,"story-store","amp-story","1.0")),(i=this.element,H(i,"subscriptions","amp-subscriptions")),(t=this.element,N(t,"localization"))]).then((([t,i,n])=>{this.zV=t,this.S0=i,this.jK=n,this.D0(),this.S0.addOnEntitlementResolvedCallback((()=>this.D0())),this.element.appendChild(this.k0()),this.DV()}));var t,i,n}layoutCallback(){const t=tt(this.element,"publisher-logo-src");this.element.querySelector(".i-amphtml-story-subscriptions-publisher-logo").setAttribute("src",t)}isLayoutSupported(t){return"container"==t}D0(){this.S0.getGrantStatus().then((t=>{this.V0(t)}))}V0(t){const i=t?2:3;this.zV.dispatch(31,i)}DV(){this.zV.subscribe(W.SUBSCRIPTIONS_DIALOG_UI_STATE,(t=>this.G0(t))),this.win.document.querySelector("amp-subscriptions-dialog").addEventListener("click",(t=>this.j0(t))),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{"SWG-POPUP-BACKGROUND"===t.tagName&&function(t,i){const{style:n}=t;for(const t in i)n.setProperty(h(b(n,t)),String(i[t]),"important")}(t,{"pointer-events":"all"})}))}))})).observe(this.win.document.body,{subtree:!1,childList:!0})}G0(t){if(this.mutateElement((()=>this.element.classList.toggle("i-amphtml-story-subscriptions-visible",t))),t)return this.S0.maybeRenderDialogForSelectedPlatform().then((()=>{this.Fe.isEmbedded()&&setTimeout((()=>{const t=this.win.document.querySelector("amp-subscriptions-dialog .i-amphtml-story-subscriptions-dialog-banner-button");t&&this.mutateElement((()=>t.classList.add("i-amphtml-story-subscriptions-dialog-banner-button-visible")))}),2e3)}));this.S0.getDialog().close()}j0(t){t.target.classList.contains("i-amphtml-story-subscriptions-dialog-banner-button-visible")&&this.E0.send("selectDocument",{"next":!0,"advancementMode":"manualAdvance"})}k0(){return u("div",{"subscriptions-dialog":!0,"subscriptions-display":"NOT granted"},u("div",{class:"i-amphtml-story-subscriptions-dialog-banner"},u("button",{class:"i-amphtml-story-subscriptions-dialog-banner-button"},this.jK.getLocalizedString("113"))),u("div",{class:"i-amphtml-story-subscriptions-dialog-content"},u("span",{class:"i-amphtml-story-subscriptions-price"},this.element.getAttribute("price")),this.element.getAttribute("headline")&&u("span",{class:"i-amphtml-story-subscriptions-headline"},this.element.getAttribute("headline")),u("span",{class:"i-amphtml-story-subscriptions-description"},this.element.getAttribute("description")),this.element.getAttribute("additional-description")&&u("span",{class:"i-amphtml-story-subscriptions-additional-description"},this.element.getAttribute("additional-description")),u("button",{class:"i-amphtml-story-subscriptions-publisher-button","subscriptions-action":"subscribe","subscriptions-display":"NOT granted"},u("img",{class:"i-amphtml-story-subscriptions-publisher-logo"}),u("span",{class:"i-amphtml-story-subscriptions-publisher-button-text"},this.jK.getLocalizedString("109")," ",tt(this.element,"publisher"))),u("button",{class:"i-amphtml-story-subscriptions-google-button","subscriptions-action":"subscribe","subscriptions-display":"NOT granted","subscriptions-service":"subscribe.google.com","subscriptions-decorate":"false"},u("span",{class:"i-amphtml-story-subscriptions-google-logo"}),u("span",{class:"i-amphtml-story-subscriptions-google-button-text"},this.jK.getLocalizedString("110"))),u("span",{class:"i-amphtml-story-subscriptions-signin"},this.jK.getLocalizedString("107")," ",u("button",{"subscriptions-action":"login","subscriptions-display":"NOT granted"},this.jK.getLocalizedString("108")))))}};t.registerElement("amp-story-subscriptions",it,'@import url("https://fonts.googleapis.com/css2?family=Google+Sans:wght@400");@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700");amp-story-subscriptions{position:absolute!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important;top:0!important;left:0!important;height:100%!important;width:100%!important;z-index:1!important;transform:translateY(100vh)!important;transition-delay:0.15s!important;pointer-events:none!important}amp-story-subscriptions.i-amphtml-story-subscriptions-visible{transform:translateY(0)!important;transition-delay:0s!important}amp-story-subscriptions:before{content:""!important;position:absolute!important;top:0!important;left:0!important;height:100%!important;width:100%!important;background:#000!important;opacity:0!important;pointer-events:auto!important;transition:opacity 0.15s cubic-bezier(0.4,0,1,1)!important}amp-story-subscriptions.i-amphtml-story-subscriptions-visible:before{opacity:0.55!important;transition:opacity 0.2s cubic-bezier(0,0,0.2,1)!important}amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper{border-radius:0.9em 0.9em 0 0!important;font-family:Poppins,sans-serif!important;font-weight:400!important;background:#fff!important;color:#000!important;overflow:hidden!important}amp-story:not([supports-landscape])+amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper,iframe.swg-dialog{width:100%!important;left:0!important;margin-left:0!important}@media(min-aspect-ratio:3/4){amp-story:not([supports-landscape])+amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper,iframe.swg-dialog{width:var(--i-amphtml-story-desktop-one-panel-width)!important;left:50%!important;margin-left:calc(var(--i-amphtml-story-desktop-one-panel-width)*-0.5)!important}}.i-amphtml-story-subscriptions-dialog-banner{height:2.54em!important;background:#ededed!important;padding:0 0.3em!important}.i-amphtml-story-subscriptions-dialog-banner,.i-amphtml-story-subscriptions-dialog-banner-button{display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:end!important;justify-content:flex-end!important;-ms-flex-align:center!important;align-items:center!important}.i-amphtml-story-subscriptions-dialog-banner-button{letter-spacing:0.015em!important;font-size:0.75em!important;opacity:0!important;transform:translateX(-0.2em)!important;transition:opacity 0.3s ease-out,transform 0.3s ease-out!important;padding:0!important;border:none!important;font-family:Poppins,sans-serif!important;font-weight:400!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button{transform:translateX(0.2em)!important}.i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible{opacity:1!important;transform:translateX(0)!important}.i-amphtml-story-subscriptions-dialog-banner-button:after{content:""!important;width:0.93em!important;height:0.93em!important;margin:0 0.6em!important;transform:translateX(-0.1em)!important;transition:transform 0.3s ease-out!important;background-size:contain!important;background-repeat:no-repeat!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" stroke="%23000" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1.75 1.5 6 6l-4.25 4.6"/></svg>\')!important}.i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible:after{transform:translateX(0)!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button:after{transform:translateX(0.1em) scaleX(-1)!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible:after{transform:translateX(0) scaleX(-1)!important}.i-amphtml-story-subscriptions-dialog-content{margin:2.1em 1.6em 0!important;text-align:center!important;white-space:nowrap!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important}.i-amphtml-story-subscriptions-price{display:block!important;font-weight:400!important;font-size:1.4em!important;letter-spacing:-0.02em!important;text-overflow:ellipsis!important;overflow:hidden!important;margin-bottom:0.2em!important}.i-amphtml-story-subscriptions-headline{display:block!important;font-weight:700!important;font-size:1.15em!important;letter-spacing:-0.015em!important;text-overflow:ellipsis!important;overflow:hidden!important;margin:0.4em 0 0.15em!important}.i-amphtml-story-subscriptions-additional-description,.i-amphtml-story-subscriptions-description{display:block!important;font-size:0.9em!important;letter-spacing:-0.015em!important;text-overflow:ellipsis!important;overflow:hidden!important}.i-amphtml-story-subscriptions-google-button,.i-amphtml-story-subscriptions-publisher-button{margin:0 auto 0.8em!important;padding:0!important;border:none!important;--i-amphtml-button-height:2.3em;height:var(--i-amphtml-button-height)!important;border-radius:calc(var(--i-amphtml-button-height)/2)!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;cursor:pointer!important;font-size:calc(var(--story-font-size))!important}.i-amphtml-story-subscriptions-publisher-button{margin-top:2em!important;background:#000!important}.i-amphtml-story-subscriptions-google-button{background:#f2f2f2!important}.i-amphtml-story-subscriptions-google-logo,.i-amphtml-story-subscriptions-publisher-logo{width:1.85em!important;height:1.85em!important;border-radius:50%!important;margin-inline:0.25em 0.65em!important}.i-amphtml-story-subscriptions-google-logo{background-size:contain!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none"><path fill="%23fff" d="M16 32a16 16 0 1 0 0-32 16 16 0 0 0 0 32z"/><path fill="%234285F4" d="M28.56 13.78H16v5h7.19a6.19 6.19 0 0 1-2.67 3.99v3.33h4.3c3.34-3.1 4.46-7.93 3.74-12.32z"/><path fill="%2334A853" d="M16 29.33c3.6 0 6.61-1.2 8.81-3.23l-4.29-3.33A8.04 8.04 0 0 1 16 24.06a7.96 7.96 0 0 1-7.48-5.52H4.1v3.44A13.31 13.31 0 0 0 16 29.33z"/><path fill="%23FBBC05" d="M8.52 18.54a7.93 7.93 0 0 1 0-5.08v-3.44H4.1a13.18 13.18 0 0 0 0 11.96l4.42-3.44z"/><path fill="%23EA4335" d="M16 7.94c1.97 0 3.72.68 5.11 2l3.8-3.8A12.75 12.75 0 0 0 16 2.67c-5.21 0-9.71 3-11.9 7.35l4.42 3.44A7.96 7.96 0 0 1 16 7.94z"/></svg>\')!important}.i-amphtml-story-subscriptions-google-button-text,.i-amphtml-story-subscriptions-publisher-button-text{display:block!important;letter-spacing:0.01em!important;max-width:12.6em!important;text-align:initial!important;white-space:normal!important;margin-inline-end:1.3em!important;font-size:0.75em!important;font-weight:400!important;font-family:Google Sans,sans-serif!important;display:-webkit-box!important;-webkit-line-clamp:2!important;-webkit-box-orient:vertical!important;overflow:hidden!important}.i-amphtml-story-subscriptions-publisher-button-text{color:#fff!important}.i-amphtml-story-subscriptions-google-button-text{color:#5e5e5e!important}.i-amphtml-story-subscriptions-signin{display:block!important;margin-top:2.75em!important;margin-bottom:1.4em!important;font-size:0.7em!important}.i-amphtml-story-subscriptions-signin button{font-weight:600!important;cursor:pointer!important;padding:0!important;border:none!important;font-size:1em!important;font-family:Poppins,sans-serif!important;background-color:#fff!important}\n/*# sourceURL=/extensions/amp-story-subscriptions/0.1/amp-story-subscriptions.css*/')})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-story-subscriptions-0.1.mjs.map