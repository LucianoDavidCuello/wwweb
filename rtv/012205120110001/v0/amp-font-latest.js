;
(self.AMP=self.AMP||[]).push({m:0,v:"2205120110001",n:"amp-font",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,i){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,i)}function i(n){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function e(n,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}Array.isArray;var o=Object.prototype;o.hasOwnProperty,o.toString,self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var u=self.__AMP_LOG;function f(n){return u.user||(u.user=s()),function(n,t){return t&&t.ownerDocument.defaultView!=n}(u.user.win,n)?u.userForEmbed||(u.userForEmbed=s()):u.user}function s(n){return function(n,t){throw new Error("failed to call initLogConstructor")}()}function c(n,t,i,r,e,o,u,f,s,c,a){return n}function a(n,t){c(function(n,t){var i=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!i||!i.ctor)}(n,t));var i=function(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}(n)[t];return i.obj||(c(i.ctor),c(i.context),i.obj=new i.ctor(i.context),c(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}var h,l=function(n){return a(n,"timer")},d=["Webkit","webkit","Moz","moz","ms","O","o"];function v(n,t,i,r,e){var o=function(n,t,i){if(t.startsWith("--"))return t;var r;h||(r=Object.create(null),h=r);var e=h[t];if(!e||i){if(e=t,void 0===n[t]){var o=function(n){return n.charAt(0).toUpperCase()+n.slice(1)}(t),u=function(n,t){for(var i=0;i<d.length;i++){var r=d[i]+t;if(void 0!==n[r])return r}return""}(n,o);void 0!==n[u]&&(e=u)}i||(h[t]=e)}return e}(n.style,t,e);if(o){var u,f=r?i+r:i;n.style.setProperty((u=o.replace(/[A-Z]/g,(function(n){return"-"+n.toLowerCase()})),d.some((function(n){return u.startsWith(n+"-")}))?"-".concat(u):u),f)}}function m(n,t){for(var i in t)v(n,i,t[i])}var y=["sans-serif","serif"],b=function(){function n(n){this.Bi=n,this.Vf=n.win.document,this.ft=null,this.hE=null,this.dE=!1,this.mE=!1}var t=n.prototype;return t.load=function(n,t){var i=this;return this.hE=n,l(this.Bi.win).timeoutPromise(t,this.yE()).then((function(){i.dE=!0,i.bE()}),(function(n){throw i.mE=!0,i.bE(),n}))},t.yE=function(){var n=this;return new Promise((function(t,i){var r=n.hE.fontStyle+" "+n.hE.variant+" "+n.hE.weight+" "+n.hE.size+" '"+n.hE.family+"'";n.pE()?n.Vf.fonts.check(r)?t():n.Vf.fonts.load(r).then((function(){return n.Vf.fonts.load(r)})).then((function(){n.Vf.fonts.check(r)?t():i(new Error("Font could not be loaded, probably due to incorrect @font-face."))})).catch(i):n.wE().then(t,i)}))},t.pE=function(){return"fonts"in this.Vf},t.wE=function(){var n=this;return new Promise((function(t,i){var r,e,o=(r=n.Bi.win,a((e=r).__AMP_TOP||(e.__AMP_TOP=e),"vsync")),u=n.gE(),f=o.createTask({measure:function(){n.dE?t():n.mE?i(new Error("Font loading timed out.")):u.some((function(n){return n.compare()}))?t():f()}});f()}))},t.gE=function(){var n=this,t=this.ft=this.Vf.createElement("div");m(t,{fontSize:"40px",fontVariant:this.hE.variant,fontWeight:this.hE.weight,fontStyle:this.hE.fontStyle,left:"-999px",lineHeight:"normal",margin:0,padding:0,position:"absolute",top:"-999px",visibility:"hidden"});var i=y.map((function(i){return new p(t,n.hE.family,i)}));return this.Bi.getBody().appendChild(t),i},t.bE=function(){var n,t;this.ft&&(null===(t=(n=this.ft).parentElement)||void 0===t||t.removeChild(n)),this.ft=null},n}(),p=function(){function n(n,t,i){var r=n.ownerDocument,e="".concat(t,",").concat(i);this.jE=this.SE(r,i),this.OE=this.SE(r,e),n.appendChild(this.jE),n.appendChild(this.OE)}var t=n.prototype;return t.SE=function(n,t){var i=n.createElement("div");return i.textContent="MAxmTYklsjo190QW",m(i,{float:"left",fontFamily:t,margin:0,padding:0,whiteSpace:"nowrap"}),i},t.compare=function(){var n=Math.abs(this.jE.offsetWidth-this.OE.offsetWidth)>2,t=Math.abs(this.jE.offsetHeight-this.OE.offsetHeight)>2;return n||t},n}(),w="amp-font",g=function(n){!function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&t(n,i)}(s,n);var r,o,u=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=i(r);if(o){var u=i(this).constructor;n=Reflect.construct(t,arguments,u)}else n=t.apply(this,arguments);return e(this,n)});function s(n){var t;return(t=u.call(this,n)).EE="",t.xE="",t.FE="",t.RE="",t.ME=null,t}s.prerenderAllowed=function(){return!0};var c=s.prototype;return c.buildCallback=function(){var n,t;this.EE=(n=this.element.getAttribute("font-family"),"The font-family attribute is required for <amp-font> %s",t=this.element,f().assert(n,"The font-family attribute is required for <amp-font> %s",t,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.xE=this.element.getAttribute("font-weight")||"400",this.FE=this.element.getAttribute("font-style")||"normal",this.RE=this.element.getAttribute("font-variant")||"normal",this.ME=new b(this.getAmpDoc()),this.TE()},c.TE=function(){var n=this,t={fontStyle:this.FE,variant:this.RE,weight:this.xE,size:"medium",family:this.EE};this.ME.load(t,this.zE()).then((function(){n.kE()})).catch((function(t){n.AE(),f().warn(w,"Font download timed out for "+n.EE)}))},c.kE=function(){var n=this.element.getAttribute("on-load-add-class"),t=this.element.getAttribute("on-load-remove-class");this.PE(n,t)},c.AE=function(){var n=this.element.getAttribute("on-error-add-class"),t=this.element.getAttribute("on-error-remove-class");this.PE(n,t)},c.PE=function(n,t){var i=this.getAmpDoc(),r=i.getRootNode().documentElement||i.getBody();n&&r.classList.add(n),t&&r.classList.remove(t),this.bE()},c.bE=function(){this.ME=null},c.zE=function(){var n,t=parseInt(this.element.getAttribute("timeout"),10);return t="number"!=typeof(n=t)||!isFinite(n)||t<0?3e3:t,Math.max(t-l(this.win).timeSinceStart(),100)},s}(n.BaseElement);n.registerElement(w,g)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-font-0.1.js.map