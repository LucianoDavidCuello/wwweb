;
(self.AMP=self.AMP||[]).push({m:0,v:"2205120110001",n:"amp-story-page-attachment",ev:"0.1",l:!1,f:function(t,a){!function(){function a(t,a,r){return a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function r(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.push.apply(r,i)}return r}function i(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?r(Object(n),!0).forEach((function(r){a(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))}))}return t}function n(t,a,r){if(null==a||""===a)return"";var i=r&&"number"==typeof a?"".concat(a,"px"):a;return"".concat(t,":").concat(i,";")}function o(t,a){return(o=Object.setPrototypeOf||function(t,a){return t.__proto__=a,t})(t,a)}function e(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&o(t,a)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,a){if(a&&("object"===p(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=m(t);if(a){var n=m(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return l(this,r)}}var c=Array.isArray,h=Object.prototype;function u(t,a,r,i,n,o,e,m,p,l,s){return t}function d(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!isFinite(r)||r<0)throw new Error("Invalid depth: "+r);if(t===a)return!0;for(var i=[{a:t,b:a,depth:r}];i.length>0;){var n=i.shift(),o=n.a,e=n.b,m=n.depth;if(m>0){if(p(o)!==p(e))return!1;if(c(o)&&c(e)){if(o.length!==e.length)return!1;for(var l=0;l<o.length;l++)i.push({a:o[l],b:e[l],depth:m-1});continue}if(o&&e&&"object"===p(o)&&"object"===p(e)){var s=Object.keys(o),h=Object.keys(e);if(s.length!==h.length)return!1;for(var u=0,d=s;u<d.length;u++){var g=d[u];i.push({a:o[g],b:e[g],depth:m-1})}continue}}if(o!==e)return!1}return!0}function g(t){return(t.ownerDocument||t).defaultView}h.hasOwnProperty,h.toString;var f,b,v=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function y(t,a,r,i,n){return n||(a?"ï¿½":i?t.slice(0,-1)+"\\"+t.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+t)}function w(t,a){return t.replace(/^|,/g,"$&".concat(a," "))}function x(t){return String(t).replace(v,y)}function k(t,a,r){var i;for(i=t;i&&i!==r;i=i.parentElement)if(a(i))return i;return null}function z(t,a){return t.closest?t.closest(a):k(t,(function(t){return function(t,a){var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!r&&r.call(t,a)}(t,a)}))}function O(t){var a;null===(a=t.parentElement)||void 0===a||a.removeChild(t)}function A(t,a,r){var i=t.hasAttribute(a),n=void 0!==r?r:!i;return n!==i&&(n?t.setAttribute(a,""):t.removeAttribute(a)),n}function j(t,a){if(!!a!==a&&null!=a)if(Array.isArray(a))a.forEach((function(a){j(t,a)}));else{var r=a;t.appendChild(r.nodeType?r:self.document.createTextNode(String(a)))}}function S(t,a,r){if(!1!==r&&null!=r)if("function"!=typeof r||"o"!==a[0]||"n"!==a[1])t.setAttribute(a,!0===r?"":String(r));else{var i=a.toLowerCase().substring(2);t.addEventListener(i,r)}}function P(t,a){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if("string"!=typeof t)return t(i(i({},a),{},{children:n}));var e=null==a?void 0:a.xmlns;e&&delete a.xmlns;var m=e?self.document.createElementNS(e,t):self.document.createElement(t);return j(m,n),a&&Object.keys(a).forEach((function(t){S(m,t,a[t])})),m}var R=["Webkit","webkit","Moz","moz","ms","O","o"],M={"getPropertyPriority":function(){return""},"getPropertyValue":function(){return""}};function T(t){var a=t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));return R.some((function(t){return a.startsWith(t+"-")}))?"-".concat(a):a}function E(t,a,r){if(a.startsWith("--"))return a;var i;b||(i=Object.create(null),b=i);var n=b[a];if(!n||r){if(n=a,void 0===t[a]){var o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(a),e=function(t,a){for(var r=0;r<R.length;r++){var i=R[r]+a;if(void 0!==t[i])return i}return""}(t,o);void 0!==t[e]&&(n=e)}r||(b[a]=n)}return n}function Y(t,a){var r=t.style;for(var i in a)r.setProperty(T(E(r,i)),String(a[i]),"important")}function L(t,a,r,i,n){var o=E(t.style,a,n);if(o){var e=i?r+i:r;t.style.setProperty(T(o),e)}}function N(t,a){void 0===a&&(a=t.hasAttribute("hidden")),a?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function F(t,a){for(var r=0;r<a.length;r++)L(t,a[r],null)}function U(t){try{return t.state}catch(t){return null}}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var B=self.__AMP_LOG;function C(t,a){throw new Error("failed to call initLogConstructor")}function G(t){return C()}function I(t,a,r,i,n,o,e,m,p,l,s){return t}var V=function(){var t=this;this.promise=new Promise((function(a,r){t.resolve=a,t.reject=r}))};function D(t,a){return J(t=K(t),a)}function _(t,a){return W(t=K(t),a)?J(t,a):null}function Z(t,a){return J($(X(t)),a)}function H(t,a){var r=$(X(t));return W(r,a)?J(r,a):null}function K(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function X(t){return t.nodeType?(a=g(t),D(a,"ampdoc")).getAmpDoc(t):t;var a}function $(t){var a=X(t);return a.isSingleDoc()?a.win:a}function J(t,a){I(W(t,a));var r=function(t){var a=t.__AMP_SERVICES;return a||(a=t.__AMP_SERVICES={}),a}(t)[a];return r.obj||(I(r.ctor),I(r.context),r.obj=new r.ctor(r.context),I(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function W(t,a){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[a];return!(!r||!r.ctor)}var q,Q=function(t){return Z(t,"owners")},tt=function(t){return _(t,"story-store")},at=function(t){return H(t,"localization")},rt=function(t){return H(t,"url")};function it(t,a){var r=at(a),i=D(g(a),"vsync"),n=[];return t.querySelectorAll("[i-amphtml-i18n-aria-label]").forEach((function(t){n.push(r.getLocalizedStringAsync(t.getAttribute("i-amphtml-i18n-aria-label")).then((function(a){return t.setAttribute("aria-label",a)}))),t.removeAttribute("i-amphtml-i18n-aria-label")})),t.querySelectorAll("[i-amphtml-i18n-text-content]").forEach((function(a){n.push(r.getLocalizedStringAsync(a.getAttribute("i-amphtml-i18n-text-content")).then((function(r){return t.isConnected?i.mutatePromise((function(){a.textContent=r})):a.textContent=r}))),a.removeAttribute("i-amphtml-i18n-text-content")})),Promise.all(n)}function nt(t){var a=t.tagName;return a.startsWith("AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==a||"AMP-BODY"==a)}function ot(t,a,r,i){return function(t,a,r,i){var n=t,o=r,e=function(t){try{return o(t)}catch(t){var a,r;throw null===(a=(r=self).__AMP_REPORT_ERROR)||void 0===a||a.call(r,t),t}},m=function(){if(void 0!==q)return q;q=!1;try{var t={get capture(){return q=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return q}(),p=!(null==i||!i.capture);return n.addEventListener(a,e,m?i:p),function(){null==n||n.removeEventListener(a,e,m?i:p),o=null,n=null,e=null}}(t,a,r,i)}var et,mt,pt,lt=(a(et={},33,(function(t,a){return t.length!==a.length})),a(et,15,(function(t,a){return t.element!==a.element||t.state!==a.state})),a(et,38,(function(t,a){return t.length!==a.length})),a(et,40,(function(t,a){return t.length!==a.length})),a(et,41,(function(t,a){return null===t||null===a||t.width!==a.width||t.height!==a.height})),a(et,23,(function(t,a){return null===t||null===a||!d(t,a,2)})),a(et,28,(function(t,a){return null===t||null===a||!d(t,a,2)})),a(et,16,(function(t,a){return!d(t,a,3)})),"none");function st(t){return!!t&&-1!=t.toString().indexOf("[native code]")}function ct(t){return void 0===mt&&(a=t||Element,mt=a.prototype.attachShadow?"v1":a.prototype.createShadowRoot?"v0":lt),mt;var a}function ht(t,a,r){var i="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)i+=function(t,a,r){var i=[];return t.split(",").forEach((function(t){t=t.trim(),r&&(t=r(t)),function(t,a){var r=function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+gt,"m")}(a);return!t.match(r)}(t,a)&&(t=function(t,a){return function(t,a){return t.match(bt)?(t=t.replace(ft,a)).replace(bt,a+" "):a+" "+t}(t,a)}(t,a)),i.push(t)})),i.join(", ")}(t.selectorText,a,r)+" {\n\t",i+=function(t){var a=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(a=a.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var r=t.style;for(var i in r)"initial"===r[i]&&(a+=i+": initial; ");return a}(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)i+="@media "+t.media.mediaText+" {\n",i+=ht(t.cssRules,a),i+="\n}\n\n";else try{t.cssText&&(i+=t.cssText+"\n\n")}catch(t){}})),i}var ut="-shadowcsshost",dt=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",gt=(new RegExp("("+ut+dt,"gim"),new RegExp("(-shadowcsscontext"+dt,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),ft=ut+"-no-combinator",bt=new RegExp(ut,"gim");new RegExp("-shadowcsscontext","gim");var vt=/[^\.\-\_0-9a-zA-Z]/,yt=/[^\-\_0-9a-zA-Z]/;function wt(t){var a,r=g(t),i=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(i)return i.innerHTML="",i;var n,o=ct();if("v1"==o?(a=t.attachShadow({mode:"open"})).styleSheets||Object.defineProperty(a,"styleSheets",{get:function(){var t=[];return a.childNodes.forEach((function(a){"STYLE"===a.tagName&&t.push(a.sheet)})),t}}):a="v0"==o?t.createShadowRoot():function(t){var a=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");var r=a.createElement("style");r.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(r);var i=a.createElement("i-amphtml-shadow-root");return t.appendChild(i),t.__AMP_SHADOW_ROOT=i,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:i}),i.host=t,i.getElementById=function(t){var a=x(t);return i.querySelector("#".concat(a))},Object.defineProperty(i,"styleSheets",{get:function(){return a.styleSheets?(t=a.styleSheets,t?Array.prototype.slice.call(t):[]).filter((function(t){return i.contains(t.ownerNode)})):[];var t}}),i}(t),void 0===pt&&(pt=ct()!=lt&&(st(Element.prototype.attachShadow)||st(Element.prototype.createShadowRoot))),!pt){var e="i-amphtml-sd-".concat(r.Math.floor(1e4*r.Math.random()));a.id=e,a.host.classList.add(e),n=function(t){return function(t,a){return function(t,a){var r=I(t.id),i=t.ownerDocument,n=null;try{n=zt(i.implementation.createHTMLDocument(""),a)}catch(t){}if(!n)try{n=zt(i,a)}catch(t){}return n?ht(n,".".concat(r),xt):a}(t,a)}(a,t)},a.__AMP_CSS_TR=n}return a}function xt(t){return t.replace(/(html|body)/g,kt)}function kt(t,a,r,i){var n=i.charAt(r-1),o=i.charAt(r+t.length);return n&&!vt.test(n)||o&&!yt.test(o)?t:"amp-"+t}function zt(t,a){var r=t.createElement("style");r.textContent=a;try{return(t.head||t.documentElement).appendChild(r),r.sheet?r.sheet.cssRules:null}finally{r.parentNode&&r.parentNode.removeChild(r)}}function Ot(t,a,r){var i=self.document.createElement("style");i.textContent=r;var n=wt(t);return n.appendChild(i),n.appendChild(a),t}"[".concat("data-text-background-color","]");var At=function(t){e(r,t);var a=s(r);function r(t){var r;return(r=a.call(this,t)).tmt=[],r.containerEl=null,r.contentEl=null,r.amt=1/0,r.headerEl=null,r.rmt=!1,r.state=0,r.storeService=u(tt(r.win)),r.localizationService=u(at(r.element)),r.lp={startX:0,startY:0,lastY:0,swipingUp:null,isSwipeY:null},r.imt=[],r.nmt=1/0,r.omt=null,r}r.prerenderAllowed=function(){return!1};var i=r.prototype;return i.isLayoutSupported=function(t){return"nodisplay"===t},i.buildCallback=function(){this.element.classList.add("amp-story-draggable-drawer-root");var t=P("div",{class:"i-amphtml-story-draggable-drawer"},P("div",{class:"i-amphtml-story-draggable-drawer-container"},P("div",{class:"i-amphtml-story-draggable-drawer-content"})));this.headerEl=P("div",{class:"i-amphtml-story-draggable-drawer-header"}),this.containerEl=t.querySelector(".i-amphtml-story-draggable-drawer-container"),N(this.containerEl,!1),this.contentEl=this.containerEl.querySelector(".i-amphtml-story-draggable-drawer-content");var a=P("button",{role:"button",class:"i-amphtml-story-draggable-drawer-spacer i-amphtml-story-system-reset","i-amphtml-i18n-aria-label":"87"});this.containerEl.insertBefore(a,this.contentEl),this.contentEl.appendChild(Ot(P("div",null),this.headerEl,':host{all:initial!important;color:initial!important}:host{border-radius:inherit!important}.i-amphtml-story-draggable-drawer-header{display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:center!important;justify-content:center!important;position:sticky!important;top:0!important;border-radius:inherit!important;z-index:1!important;--i-amphtml-draggable-drawer-background-color:#fff!important;--i-amphtml-draggable-drawer-text-color:#202125!important;--i-amphtml-draggable-drawer-header-twenty-percent-gray:rgba(0,0,0,.2)!important;--i-amphtml-draggable-drawer-header-font-family:"Roboto",sans-serif!important;--i-amphtml-draggable-drawer-header-font-size:18px!important;--i-amphtml-draggable-drawer-header-title-height:44px!important;background:var(--i-amphtml-draggable-drawer-background-color)!important}.i-amphtml-story-draggable-drawer-header.i-amphtml-story-page-attachment-with-form{padding-bottom:40px!important}:not([desktop]).i-amphtml-story-draggable-drawer-header:before{content:""!important;position:absolute!important;top:8px!important;width:40px!important;height:3px!important;background-color:var(--i-amphtml-draggable-drawer-header-twenty-percent-gray)!important;border-radius:3px!important}[theme=dark].i-amphtml-story-draggable-drawer-header{--i-amphtml-draggable-drawer-background-color:#202125!important;--i-amphtml-draggable-drawer-text-color:#fff!important;--i-amphtml-draggable-drawer-header-twenty-percent-gray:hsla(0,0%,100%,0.2)!important}:not([desktop]).i-amphtml-story-draggable-drawer-header{height:20px!important}.i-amphtml-story-page-attachment-close-button{display:block!important;padding:15px!important;width:14px!important;height:14px!important;background-origin:content-box!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" fill="rgba(0, 0, 0, .4)" viewBox="0 0 14 14"><path d="M13.3 2.1A1 1 0 1 0 11.9.7L7 5.6 2.1.7A1 1 0 1 0 .7 2.1L5.6 7 .7 11.9a1 1 0 1 0 1.4 1.4L7 8.4l4.9 4.9a1 1 0 1 0 1.4-1.4L8.4 7l4.9-4.9z"/></svg>\')!important;background-repeat:no-repeat!important;cursor:pointer!important;margin-inline-start:auto!important;box-sizing:content-box!important;border:none!important;background-color:transparent!important}[theme=dark] .i-amphtml-story-page-attachment-close-button{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" fill="rgba(255, 255, 255, .4)" viewBox="0 0 14 14"><path d="M13.3 2.1A1 1 0 1 0 11.9.7L7 5.6 2.1.7A1 1 0 1 0 .7 2.1L5.6 7 .7 11.9a1 1 0 1 0 1.4 1.4L7 8.4l4.9 4.9a1 1 0 1 0 1.4-1.4L8.4 7l4.9-4.9z"/></svg>\')!important}.i-amphtml-story-page-attachment-domain-label{background:var(--i-amphtml-draggable-drawer-background-color)!important;color:var(--i-amphtml-draggable-drawer-text-color)!important;display:block!important;font-family:var(--i-amphtml-draggable-drawer-header-font-family)!important;font-size:calc(var(--i-amphtml-draggable-drawer-header-font-size) - 3px)!important;font-weight:300!important;overflow:hidden!important;position:absolute!important;text-align:center!important;text-overflow:ellipsis!important;top:35px!important;white-space:nowrap!important;width:calc(100% - 112px)!important}.i-amphtml-story-draggable-drawer-header .i-amphtml-story-draggable-drawer-header-title-and-close{opacity:1!important;height:var(--i-amphtml-draggable-drawer-header-title-height)!important;width:100%!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;-ms-flex-pack:center!important;justify-content:center!important;background:var(--i-amphtml-draggable-drawer-background-color)!important;border-radius:inherit!important;box-shadow:0px 0px 1px var(--i-amphtml-draggable-drawer-header-twenty-percent-gray)!important}:not([desktop]).i-amphtml-story-draggable-drawer-header .i-amphtml-story-draggable-drawer-header-title-and-close{position:absolute!important;opacity:0!important;transition:opacity .3s,visibility .3s!important;visibility:hidden!important}:not([desktop]).i-amphtml-story-draggable-drawer-header.i-amphtml-story-draggable-drawer-header-stuck .i-amphtml-story-draggable-drawer-header-title-and-close{opacity:1!important;visibility:visible!important}.i-amphtml-story-page-attachment-title{position:absolute!important;font-family:var(--i-amphtml-draggable-drawer-header-font-family)!important;width:calc(100% - 80px)!important;color:var(--i-amphtml-draggable-drawer-text-color)!important;font-size:var(--i-amphtml-draggable-drawer-header-font-size)!important;font-weight:500!important;line-height:40px!important;overflow:hidden!important;text-align:center!important;text-overflow:ellipsis!important;white-space:nowrap!important}.i-amphtml-story-draggable-drawer-header-attachment-remote{display:none!important}\n/*# sourceURL=/extensions/amp-story-page-attachment/0.1/amp-story-draggable-drawer-header.css*/')),it(this.containerEl,this.element),this.element.appendChild(t),this.element.setAttribute("aria-hidden",!0)},i.layoutCallback=function(){this.TC();for(var t=this.win.document.createTreeWalker(this.element,NodeFilter.SHOW_ELEMENT,null,!1);t.nextNode();){var a=t.currentNode;nt(a)&&(this.tmt.push(a),Q(this.element).setOwner(a,this.element))}N(this.containerEl,!0)},i.TC=function(){var t=this;this.storeService.subscribe(32,(function(a){t.V2(a)}),!0);var a=this.element.querySelector(".i-amphtml-story-draggable-drawer-spacer");a.addEventListener("click",(function(){t.cL()}));var r=D(this.win,"platform");r.isSafari()||r.isIos()||new this.win.IntersectionObserver((function(a){t.headerEl.classList.toggle("i-amphtml-story-draggable-drawer-header-stuck",!a[0].isIntersecting)})).observe(a),new this.win.ResizeObserver((function(a){t.omt=a[0].contentRect.height})).observe(a),this.element.addEventListener("transitionend",(function(a){"transform"===a.propertyName&&0===t.state&&(t.containerEl.scrollTop=0)}))},i.V2=function(t){var a=0===t;a?this.emt():this.mmt(),A(this.headerEl,"desktop",!a)},i.emt=function(){var t,a=this.element.parentElement;t="AMP-STORY-PAGE"===a.tagName?a:"AMP-STORY-SHOPPING-ATTACHMENT"===a.tagName?this.element.closest("amp-story-page"):this.element,this.imt.push(ot(t,"touchstart",this.Bp.bind(this),{capture:!0})),this.imt.push(ot(t,"touchmove",this.Wp.bind(this),{capture:!0})),this.imt.push(ot(t,"touchend",this.Kp.bind(this),{capture:!0}))},i.mmt=function(){this.imt.forEach((function(t){return t()})),this.imt=[]},i.Nm=function(t){var a=t.touches;if(!a||a.length<1)return null;var r=a[0];return{x:r.clientX,y:r.clientY}},i.Bp=function(t){var a=this.Nm(t);a&&(this.lp.startX=a.x,this.lp.startY=a.y)},i.Wp=function(t){if(!1!==this.lp.isSwipeY){var a=this.Nm(t);if(a){var r=a.x,i=a.y;this.lp.swipingUp=i<this.lp.lastY,this.lp.lastY=i,(0!==this.state||this.lp.swipingUp)&&(this.sM()&&t.stopPropagation(),(null!==this.lp.isSwipeY||(this.lp.isSwipeY=Math.abs(this.lp.startY-i)>Math.abs(this.lp.startX-r),this.lp.isSwipeY))&&this.pmt({event:t,data:{swipingUp:this.lp.swipingUp,deltaY:i-this.lp.startY,last:!1}}))}}},i.sM=function(){return 0!==this.state||0===this.state&&this.lp.swipingUp},i.Kp=function(t){!0===this.lp.isSwipeY&&this.pmt({event:t,data:{swipingUp:this.lp.swipingUp,deltaY:this.lp.lastY-this.lp.startY,last:!0}}),this.lp.startX=0,this.lp.startY=0,this.lp.lastY=0,this.lp.swipingUp=null,this.lp.isSwipeY=null},i.pmt=function(t){var a=t.data;if(this.rmt)this.rmt=!a.last;else{var r=a.deltaY,i=a.swipingUp;if(3===this.state){var n=this.lmt(t.event.target);if(n&&r<0||n&&r>0&&this.containerEl.scrollTop>0)return void(this.rmt=!0)}if(t.event.preventDefault(),!0===a.last)return 1===this.state&&(!i&&r>50?this.cL():this.open()),void(2===this.state&&(i&&-r>50?this.open():this.cL()));2===this.state&&i&&-r>this.nmt?this.open():this.$m(r)}},i.lmt=function(t){return!!k(t,(function(t){return t.classList.contains("i-amphtml-story-draggable-drawer-content")}),this.element)},i.smt=function(t){this.nmt=t},i.cmt=function(t){this.amt=t},i.$m=function(t){var a,r=this;switch(this.state){case 0:case 2:if(t>0)return;this.state=2;var i=Math.max(t,-this.amt)-this.omt;a="translate3d(0, calc(100% + ".concat(i,"px), 0)");break;case 3:case 1:if(t<0)return;this.state=1,a="translate3d(0, ".concat(t,"px, 0)")}this.mutateElement((function(){Y(r.element,{transform:a,transition:"none",visibility:"visible"})}))},i.open=function(){var t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];3!==this.state&&(this.state=3,this.storeService.dispatch(25,!0),this.mutateElement((function(){t.element.setAttribute("aria-hidden",!1),F(t.element,["transform","transition","visibility"]),a||(Y(t.element,{transition:"initial"}),t.mutateElement((function(){return F(t.element,["transition"])}))),t.element.classList.add("i-amphtml-story-draggable-drawer-open"),N(t.containerEl,!0)})).then((function(){var a=Q(t.element);a.scheduleLayout(t.element,t.tmt),a.scheduleResume(t.element,t.tmt)})))},i.cL=function(){this.hmt()},i.hmt=function(){var t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0!==this.state&&(this.state=0,this.storeService.dispatch(25,!1),this.umt(),this.mutateElement((function(){t.element.setAttribute("aria-hidden",!0),F(t.element,["transform","transition"]),a||(Y(t.element,{transition:"initial"}),t.mutateElement((function(){return F(t.element,["transition"])}))),t.element.classList.remove("i-amphtml-story-draggable-drawer-open")})).then((function(){Q(t.element).schedulePause(t.element,t.tmt)})))},i.umt=function(){var t;null===(t=this.win.document.activeElement)||void 0===t||t.blur(),this.dmt()},i.dmt=function(){k(this.element,(function(t){return"AMP-STORY-PAGE"===t.tagName})).scrollTo(0,0)},r}(t.BaseElement),jt={"submitting":function(){return!0!==(t=P("div",{class:"i-amphtml-story-spinner","aria-hidden":"true"},P("div",{class:"i-amphtml-story-spinner-container"},P("div",{class:"i-amphtml-story-spinner-layer"},P("div",{class:"i-amphtml-story-spinner-circle-clipper left"}),P("div",{class:"i-amphtml-story-spinner-circle-clipper right"}))))).hasAttribute("active")&&(t.setAttribute("aria-hidden",String(!1)),t.setAttribute("active","")),t;var t},"submit-success":function(){return St("99")},"submit-error":function(){return St("98")}};function St(t){return[P("div",{class:"i-amphtml-story-page-attachment-form-submission-status-icon"}),P("div",{"i-amphtml-i18n-text-content":t})]}var Pt="dark",Rt=function(){return P("svg",{class:"i-amphtml-story-page-open-attachment-link-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},P("path",{"fill-opacity":".1",d:"M12 0c6.6 0 12 5.4 12 12s-5.4 12-12 12S0 18.6 0 12 5.4 0 12 0z",xmlns:"http://www.w3.org/2000/svg"}),P("path",{d:"m13.8 14.6.2.5-.2.5-1.5 1.4c-.7.7-1.7 1.1-2.7 1.1A4 4 0 0 1 6.9 17a3.9 3.9 0 0 1-1.1-2.7 4 4 0 0 1 1.1-2.7l1.5-1.5.5-.1.5.2.2.5-.2.5-1.5 1.5c-.5.5-.7 1.1-.7 1.7 0 .6.3 1.3.7 1.7.5.5 1.1.7 1.7.7s1.3-.3 1.7-.7l1.5-1.5c.3-.3.7-.3 1 0zM17 7a3.9 3.9 0 0 0-2.7-1.1A4 4 0 0 0 11.6 7l-1.5 1.5-.1.4.2.5.5.2.5-.2 1.5-1.5c.5-.5 1.1-.7 1.7-.7.6 0 1.3.3 1.7.7.5.5.7 1.1.7 1.7 0 .6-.3 1.3-.7 1.7l-1.5 1.5-.2.5.2.5.5.2.5-.2 1.5-1.5c.7-.7 1.1-1.7 1.1-2.7-.1-1-.5-1.9-1.2-2.6zm-7.9 7.2.2.5.5.2.5-.2 4.5-4.5.2-.5-.2-.5c-.3-.2-.8-.2-1 .1l-4.5 4.5-.2.4z",xmlns:"http://www.w3.org/2000/svg"}))},Mt=function(t){return t.getAttribute("cta-text")||t.getAttribute("data-cta-text")},Tt=function(t,a){return a?Promise.resolve(a.trim()):at(t).getLocalizedStringAsync("35")},Et=function(t,a){t.hasAttribute("cta-accent-color")||(B.dev||(B.dev=C())).warn("AMP-STORY-PAGE-OUTLINK","No cta-accent-color attribute found.");var r,i,n,o,e,m,p=t.getAttribute("cta-accent-color")||"#000000";Y(t,{"background-color":p}),o=(n=function(t){var a=/rgba?\((\d{1,3}), (\d{1,3}), (\d{1,3})/;if(!t.match(a))return(B.user||(B.user=G()),function(t,a){return a}(B.user.win,undefined)?B.userForEmbed||(B.userForEmbed=G()):B.user).error("UTILS","getRGBFromCssColorValue expects a parameter in "+"the form of 'rgba(0, 0, 0, 1)' or 'rgb(0, 0, 0)' but got ".concat(t)),{r:0,g:0,b:0};var r=a.exec(t);return{r:Number(r[1]),g:Number(r[2]),b:Number(r[3])}}((i=t,g(t).getComputedStyle(i)||M)["background-color"])).b,e=n.g,r=.2126*(m=function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})(n.r)+.7152*m(e)+.0722*m(o)>.179?"#000":"#FFF",Y(t,{"background-color":""}),"background"===t.getAttribute("cta-accent-element")?(Y(a,{"--i-amphtml-outlink-cta-background-color":p,"--i-amphtml-outlink-cta-text-color":r}),Y(t,{"--i-amphtml-outlink-cta-background-color":p,"--i-amphtml-outlink-cta-text-color":r})):(Y(a,{"--i-amphtml-outlink-cta-background-color":r,"--i-amphtml-outlink-cta-text-color":p}),Y(t,{"--i-amphtml-outlink-cta-background-color":r,"--i-amphtml-outlink-cta-text-color":p}))},Yt="amp-story-state",Lt="ampStoryAttachmentPageId";function Nt(t,r,n){var o=t.history,e=i(i({},U(o)||{}),{},a({},r,n));o.replaceState(e,""),function(t,r){var i,n=function(t){var a=function(t){try{return a=t.localStorage.getItem(Yt),JSON.parse(a)}catch(t){return null}var a}(t);if(!a)return{};var r=Date.now(),i=!1;return Object.keys(a).forEach((function(t){var n=a[t];r>n.time+6e5&&(delete a[t],i=!0)})),i&&Ft(t,a),a}(t);n[function(t){return t.location.href.replace(/\#.*/,"")}(t)]=(a(i={},"state",r),a(i,"time",Date.now()),i),Ft(t,n)}(t,e)}function Ft(t,a){try{t.localStorage.setItem(Yt,JSON.stringify(a))}catch(t){}}var Ut,Bt="story-open",Ct="story-close",Gt="story-page-attachment-enter",It="story-page-attachment-exit",Vt=function(t){e(o,t);var r=s(o);function o(t){var a;return(a=r.call(this,t)).z2=u(z(a.element,"amp-story")),a.ypt=u(z(a.element,"amp-story-page")),a.k8=_(a.win,"story-analytics"),a.gmt=Z(a.element,"history"),a.wM=null,a}var m=o.prototype;return m.buildCallback=function(){var a=this;t.prototype.buildCallback.call(this),this.fmt(),this.bmt(this.headerEl),this.bmt(this.element);var r="AMP-STORY-PAGE-OUTLINK"===this.element.tagName||this.element.hasAttribute("href");this.wM=r?1:0,0===this.wM&&this.vmt(),this.win.addEventListener("pageshow",(function(t){t.persisted&&a.hmt(!1)})),N(this.element,!0),this.element.setAttribute("aria-live","assertive")},m.layoutCallback=function(){if(t.prototype.layoutCallback.call(this),1===this.wM)return this.ymt()},m.fmt=function(){var t,a,r=this;this.element.hasAttribute("title")&&(this.element.setAttribute("data-title",this.element.getAttribute("title")),this.element.removeAttribute("title")),this.wmt||(t=this.ypt,a=this.element,"AMP-STORY-PAGE-OUTLINK"===a.tagName||a.getAttribute("href")?function(t,a){var r,i,o=function(t,a){if(void 0!==f?f:f=function(t){try{var a=t.ownerDocument,r=a.createElement("div"),i=a.createElement("div");return r.appendChild(i),r.querySelector(":scope div")===i}catch(t){return!1}}(t))return t.querySelector(w(a,":scope"));var r=function(t,a){var r=t.classList,i="i-amphtml-scoped";r.add(i);var n=w("amp-story-page-outlink a",".".concat(i)),o=t.querySelectorAll(n);return r.remove(i),o}(t)[0];return void 0===r?null:r}(t,"amp-story-page-outlink a"),e=(null==o?void 0:o.getAttribute("title"))||a.getAttribute("data-title"),m=null===(r=a.getAttribute("theme"))||void 0===r?void 0:r.toLowerCase(),p=a.getAttribute("cta-image"),l="31067119"==((i=g(t)).__AMP_EXPERIMENT_BRANCHES?i.__AMP_EXPERIMENT_BRANCHES["story-ad-auto-advance"]:null);return Tt(t,(null==o?void 0:o.textContent)||Mt(a)).then((function(t){var r=P("a",{class:"i-amphtml-story-page-open-attachment i-amphtml-story-page-open-attachment-outlink"+(l?" i-amphtml-story-page-open-attachment-outlink-no-animation-exp":""),role:"button",target:"_top",title:e,theme:m,"aria-label":t},P("svg",{class:"i-amphtml-story-outlink-page-attachment-arrow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8",width:"20px",height:"8px"},P("path",{d:"m18 7.7-.7-.2-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4a2 2 0 0 1 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z",xmlns:"http://www.w3.org/2000/svg"})),P("div",{class:"i-amphtml-story-outlink-page-attachment-outlink-chip"},p&&"none"!==p?P("div",{class:"i-amphtml-story-outlink-page-attachment-img",style:n("background-image","url(".concat(p,") !important"),!0)}):p?null:Rt(),P("span",{class:"i-amphtml-story-page-attachment-label"},t)));"custom"===m&&Et(a,r);var i=(null==o?void 0:o.getAttribute("href"))||a.getAttribute("href");return i&&r.setAttribute("href",i),r}))}(t,a):function(t,a){var r,i=function(r){var i=a.getAttribute(r);if(i){var o=function(t,a){var r=rt(a),i=a.win.location;if(!r.isProxyOrigin(i.origin)||r.isProxyOrigin(t))return t;var n=r.resolveRelativeUrl(t,r.getSourceOrigin(i.href));return i.origin+"/i/s/"+n.replace(/https?:\/\//,"")}(i,t.getAmpDoc());return P("div",{class:"i-amphtml-story-inline-page-attachment-img",style:n("background-image","url(".concat(o,") !important"),!0)})}},o=null===(r=a.getAttribute("theme"))||void 0===r?void 0:r.toLowerCase();return Tt(t,Mt(a)).then((function(t){return P("a",{class:"i-amphtml-story-page-open-attachment i-amphtml-story-page-open-attachment-inline",role:"button",theme:Pt===o&&o,"aria-label":t},P("div",{class:"i-amphtml-story-inline-page-attachment-chip"},i("cta-image"),i("cta-image-2"),P("div",{class:"i-amphtml-story-inline-page-attachment-arrow"})),"none"!==t&&P("span",{class:"i-amphtml-story-page-attachment-label"},t))}))}(t,a)).then((function(t){r.wmt=t,r.z2.hasAttribute("active")&&r.wmt.setAttribute("active","");var a=P("div",{class:"i-amphtml-story-page-open-attachment-host",role:"button",onClick:function(t){t.preventDefault(),r.open()}});r.mutateElement((function(){r.ypt.appendChild(Ot(a,r.wmt,'.i-amphtml-story-page-open-attachment{-ms-flex-align:center!important;align-items:center!important;-ms-flex-direction:column!important;flex-direction:column!important;position:absolute!important;bottom:0!important;left:0!important;width:100%!important;pointer-events:none!important;z-index:3!important;-webkit-touch-callout:default!important;text-decoration:none!important;--i-amphtml-chip-background-color:hsla(0,0%,100%,0.5)!important;--i-amphtml-img-background-color:#fff!important;--i-amphtml-label-text-color:#fff!important;--i-amphtml-arrow-color:#000!important;--i-amphtml-page-attachment-ui-animation-delay:1s!important;--i-amphtml-page-attachment-ui-animation-duration:.6s!important;display:none!important}[theme=dark].i-amphtml-story-page-open-attachment{--i-amphtml-chip-background-color:rgba(0,0,0,0.5)!important;--i-amphtml-img-background-color:#000!important;--i-amphtml-label-text-color:#000!important;--i-amphtml-arrow-color:#fff!important}.i-amphtml-story-page-open-attachment[active]{display:-ms-flexbox!important;display:flex!important}.i-amphtml-story-page-open-attachment>*{cursor:pointer!important;pointer-events:auto!important}.i-amphtml-story-page-open-attachment-label{position:relative!important;padding:12px 32px 20px!important;height:16px!important;max-width:calc(100% - 64px)!important;color:#fff!important;line-height:16px!important;text-shadow:0px 0px 6px rgba(0,0,0,0.36)!important}.i-amphtml-story-page-attachment-label,.i-amphtml-story-page-open-attachment-label{font-family:Roboto,sans-serif!important;font-size:16px!important;font-weight:700!important;letter-spacing:0.3px;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.i-amphtml-story-page-attachment-label{max-width:210px!important;line-height:18px!important}.i-amphtml-story-page-open-attachment-label{color:var(--i-amphtml-label-text-color)!important}.i-amphtml-story-inline-page-attachment-chip{background-color:var(--i-amphtml-chip-background-color)!important;display:-ms-flexbox!important;display:flex!important;border-radius:24px!important;-ms-flex-align:center!important;align-items:center!important;overflow:hidden!important;margin-bottom:12px!important}.i-amphtml-story-page-open-attachment-inline[active] .i-amphtml-story-inline-page-attachment-chip{animation:i-amphtml-tap-scale var(--i-amphtml-page-attachment-ui-animation-duration) var(--i-amphtml-page-attachment-ui-animation-delay) both!important}.i-amphtml-story-inline-page-attachment-chip:only-child{margin-bottom:20px!important}.i-amphtml-story-inline-page-attachment-img{background-size:contain!important;background-repeat:no-repeat!important;height:48px!important;width:48px!important;background-color:var(--i-amphtml-img-background-color)!important}.i-amphtml-story-inline-page-attachment-img:nth-child(2){margin-inline-start:1px!important}.i-amphtml-story-inline-page-attachment-arrow{position:relative!important;height:32px!important;width:32px!important;border-radius:50%!important;background-color:var(--i-amphtml-img-background-color)!important}.i-amphtml-story-inline-page-attachment-arrow:not(:only-child){margin:8px!important}.i-amphtml-story-inline-page-attachment-arrow:before{content:""!important;position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="8"><path d="m18 7.7-.7-.2-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4a2 2 0 0 1 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"/></svg>\')!important;background-position:50%!important;background-size:auto!important;background-repeat:no-repeat!important}.i-amphtml-story-page-open-attachment-inline[active] .i-amphtml-story-inline-page-attachment-arrow:before{animation:i-amphtml-move-up-arrow-in-circle var(--i-amphtml-page-attachment-ui-animation-duration) var(--i-amphtml-page-attachment-ui-animation-delay) both!important}[theme=dark] .i-amphtml-story-inline-page-attachment-arrow:before{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg fill="%23fff" xmlns="http://www.w3.org/2000/svg" width="20" height="8"><path d="m18 7.7-.7-.2-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4a2 2 0 0 1 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"/></svg>\')!important}.i-amphtml-story-page-open-attachment-inline .i-amphtml-story-page-attachment-label{margin-bottom:20px!important;color:var(--i-amphtml-label-text-color)!important}.i-amphtml-story-page-open-attachment-inline{background:linear-gradient(0,rgba(0,0,0,0.15),transparent)!important;border:none!important;padding:0!important}[theme=dark].i-amphtml-story-page-open-attachment-inline{background:linear-gradient(0,hsla(0,0%,100%,0.25),hsla(0,0%,100%,0))!important}.i-amphtml-story-page-open-attachment-outlink{--i-amphtml-outlink-cta-background-color:#fff!important;--i-amphtml-outlink-cta-text-color:#000!important}[theme=dark].i-amphtml-story-page-open-attachment-outlink{--i-amphtml-outlink-cta-background-color:#000!important;--i-amphtml-outlink-cta-text-color:#fff!important}.i-amphtml-story-page-open-attachment-outlink[active]:not(.i-amphtml-story-page-open-attachment-outlink-no-animation-exp){animation:i-amphtml-tap-scale var(--i-amphtml-page-attachment-ui-animation-duration) var(--i-amphtml-page-attachment-ui-animation-delay) both!important}.i-amphtml-story-outlink-page-attachment-arrow{display:block!important;cursor:pointer!important;margin-bottom:10px!important;fill:var(--i-amphtml-outlink-cta-background-color)!important;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3))!important}.i-amphtml-story-page-open-attachment[active]:not(.i-amphtml-story-page-open-attachment-outlink-no-animation-exp) .i-amphtml-story-outlink-page-attachment-arrow{animation:i-amphtml-move-up-arrow var(--i-amphtml-page-attachment-ui-animation-duration) var(--i-amphtml-page-attachment-ui-animation-delay) both!important}@keyframes i-amphtml-move-up-arrow{0%,to{opacity:1;transform:translateY(0)}45%{opacity:0;transform:translateY(-7px)}45.01%{transform:translateY(5px)}}@keyframes i-amphtml-move-up-arrow-in-circle{0%,to{opacity:1;transform:translateY(0)}45%{opacity:0;transform:translateY(-4px)}45.01%{transform:translateY(3px)}}@keyframes i-amphtml-tap-scale{0%,to{transform:scale(1)}45%{transform:scale(.9)}}.i-amphtml-story-outlink-page-attachment-outlink-chip{display:-ms-flexbox!important;display:flex!important;position:relative!important;padding:10px 6px!important;margin:0 0 20px!important;height:16px!important;max-width:calc(100% - 64px)!important;border-radius:30px!important;background:var(--i-amphtml-outlink-cta-background-color)!important;place-items:center!important;box-shadow:0px 4px 10px rgba(0,0,0,.15)!important}.i-amphtml-story-outlink-page-attachment-img{height:24px!important;width:24px!important;vertical-align:middle!important;background-size:cover!important;background-repeat:no-repeat!important;background-position:50%!important;border-radius:50%!important}.i-amphtml-story-page-open-attachment-outlink .i-amphtml-story-page-attachment-label{padding-inline-start:6px!important;padding-inline-end:8px!important;color:var(--i-amphtml-outlink-cta-text-color)!important}.i-amphtml-story-outlink-page-attachment-label:only-child,.i-amphtml-story-page-open-attachment-outlink .i-amphtml-story-page-attachment-label:only-child{padding-inline-start:8px!important}.i-amphtml-story-page-open-attachment-link-icon{width:24px!important;height:24px!important;fill:var(--i-amphtml-outlink-cta-text-color)!important}\n/*# sourceURL=/extensions/amp-story-page-attachment/0.1/amp-story-open-page-attachment.css*/'))}))}))},m.vmt=function(){var t=this,a=this.element.getAttribute("title")||this.element.getAttribute("data-title");this.headerEl.appendChild(P("div",{class:"i-amphtml-story-draggable-drawer-header-title-and-close"},P("button",{class:"i-amphtml-story-page-attachment-close-button","i-amphtml-i18n-aria-label":"87",role:"button",onClick:function(){return t.cL()},tabindex:"-1"}),a&&P("span",{class:"i-amphtml-story-page-attachment-title"},a))),it(this.headerEl,this.element);var r,i=this.element.querySelectorAll("form");i.length>0&&(r=this.win,tt(r).dispatch(5,[{tagOrTarget:"FORM",method:"clear"},{tagOrTarget:"FORM",method:"submit"}]),i.forEach((function(a){var r,i,n;(r=a,i=t.z2,n=Object.keys(jt).map((function(t){var a=r.querySelector("[".concat(x(t),"]"));if(a)return a;var i=P("div",null,P("div",{class:"i-amphtml-story-page-attachment-form-submission-status"},jt[t]()));return i.setAttribute(t,""),r.appendChild(i)})),it(r,i),n).forEach((function(a){new t.win.ResizeObserver((function(r){3===t.state&&r[0].contentRect.height>0&&a.scrollIntoView({behavior:"smooth",block:"nearest"})})).observe(a)}))})),this.headerEl.append(this.xmt()),this.headerEl.classList.add("i-amphtml-story-page-attachment-with-form"));for(var n=this.element.querySelector(".i-amphtml-story-draggable-drawer");this.element.firstChild&&this.element.firstChild!==n;)this.contentEl.appendChild(this.element.firstChild)},m.ymt=function(){var t=this;this.cmt(56),this.smt(150),this.headerEl.classList.add("i-amphtml-story-draggable-drawer-header-attachment-remote"),this.element.classList.add("i-amphtml-story-page-attachment-remote");var a="AMP-STORY-PAGE-OUTLINK"===this.element.tagName,r=a?this.element.querySelector("a").getAttribute("href"):this.element.getAttribute("href"),i=this.element.getAttribute("cta-image"),o=i&&"none"!==i?P("div",{class:"i-amphtml-story-page-attachment-remote-img",style:n("background-image","url(".concat(i,") !important"),!0)}):Rt(),e=P("a",{class:"i-amphtml-story-page-attachment-remote-content",target:"_blank",onClick:function(t){return t.preventDefault()}},o,P("span",{class:"i-amphtml-story-page-attachment-remote-title"},P("span",{"i-amphtml-i18n-text-content":"97"}),P("span",null,r)),P("svg",{class:"i-amphtml-story-page-attachment-remote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},P("path",{d:"M38 38H10V10h14V6H10a4 4 0 0 0-4 4v28a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4V24h-4v14zM28 6v4h7.2L15.5 29.7l2.8 2.8L38 12.8V20h4V6H28z",xmlns:"http://www.w3.org/2000/svg"})));return a&&this.element.querySelector("a").setAttribute("target","_top"),e.setAttribute("href",r),it(e,this.element).then((function(){return t.mutateElement((function(){return t.contentEl.appendChild(e)}))}))},m.setOpenAttachmentActive=function(t){this.wmt&&A(this.wmt,"active",t)},m.TC=function(){var a=this;if(t.prototype.TC.call(this),this.contentEl.addEventListener("click",(function(t){var a=t.target;"a"===a.tagName.toLowerCase()&&a.setAttribute("target","_blank")}),!0),this.element.addEventListener("click",(function(t){"amp-story-page-attachment"===t.target.tagName.toLowerCase()&&a.cL()}),!0),1===this.wM){var r=this.getAmpDoc();r.onVisibilityChanged((function(){r.isVisible()&&3===a.state&&a.hmt(!1)}))}this.storeService.subscribe(35,(function(t){a.setOpenAttachmentActive(t===a.ypt.id)}),!0)},m.open=function(){var r=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(3!==this.state){if(t.prototype.open.call(this,n),this.storeService.dispatch(20,!0),this.storeService.dispatch(32,!1),1!==this.wM){var o=U(this.win.history),e=i(i({},o),{},a({},Lt,this.storeService.get(35)));this.gmt.push((function(){return r.hmt()}),e)}this.kmt(!0),this.zmt(!0),this.k8.triggerEvent(Bt,this.element),this.k8.triggerEvent(Gt),1===this.wM&&this.Omt()}},m.Omt=function(){var t,a=this,r=function(){var t,r,i,n,o,e,m=null===(t=a.element.parentElement.querySelector("amp-story-page-outlink"))||void 0===t?void 0:t.querySelector("a"),p=null===(r=a.element.parentElement)||void 0===r||null===(i=r.querySelector(".i-amphtml-story-page-open-attachment-host").shadowRoot)||void 0===i?void 0:i.querySelector("a.i-amphtml-story-page-open-attachment");m?m.click():p&&(n=p,o=a.element,N(e=n.cloneNode(),!1),o.appendChild(e),e.click(),e.remove())};0===this.storeService.get(32)?(t=this.win,J(t,"timer")).delay((function(){r()}),500):r()},m.cL=function(){switch(this.state){case 3:case 1:this.gmt.goBack();break;case 2:this.hmt()}},m.hmt=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(0!==this.state){t.prototype.hmt.call(this,a),this.kmt(!1),this.zmt(!1),this.storeService.dispatch(20,!1),this.storeService.dispatch(32,!0);var r=k(this.element,(function(t){return"AMP-STORY"===t.tagName})),i=r.querySelector(".i-amphtml-story-page-attachment-expand");i&&this.mutateElement((function(){O(i)})),Nt(this.win,Lt,null),this.k8.triggerEvent(Ct,this.element),this.k8.triggerEvent(It)}},m.kmt=function(t){var a=k(this.element,(function(t){return"AMP-STORY-PAGE"===t.tagName}));this.mutateElement((function(){a.classList.toggle("i-amphtml-story-page-attachment-active",t)}))},m.zmt=function(t){var a=this.headerEl.querySelector(".i-amphtml-story-page-attachment-close-button");a&&this.mutateElement((function(){t?a.removeAttribute("tabindex"):a.setAttribute("tabindex",-1)}))},m.bmt=function(t){var a,r=null===(a=this.element.getAttribute("theme"))||void 0===a?void 0:a.toLowerCase();r&&Pt===r&&t.setAttribute("theme",r)},m.xmt=function(){return P("div",{class:"i-amphtml-story-page-attachment-domain-label"},this.Amt())},m.Amt=function(){var t=rt(this.element),a=this.getAmpDoc().getUrl();return t.getSourceOrigin(a).replace(/^http(s)?:\/\/(www.)?/,"")},o}(At),Dt=(Ut=Vt,function(t){e(r,t);var a=s(r);function r(){return a.apply(this,arguments)}return r.prototype.upgradeCallback=function(){var t=this,a=z(this.element,"amp-story");return a?function(t){if(u(nt(t)),t.createdCallback)return Promise.resolve(t);if(!t.__AMP_UPG_PRM){var a=new V;t.__AMP_UPG_PRM=a.promise,t.__AMP_UPG_RES=a.resolve}var r=t.__AMP_UPG_PRM;return u(r),r}(a).then((function(){return a.getImpl()})).then((function(){return new Ut(t.element)})):new Ut(this.element)},r}(t.BaseElement));t.registerElement("amp-story-page-attachment",Dt,'.amp-story-draggable-drawer-root{display:block!important;position:absolute!important;top:0!important;left:0!important;height:100%!important;width:100%!important;overflow:hidden!important;z-index:4!important;transform:translate3d(0,100%,0)!important;transition:transform 0.25s cubic-bezier(0.4,0.0,1,1),visibility 0s linear 0.4s!important;visibility:hidden!important;--i-amphtml-draggable-drawer-background-color:#fff!important;--i-amphtml-draggable-drawer-text-color:#202125!important}[theme=dark].amp-story-draggable-drawer-root{--i-amphtml-draggable-drawer-background-color:#202125!important;--i-amphtml-draggable-drawer-text-color:#fff!important}[desktop] .amp-story-draggable-drawer-root{background:none!important}.amp-story-draggable-drawer-root[hidden]{display:none!important}.amp-story-draggable-drawer-root.i-amphtml-story-draggable-drawer-open{transform:translateZ(0)!important;transition:transform 0.4s cubic-bezier(0.0,0.0,0.2,1),visibility 0s linear 0s!important;visibility:visible!important}.i-amphtml-story-draggable-drawer{height:100%!important}.i-amphtml-story-draggable-drawer-container{height:100%!important;background:var(--i-amphtml-draggable-drawer-background-color)!important;overflow-y:auto!important;-webkit-overflow-scrolling:touch!important;transition:background 0.3s cubic-bezier(0.4,0.0,0.2,1)!important}.i-amphtml-story-draggable-drawer-container[hidden]{display:block!important;background:hsla(0,0%,100%,0.92)!important}.i-amphtml-story-draggable-drawer-content{position:relative!important;opacity:1!important;transition:opacity 0.3s cubic-bezier(0.0,0.0,0.2,1)!important;background:var(--i-amphtml-draggable-drawer-background-color)!important;color:var(--i-amphtml-draggable-drawer-text-color)!important}amp-story:not([desktop]) .i-amphtml-story-draggable-drawer-content{border-radius:inherit!important}amp-story:not([desktop]) .i-amphtml-story-page-attachment-remote .i-amphtml-story-draggable-drawer-spacer{display:none!important}.i-amphtml-story-draggable-drawer-container[hidden] .i-amphtml-story-draggable-drawer-content{opacity:0!important}.i-amphtml-story-draggable-drawer-container[hidden] .i-amphtml-story-draggable-drawer-content>*{display:none!important}amp-story:not([desktop]) .i-amphtml-story-draggable-drawer-container{border-radius:16px 16px 0 0!important;height:100%!important;background:none!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important}.i-amphtml-story-draggable-drawer-spacer{display:none!important}amp-story:not([desktop]) .i-amphtml-story-draggable-drawer-spacer{background:none!important;display:block!important;height:calc(var(--story-page-vh)*100)!important;min-height:calc(var(--story-page-vh)*20)!important}body:not(.amp-mode-keyboard-active) amp-story:not([desktop]) .i-amphtml-story-draggable-drawer-spacer{outline:none!important}[desktop] .amp-story-draggable-drawer-root{display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;-ms-flex-pack:center!important;justify-content:center!important;background:rgba(0,0,0,0.55)!important;opacity:0!important;transition:opacity 0.15s cubic-bezier(0.4,0.0,1,1),transform 0s linear 0.15s,visibility 0s linear 0.4s!important}[desktop] .amp-story-draggable-drawer-root.i-amphtml-story-draggable-drawer-open{opacity:1!important;transition:opacity 0.3s cubic-bezier(0.0,0.0,0.2,1),visibility 0s linear 0s!important;transform:translateZ(0)!important}[desktop] .i-amphtml-story-draggable-drawer{height:auto!important;max-height:min(60vh,100%)!important;min-height:min(100%,700px)!important;width:800px!important;border-radius:8px!important;overflow:hidden!important;overflow-y:auto!important}.amp-story-draggable-drawer-root.i-amphtml-story-page-attachment-remote{transition-duration:.2s!important}.i-amphtml-story-page-attachment-remote.i-amphtml-story-draggable-drawer-open:after{content:""!important;position:absolute!important;width:100%!important;height:4px!important;color:#000!important;bottom:0!important;background-color:var(--i-amphtml-outlink-cta-text-color)!important;opacity:.6!important;transform-origin:left!important;animation:progress-bar-animation .6s cubic-bezier(0.4,0.0,1,1) both!important}[dir=rtl] .i-amphtml-story-page-attachment-remote.i-amphtml-story-draggable-drawer-open:after{transform-origin:right!important}@keyframes progress-bar-animation{0%{transform:scaleX(0)}to{transform:scaleX(1)}}.i-amphtml-story-page-attachment-form-submission-status{-ms-flex-align:center!important;align-items:center!important;background:var(--i-amphtml-draggable-drawer-background-color)!important;border:1px solid rgba(0,0,0,0.3)!important;border-radius:12px!important;box-sizing:border-box!important;display:-ms-flexbox!important;display:flex!important;font-family:Roboto,sans-serif!important;font-size:14px!important;font-weight:700!important;height:54px!important;margin:16px 0px!important;width:100%!important;--i-amphtml-story-page-attachment-form-submission-status-icon-height:26px!important}[theme=dark] .i-amphtml-story-page-attachment-form-submission-status{border:1px solid hsla(0,0%,100%,0.2)!important}[submit-success] .i-amphtml-story-page-attachment-form-submission-status{color:#0f8514!important}[theme=dark] [submit-success] .i-amphtml-story-page-attachment-form-submission-status{color:#8bdc8f!important}[submit-error] .i-amphtml-story-page-attachment-form-submission-status{color:#de3333!important}[theme=dark] [submit-error] .i-amphtml-story-page-attachment-form-submission-status{color:#ff5c5c!important}@keyframes submission-status-fade-in{0%{opacity:0}to{opacity:1}}.i-amphtml-story-page-attachment-form-submission-status div,[submitting] .i-amphtml-story-page-attachment-form-submission-status{animation:submission-status-fade-in 0.2s cubic-bezier(0.0,0.0,0.2,1)!important}.i-amphtml-story-page-attachment-form-submission-status-icon{height:var(--i-amphtml-story-page-attachment-form-submission-status-icon-height)!important;margin:0px 14px!important;width:var(--i-amphtml-story-page-attachment-form-submission-status-icon-height)!important}[submit-success] .i-amphtml-story-page-attachment-form-submission-status-icon{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none"><rect x="-14" y="-14" width="328" height="54" rx="12"/><circle cx="13" cy="13" r="13" fill="%238BDC8F"/><path d="m5.8 13.9 5 5 9.4-9.6" stroke="%23000" stroke-width="2.5"/></svg>\')!important}[submit-error] .i-amphtml-story-page-attachment-form-submission-status-icon{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="26" height="26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 0a13 13 0 1 0 0 26 13 13 0 0 0 0-26zm1.3 13c0 .7-.6 1.3-1.3 1.3-.7 0-1.3-.6-1.3-1.3V7.8c0-.7.6-1.3 1.3-1.3.7 0 1.3.6 1.3 1.3V13zm0 5.2c0 .7-.6 1.3-1.3 1.3-.7 0-1.3-.6-1.3-1.3 0-.7.6-1.3 1.3-1.3.7 0 1.3.6 1.3 1.3z" fill="%23FF5252"/></svg>\')!important}.i-amphtml-story-page-attachment-form-submission-status .i-amphtml-story-spinner{height:var(--i-amphtml-story-page-attachment-form-submission-status-icon-height)!important;margin:0 auto!important;position:relative!important;width:var(--i-amphtml-story-page-attachment-form-submission-status-icon-height)!important;bottom:0!important;left:0!important;right:0!important}.i-amphtml-story-page-attachment-form-submission-status .i-amphtml-story-spinner-layer{color:var(--i-amphtml-draggable-drawer-text-color)!important;filter:none!important}:host{visibility:inherit!important}.i-amphtml-story-page-attachment-remote{height:56px!important;bottom:0!important;top:auto!important;--i-amphtml-outlink-cta-background-color:#fff!important;--i-amphtml-outlink-cta-text-color:#000!important}[theme=dark].i-amphtml-story-page-attachment-remote{--i-amphtml-outlink-cta-background-color:#000!important;--i-amphtml-outlink-cta-text-color:#fff!important}.i-amphtml-story-page-attachment-remote>a:first-child,amp-story[desktop] .i-amphtml-story-page-attachment-remote{display:none!important}.i-amphtml-story-page-attachment-remote .i-amphtml-story-draggable-drawer-container{height:100%!important;border-radius:8px 8px 0 0!important;box-shadow:0 1px 2px 1px rgba(0,0,0,0.12)!important}.i-amphtml-story-page-attachment-remote-content{display:-ms-flexbox!important;display:flex!important;padding:0 24px!important;-ms-flex-align:center!important;align-items:center!important;color:rgba(0,0,0,0.87)!important;font-family:Roboto,sans-serif!important;font-size:15px!important;-ms-flex-pack:justify!important;justify-content:space-between!important;line-height:48px!important;text-decoration:none!important;height:56px!important;padding-inline-start:12px!important;padding-inline-end:18px!important;background:var(--i-amphtml-outlink-cta-background-color)!important}.i-amphtml-story-page-attachment-remote-content .i-amphtml-story-page-attachment-remote-img,.i-amphtml-story-page-attachment-remote-content .i-amphtml-story-page-open-attachment-link-icon{width:32px!important;height:32px!important;-ms-flex-negative:0!important;flex-shrink:0!important;padding:0px!important;border-radius:50%!important;background-size:cover!important;background-repeat:no-repeat!important;overflow:hidden!important}.i-amphtml-story-page-open-attachment-link-icon{fill:var(--i-amphtml-outlink-cta-text-color)!important}.i-amphtml-story-page-attachment-remote-title{max-width:calc(100% - 30px)!important;overflow:hidden!important;text-overflow:ellipsis!important;font-size:14px!important;padding:0 12px!important;color:var(--i-amphtml-outlink-cta-text-color)!important;display:-ms-flexbox!important;display:flex!important}.i-amphtml-story-page-attachment-remote-title :first-child{-ms-flex-negative:0!important;flex-shrink:0!important;font-weight:700!important}.i-amphtml-story-page-attachment-remote-title :first-child:after{content:"\\00a0 "!important}.i-amphtml-story-page-attachment-remote-title :nth-child(2){white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.i-amphtml-story-page-attachment-remote-icon{display:block!important;height:20px!important;width:20px!important;padding:0px!important;margin-inline-start:auto!important;-ms-flex-negative:0!important;flex-shrink:0!important;fill:var(--i-amphtml-outlink-cta-text-color)!important}.i-amphtml-story-page-attachment-expand{position:relative!important;width:100%!important;height:100%!important;background:#fff!important;z-index:100000!important;animation:i-amphtml-open-3p-attachment 120ms cubic-bezier(0.0,0.0,0.2,1) forwards!important}@keyframes i-amphtml-open-3p-attachment{0%{transform:scaleX(0);opacity:0.3}to{transform:scaleX(1);opacity:1}}.i-amphtml-story-page-attachment-active:after{content:""!important;display:block!important;left:0!important;top:0!important;bottom:0!important;right:0!important;position:absolute!important;background:#000!important;z-index:3!important;animation:i-amphtml-attachment-overlay-opacity 0.3s cubic-bezier(0.0,0.0,0.2,1) forwards!important}@keyframes i-amphtml-attachment-overlay-opacity{0%{opacity:0}to{opacity:0.5}}\n/*# sourceURL=/extensions/amp-story-page-attachment/0.1/amp-story-page-attachment.css*/'),t.registerElement("amp-story-page-outlink",Dt)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-story-page-attachment-0.1.js.map