;
(self.AMP=self.AMP||[]).push({m:1,v:"2205120110001",n:"amp-apester-media",ev:"0.1",l:!0,f:function(t,n){(()=>{var{isArray:n}=Array,{hasOwnProperty:e,toString:i}=Object.prototype;function r(t,n){return e.call(t,n)}function o(t,n){if("."==n)return t;const e=n.split(".");let i=t;for(const t of e){if(!(t&&i&&void 0!==i[t]&&"object"==typeof i&&r(i,t))){i=void 0;break}i=i[t]}return i}function s(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function a(t){return(t.ownerDocument||t).defaultView}function c(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function l(t,n,e){return function(t,n){for(const e in n)t.setAttribute(e,n[e]);return t}(t.createElement(n),e)}function u(t){const n=parseFloat(t);return"number"==typeof(e=n)&&isFinite(e)?n:void 0;var e}function h(t,n,e={}){const{needsRootBounds:i,rootMargin:r,threshold:o}=e,s=function(t){return t.parent&&t.parent!=t}(n)&&(i||r)?n.document:void 0;return new n.IntersectionObserver(t,{threshold:o,root:s,rootMargin:r})}var p,d=new WeakMap,f=new WeakMap;function m(t){const n=new Set;for(let e=t.length-1;e>=0;e--){const i=t[e],{target:r}=i;if(n.has(r))continue;n.add(r);const o=f.get(r);if(o)for(let t=0;t<o.length;t++)(0,o[t])(i)}}function b(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,r=new Error(e);for(const n in t)r[n]=t[n];return r.stack=i,r}function g(t){let n=null,e="";for(const t of arguments)t instanceof Error&&!n?n=b(t):(e&&(e+=" "),e+=t);return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function v(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}var w=["Webkit","webkit","Moz","moz","ms","O","o"];function y(t,n,e,i,r){const o=function(t,n,e){if(n.startsWith("--"))return n;p||(p=Object.create(null));let i=p[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),r=function(t,n){for(let e=0;e<w.length;e++){const i=w[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[r]&&(i=r)}e||(p[n]=i)}return i}(t.style,n,r);if(!o)return;const s=i?e+i:e;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return w.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(o),s)}function k(t,n){for(const e in n)y(t,e,n[e])}function _(t){return`${t}px`}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var x,P=self.__AMP_LOG;function A(t,n){throw new Error("failed to call initLogConstructor")}function $(t){return P.user||(P.user=I()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(P.user.win,t)?P.userForEmbed||(P.userForEmbed=I()):P.user}function I(t){return A()}function M(){return P.dev||(P.dev=A())}function E(t,n,e,i,r,o,s,a,c,l,u){return t}function O(t,n){return j(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function R(t,n){return j(C(T(t)),n)}function z(t,n){return S(C(t),n)}function T(t){return t.nodeType?(n=a(t),O(n,"ampdoc")).getAmpDoc(t):t;var n}function C(t){const n=T(t);return n.isSingleDoc()?n.win:n}function j(t,n){E(function(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}(t,n));const e=L(t)[n];return e.obj||(E(e.ctor),E(e.context),e.obj=new e.ctor(e.context),E(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function S(t,n){const e=L(t)[n];return e?e.promise?e.promise:(j(t,n),e.promise=Promise.resolve(e.obj)):null}function L(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var V,U,D=t=>R(t,"documentInfo").get(),q=t=>R(t,"mutator"),F=t=>function(t,n,e,i){const r=z(t,n);if(r)return r;const o=T(t);return o.whenExtensionsKnown().then((()=>{const t=o.getExtensionVersion(e);return t?O(o.win,"extensions").waitForExtension(e,t):null})).then((e=>e?function(t,n){return function(t,n){const e=S(t,n);if(e)return e;const i=L(t);return i[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:e,resolve:i}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:i,reject:e,context:null,ctor:null}}(),i[n].promise}(C(t),n)}(t,n):null))}(t,"consentPolicyManager","amp-consent");function N(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function W(t){return t.data}function J(t,e){return function(t,n,e){if(!n)return t;const i=t.split("#",2),r=i[0].split("?",2);let o=r[0]+(r[1]?`?${r[1]}&${n}`:`?${n}`);return o+=i[1]?`#${i[1]}`:"",o}(t,function(t){const e=[];for(const s in t){let a=t[s];if(null!=a){a=n(o=a)?o:[o];for(let t=0;t<a.length;t++)e.push((i=s,r=a[t],`${encodeURIComponent(i)}=${encodeURIComponent(r)}`))}}var i,r,o;return e.join("&")}(e))}new Set(["c","v","a","ad"]);var B="unlisten";function G(t,n,e){const i=function(t,n){let{listeningFors:e}=t;return!e&&n&&(e=t.listeningFors=Object.create(null)),e||null}(t,e);if(!i)return i;let r=i[n];return!r&&e&&(r=i[n]=[]),r||null}function H(t,n){for(let e=n;e&&e!=e.parent;e=e.parent)if(e==t)return!0;return!1}function X(t){const n={"sentinel":B};for(let e=t.length-1;e>=0;e--){const i=t[e];if(!i.frame.contentWindow){t.splice(e,1);const{events:r}=i;for(const t in r)r[t].splice(0,1/0).forEach((t=>{t(n)}))}}}function Z(t,n,e,i,r,o){E(t.src),E(!t.parentNode),E(e);const a=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(!W(n))return;const e=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?s(t,(t=>{}))||null:N(t)?function(t){if(!N(t))return null;const n=t.indexOf("{");return s(t.substr(n),(n=>{!function(t){const n=g.apply(null,arguments);setTimeout((()=>{throw v(n),n}))}(new Error(`MESSAGING: Failed to parse message: ${t}\n${n.message}`))}))}(t):null),t}(W(n));if(!e||!e.sentinel)return;const i=function(t,n,e,i){const r=G(t,n);if(!r)return r;let o;for(let t=0;t<r.length;t++){const n=r[t],{contentWindow:e}=n.frame;if(e){if(i==e||H(e,i)){o=n;break}}else setTimeout(X,0,r)}return o?o.events:null}(t,e.sentinel,n.origin,n.source);if(!i)return;let r=i[e.type];if(r){r=r.slice();for(let t=0;t<r.length;t++)(0,r[t])(e,n.source,n.origin,n)}}))}(a);const c=function(t,n,e){const i=G(t,K(n,e),!0);let r;for(let t=0;t<i.length;t++){const e=i[t];if(e.frame===n){r=e;break}}return r||(r={frame:n,events:Object.create(null)},i.push(r)),r.events}(a,t,i),l=(u=t.src,U||(U=self.document.createElement("a")),function(t,n,e){return t.href="",new URL(n,t.href)}(U,u)).origin;var u;let h,p=c[n]||(c[n]=[]),d=function(n,i,s,a){if("amp"==n.sentinel){if(i!=t.contentWindow)return;const n="null"==s&&o;if(l!=s&&!n)return}(r||i==t.contentWindow)&&(n.sentinel!=B?e(n,i,s,a):h())};return p.push(d),h=function(){if(d){const t=p.indexOf(d);t>-1&&p.splice(t,1),d=null,p=null,e=null}}}function K(t,n){return n?t.getAttribute("data-amp-3p-sentinel"):"amp"}var Q=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];function Y(t){return{"time":t.time,"rootBounds":t.rootBounds,"boundingClientRect":t.boundingClientRect,"intersectionRect":t.intersectionRect,"intersectionRatio":t.intersectionRatio}}function tt(t){const n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}Date.now();var nt="amp-apester-media";var et=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig");function it(){const t=!!navigator.userAgent.match(et);return function(){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}()?"mobile"+(t?"-webview":""):"desktop"}function rt(t,n){const e=function(t){const n=t&&t.getAttribute("data-apester-tags");return n&&n.split(",").map((t=>t.trim()))||[]}(n)||[],i=function(t){return(t.getMetaByName("keywords")||"").split(",").map((t=>t.trim())).filter(Boolean)}(t);return e.concat(i.length?i:(r=t.getRootNode(),((o=r.querySelectorAll('script[type="application/ld+json"]'))?Array.prototype.slice.call(o):[]).map((t=>{return t&&"SCRIPT"==(n=t).tagName&&"APPLICATION/LD+JSON"==(null===(e=n.getAttribute("type"))||void 0===e?void 0:e.toUpperCase())&&s(t.textContent)||{};var n,e})).map((t=>t&&t.headline)).filter((t=>"string"==typeof t)).map((t=>t.trim().split(" ").filter((t=>t.length>2)))).reduce(((t,n)=>t.concat(n)),[]).slice(0,5)||[])).map((t=>t.toLowerCase().trim())).filter(((t,n,e)=>e.indexOf(t)===n));var r,o}function ot(t,n,e,i,r){const o=function(e,r,o,s){let a=e,c=e=>{const r=i.contentWindow===e.source;W(e).type===t&&r&&n(W(e))},l=t=>{try{return c(t)}catch(t){var n,e;throw null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t),t}};const u=function(){if(void 0!==V)return V;V=!1;try{const t={get capture(){return V=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return V}();return a.addEventListener(r,l,!!u&&s),()=>{null==a||a.removeEventListener(r,l,!!u&&s),c=null,a=null,l=null}}(e,"message",0,void 0);r.push(o)}var st="amp-apester-media",at={"type":"has_bottom_ad","adHeight":50},ct=class extends t.BaseElement{constructor(t){super(t),this.t6="https://renderer.apester.com",this.n6="https://display.apester.com",this.e6="https://static.qmerce.com",this.i6="https://static.apester.com/js/assets/loader_100x100.gif",this._x=!1,this.eb=null,this.Wv=null,this.r6=null,this.o6=null,this.s6=!1,this.a6=!1,this.c6=null,this.l6={},this.yv=null,this.F_=[],this.cb=null,this.tj=null}preconnectCallback(t){const n=O(this.win,"preconnect");n.url(this.getAmpDoc(),this.n6,t),n.url(this.getAmpDoc(),this.t6,t),n.url(this.getAmpDoc(),this.e6,t)}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)}nj(t){t&&!this._x&&this.eb&&this.eb.contentWindow&&(this._x=!0,this.eb.contentWindow.postMessage("interaction seen","*"))}buildCallback(){const t=this.element.getAttribute("width"),n=this.element.getAttribute("height");var e,i;this.r6=u(t),this.o6=u(n),this.s6=this.element.hasAttribute("data-apester-channel-token"),this.c6=(e=this.element.getAttribute("data-apester-media-id")||this.element.getAttribute("data-apester-channel-token"),"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",i=this.element,$().assert(e,"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",i,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.l6={playlist:this.s6,idOrToken:this.c6,inative:"true"===this.element.getAttribute("data-apester-inative"),fallback:this.element.getAttribute("data-apester-fallback"),distributionChannelId:this.element.getAttribute("data-apester-channel-id"),renderer:!0,tags:rt(this.getAmpDoc(),this.element)}}u6(){const{distributionChannelId:t,fallback:n,idOrToken:e,inative:i,playlist:r,tags:o}=this.l6,s=encodeURIComponent(this.c6);let a="";const c={renderer:!1};return c.platform=it(),i?e?a=`/inatives/${e}`:t&&(a=`/channels/${t}/inatives`):r&&o?(a=`/tokens/${s}/interactions/random`,c.tags=o,c.fallback=!!n):a=r?`/tokens/${s}/interactions/random`:`/interactions/${s}/display`,J(`${this.n6}${a}`,c)}h6(){const t=this.u6();return(n=this.win,O(n,"xhr")).fetchJson(t,{}).then((t=>200===t.status?t.json():t));var n}p6(t,n){const e={};return e.channelId=this.l6.distributionChannelId,e.type=this.l6.playlist?"playlist":"editorial",e.platform=it(),e.cannonicalUrl=D(this.element).canonicalUrl,e.sdk="amp",J(`${this.t6}/${n?"v2":"interaction"}/${encodeURIComponent(t)}`,e)}d6(t){const n=this.element.ownerDocument.createElement("iframe");return n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),n.setAttribute("scrolling","no"),n.src=t,n.name=this.win.location.href,n.height=this.o6,n.width=this.r6,n.classList.add("amp-apester-iframe"),n.classList.add("i-amphtml-fill-content"),n}f6(){const t=this.element.ownerDocument.createElement("img");return t.setAttribute("loading","lazy"),t.setAttribute("src",this.i6),k(t,{"width":_(100),"height":_(100)}),t}m6(){const t=this.element.ownerDocument.createElement("div");t.setAttribute("overflow",""),t.className="amp-apester-overflow";const n=this.element.ownerDocument.createElement("button");return n.textContent="Full Size",t.appendChild(n),t}layoutCallback(){this.element.classList.add("amp-apester-container");const t=O(this.win,"vsync");return this.h6().then((n=>{if(!n||204===n.status)return this.unlayoutCallback();const e=n.payload,i=this.l6.playlist?e[Math.floor(Math.random()*e.length)]:e,r=i.interactionId,s=i.usePlayer,c=this.p6(r,s),u=this.d6(c);return this.cb=new class{constructor(t,n){this.yb=t,this.Pb=null,this._b=new class{constructor(t,n,e,i){this.eb=t,this.Ab=e,this.Ib=[],this.Mb=Z(this.eb,n,((t,n,e)=>{this.Ib.some((t=>t.win==n))||this.Ib.push({win:n,origin:e}),i(t,n,e)}),this.Ab,this.Ab)}send(t,n){(function(t,n){const e=[];let i=0;for(let n=0;n<t.length;n++){const r=t[n];r.win.parent?(i<n&&(t[i]=r),i++):e.push(r)}i<t.length&&(t.length=i)})(this.Ib),function(t,n,e,i,r){if(!t.contentWindow)return;i.type=e,i.sentinel=K(t,r);let o=i;r&&(o="amp-"+JSON.stringify(i));for(let t=0;t<n.length;t++){const e=n[t];e.win.postMessage(o,e.origin)}}(this.eb,this.Ib,t,n,this.Ab)}destroy(){this.Mb(),this.Ib.length=0}}(n,"send-intersections",!1,(()=>{this.Ob()})),this.Pb=new IntersectionObserver((t=>{this._b.send("intersection",{"changes":t.map(Y)})}),{threshold:Q})}Ob(){this.Pb.observe(this.yb.element)}destroy(){this.Pb.disconnect(),this.Pb=null,this._b.destroy(),this._b=null}}(this,u),this.yv=r,this.eb=u,this.b6(),t.mutatePromise((()=>{const t=this.m6();this.element.appendChild(t),this.element.appendChild(u),function(t,n){const e=t.campaignData;e&&!e.disabledAmpCompanionAds?function(t){const n=function(t,n="default"){return F(t).then((t=>t?t.whenPolicyResolved(n):null))}(t).catch((t=>(M().error(nt,"Error determining consent state",t),4))),e=function(t,n="default"){return F(t).then((t=>t?t.getConsentStringInfo(n):null))}(t,"default").catch((t=>{M().error(nt,"Error determining consent string",t)})),i=Promise.all([n,e]);return Promise.race([i,new Promise((t=>{setTimeout((()=>{t([4,void 0])}),3e3)}))]).then((t=>{const n=t[0],e=t[1];switch(n){case 1:return{"gdpr":1,"user_consent":1,"gdprString":e};case 2:case 4:return{"gdpr":1,"user_consent":0,"gdprString":e};default:return{}}}))}(n).then((e=>{(function(t,n){const e=o(t,"campaignData.companionOptions");if(!e)return;const i=o(e,"enabled"),r=o(e,"settings");if(i&&r&&"gdt"===r.bannerAdProvider){const t=r.slot,e=6e4===r.options.autoRefreshTime?60:30,i=[[300,250]];!function(t,n,e,i){const r=Math.max.apply(null,n.map((t=>t[0]))),o=Math.max.apply(null,n.map((t=>t[1]))),s=n.map((t=>t.join("x"))).join(),a=l(e.ownerDocument,"amp-ad",{"width":`${r}`,"height":"0","type":"doubleclick","layout":"fixed","data-slot":`${t}`,"data-multi-size-validation":"false","data-multi-size":s,"data-enable-refresh":`${i}`});a.classList.add("i-amphtml-amp-apester-companion"),e.parentNode.insertBefore(a,e.nextSibling),q(e).requestChangeSize(a,o,void 0)}(t,r.bannerSizes||i,n,e)}})(t,n),function(t,n,e){const i=o(t,"campaignData.companionCampaignOptions"),r=o(t,"campaignData.companionOptions.video"),s=(a=r)?a.companion.enabled?"above":a.companion_below.enabled?"below":a.floating.enabled?"floating":null:null;var a;if(r&&r.enabled&&s&&"floating"!==s)switch(r.provider){case"sr":{const o=null==i?void 0:i.companionCampaignId,{videoTag:a}=r;if(!o||!a)return;const c=function(t,n,e,i){const r=t.interactionId,o=t.publisherId,s=t.publisher,a={"param1":r,"param2":o,"param6":n,"page_url":D(e).canonicalUrl};return i.gdpr&&(a.gdpr=i.gdpr,a.user_consent=i.user_consent,a.param4=i.gdprString),s&&s.groupId&&(a.param7=`apester.com:${s.groupId}`,a.schain=`1.0,1!apester.com,${s.groupId},1,,,,`),a}(t,o,n,e);!function(t,n,e,i){const r=tt(i),o=l(i.ownerDocument,"amp-ad",{"width":r.width,"height":r.height,"type":"blade","layout":"fixed","data-blade_player_type":"bladex","servingDomain":"ssr.streamrail.net","data-blade_macros":JSON.stringify(e),"data-blade_player_id":t,"data-blade_api_key":"5857d2ee263dc90002000001","data-enable-refresh":"30"});o.classList.add("i-amphtml-amp-apester-companion");const s="below"===n?i.nextSibling:i;i.parentNode.insertBefore(o,s),q(i).requestChangeSize(o,r.height)}(a,s,c,n);break}case"aniview":{const{playerOptions:t={}}=r;if(!t.aniviewChannelId)return;!function(t,n,e,i){const r=tt(e),o=l(e.ownerDocument,"amp-ad",{"width":r.width,"height":r.height,"type":"aniview","data-publisherid":"5fabb425e5d4cb4bbc0ca7e4","data-channelid":t.aniviewChannelId,"data-enable-refresh":"30"});i.gdpr&&(o["data-av_gdpr"]=i.gdpr,o["data-av_consent"]=i.user_consent),o.classList.add("i-amphtml-amp-apester-companion");const s="below"===n?e.nextSibling:e;e.parentNode.insertBefore(o,s),q(e).requestChangeSize(o,r.height)}(t,s,n,e);break}}}(t,n,e),function(t,n){const e=o(t,"campaignData.bottomAdOptions");e&&o(e,"enabled")&&"gpt"===e.videoPlayer&&function(t,n,e){const i=n[0][0],r=n[0][1],o=l(e.ownerDocument,"amp-ad",{"width":`${i}`,"height":`${r}`,"type":"doubleclick","layout":"fixed","data-slot":`${t}`,"data-multi-size-validation":"false","data-enable-refresh":"30"});o.classList.add("i-amphtml-amp-apester-bottom-ad"),e.appendChild(o),q(e).requestChangeSize(o,r)}(e.tag,[[300,50]],n)}(t,n)})):x||(x=Promise.resolve(void 0))}(i,this.element)})).then((()=>this.loadPromise(u))).then((()=>t.mutatePromise((()=>{var t,n,e,r;if(this.eb){this.eb.classList.add("i-amphtml-apester-iframe-ready");const t=i.campaignData;if(t){const n=t.bottomAdOptions;if(null!=n&&n.enabled){this.a6=!0;const t=this.getAmpDoc();(r=this.win,O(r,"extensions")).installExtensionForDoc(t,"amp-ad"),this.eb.contentWindow.postMessage(at,"*")}this.eb.contentWindow.postMessage({type:"campaigns",data:t},"*")}}const o=null!==(t=null==i||null===(n=i.data)||void 0===n||null===(e=n.size)||void 0===e?void 0:e.height)&&void 0!==t?t:0;o!=this.o6&&(this.o6=o,this.s6?this.attemptChangeHeight(o):this.forceChangeHeight(o))})))).then((()=>{this.tj=function(t,n,e){const i=a(t);let r=d.get(i);r||d.set(i,r=h(m,i));let o=f.get(t);return o||(o=[],f.set(t,o)),o.push(n),r.observe(t),()=>{!function(t,n){const e=f.get(t);if(!e)return;if(!function(t,n){const e=t.indexOf(n);return-1!=e&&(t.splice(e,1),!0)}(e,n))return;if(e.length)return;const i=a(t),r=d.get(i);null==r||r.unobserve(t),f.delete(t)}(t,n)}}(this.element,(({isIntersecting:t})=>this.nj(t)))}))})).catch((t=>{$().error(st,"Display",t)}))}createPlaceholderCallback(){const t=this.element.ownerDocument.createElement("div"),n=this.f6();return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading Apester Media"),t.setAttribute("placeholder",""),t.className="amp-apester-loader",k(n,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),t.appendChild(n),this.Wv=t,t}unlayoutOnPause(){return!0}unlayoutCallback(){var t;return null===(t=this.tj)||void 0===t||t.call(this),this.tj=null,this.eb&&(this.cb.destroy(),this.cb=null,this.F_.forEach((t=>t())),c(this.eb),this.eb=null),this.Wv&&(c(this.Wv),this.Wv=null),!1}b6(){ot("fullscreen_on",(t=>{this.yv===t.id&&this.element.classList.add("amp-apester-fullscreen")}),this.win,this.eb,this.F_),ot("fullscreen_off",(t=>{this.yv===t.id&&this.element.classList.remove("amp-apester-fullscreen")}),this.win,this.eb,this.F_),ot("apester_resize_unit",(t=>{this.yv===t.id&&t.height&&(this.attemptChangeHeight(t.height),this.a6&&this.eb.contentWindow.postMessage(at,"*"))}),this.win,this.eb,this.F_)}};t.registerElement(st,ct,".amp-apester-iframe{transition:opacity 0.4s;opacity:0}.i-amphtml-apester-iframe-ready{transition:opacity 1s ease-out;opacity:1!important}.amp-apester-loader{height:100%;width:100%;background-color:#fff}.amp-apester-container{max-width:700px;margin:0 auto;display:block;position:relative;width:100%}.amp-apester-overflow{position:absolute;margin:auto;top:50%;left:50%;transform:translate(-50%,-50%)}.amp-apester-overflow button{border:none;background:#fff;cursor:pointer;padding:25px 80px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative}.amp-apester-fullscreen{background:rgba(34,36,38,0.97)!important;position:fixed!important;width:100vw!important;height:100vh!important;z-index:2147483646!important;top:0;zoom:1;-webkit-overflow-scrolling:touch!important}.i-amphtml-amp-apester-companion{display:block;margin:10px auto}.i-amphtml-amp-apester-bottom-ad{display:block!important;position:absolute!important;bottom:0!important;left:50%!important;transform:translateX(-50%)!important;margin:0!important}\n/*# sourceURL=/extensions/amp-apester-media/0.1/amp-apester-media.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-apester-media-0.1.mjs.map