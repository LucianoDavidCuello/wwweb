;
(self.AMP=self.AMP||[]).push({m:0,v:"2205120110001",n:"amp-apester-media",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,r){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,r)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var a=Array.isArray;function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function u(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return o(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=Object.prototype,c=s.hasOwnProperty;function f(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function l(t,n){return c.call(t,n)}function p(t,n){if("."==n)return t;for(var r,i=t,a=u(n.split("."),!0);!(r=a()).done;){var o=r.value;if(!(o&&i&&void 0!==i[o]&&"object"==e(i)&&l(i,o))){i=void 0;break}i=i[o]}return i}function d(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function h(t){return(t.ownerDocument||t).defaultView}function v(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function m(t,n,r){return function(t,n){for(var r in n)t.setAttribute(r,n[r]);return t}(t.createElement(n),r)}function b(t){return t.parent&&t.parent!=t}function g(t){var n,r=parseFloat(t);return"number"==typeof(n=r)&&isFinite(n)?r:void 0}function w(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=r.needsRootBounds,i=r.rootMargin,a=r.threshold,o=b(n)&&(e||i)?n.document:void 0;return new n.IntersectionObserver(t,{threshold:a,root:o,rootMargin:i})}s.toString;var y,k=new WeakMap,x=new WeakMap;function j(t){for(var n=new Set,r=t.length-1;r>=0;r--){var e=t[r],i=e.target;if(!n.has(i)){n.add(i);var a=x.get(i);if(a)for(var o=0;o<a.length;o++)(0,a[o])(e)}}}function O(t){var n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;var r=t.message,e=t.stack,i=new Error(r);for(var a in t)i[a]=t[a];return i.stack=e,i}function S(t){for(var n,r=null,e="",i=u(arguments,!0);!(n=i()).done;){var a=n.value;a instanceof Error&&!r?r=O(a):(e&&(e+=" "),e+=a)}return r?e&&(r.message=e+": "+r.message):r=new Error(e),r}function z(t){var n,r;null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t)}var E=["Webkit","webkit","Moz","moz","ms","O","o"];function _(t,n,r,e,i){var a=function(t,n,r){if(n.startsWith("--"))return n;y||(y=f());var e=y[n];if(!e||r){if(e=n,void 0===t[n]){var i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),a=function(t,n){for(var r=0;r<E.length;r++){var e=E[r]+n;if(void 0!==t[e])return e}return""}(t,i);void 0!==t[a]&&(e=a)}r||(y[n]=e)}return e}(t.style,n,i);if(a){var o,u=e?r+e:r;t.style.setProperty((o=a.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),E.some((function(t){return o.startsWith(t+"-")}))?"-".concat(o):o),u)}}function R(t,n){for(var r in n)_(t,r,n[r])}function A(t){return"".concat(t,"px")}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var I,P=self.__AMP_LOG;function M(t,n){throw new Error("failed to call initLogConstructor")}function C(t){return P.user||(P.user=D()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(P.user.win,t)?P.userForEmbed||(P.userForEmbed=D()):P.user}function D(t){return M()}function T(){return P.dev||(P.dev=M())}function L(t,n,r,e,i,a,o,u,s,c,f){return t}var N=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))};function U(t,n){return W(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function q(t,n){return W(B(J(t)),n)}function F(t,n){return G(B(t),n)}function J(t){return t.nodeType?(n=h(t),U(n,"ampdoc")).getAmpDoc(t):t;var n}function B(t){var n=J(t);return n.isSingleDoc()?n.win:n}function W(t,n){L(function(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}(t,n));var r=H(t)[n];return r.obj||(L(r.ctor),L(r.context),r.obj=new r.ctor(r.context),L(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function G(t,n){var r=H(t)[n];return r?r.promise?r.promise:(W(t,n),r.promise=Promise.resolve(r.obj)):null}function H(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var V,X=function(t){return q(t,"documentInfo").get()},Z=function(t){return q(t,"mutator")},$=function(t){return function(t,n,r,e){var i=F(t,n);if(i)return i;var a=J(t);return a.whenExtensionsKnown().then((function(){var t=a.getExtensionVersion(r);return t?U(a.win,"extensions").waitForExtension(r,t):null})).then((function(r){return r?function(t,n){return function(t,n){var r=G(t,n);if(r)return r;var e,i,a,o,u=H(t);return u[n]=(i=(e=new N).promise,a=e.reject,o=e.resolve,i.catch((function(){})),{obj:null,promise:i,resolve:o,reject:a,context:null,ctor:null}),u[n].promise}(B(t),n)}(t,n):null}))}(t,"consentPolicyManager","amp-consent")};function K(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function Q(t){return t.data}var Y,tt,nt=function(){function t(t){this.pi=t,this.bi=0,this.gi=0,this.yi=f()}var n=t.prototype;return n.has=function(t){return!!this.yi[t]},n.get=function(t){var n=this.yi[t];if(n)return n.access=++this.gi,n.payload},n.put=function(t,n){this.has(t)||this.bi++,this.yi[t]={payload:n,access:this.gi},this.wi()},n.wi=function(){if(!(this.bi<=this.pi)){var t,n=this.yi,r=this.gi+1;for(var e in n){var i=n[e].access;i<r&&(r=i,t=e)}void 0!==t&&(delete n[t],this.bi--)}},t}();function rt(t,n){return function(t,n,r){if(!n)return t;var e=t.split("#",2),i=e[0].split("?",2);return i[0]+(i[1]?"?".concat(i[1],"&").concat(n):"?".concat(n))+(e[1]?"#".concat(e[1]):"")}(t,function(t){var n,r,e,i=[];for(var o in t){var u=t[o];if(null!=u){u=a(e=u)?e:[e];for(var s=0;s<u.length;s++)i.push((n=o,r=u[s],"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))))}}return i.join("&")}(n))}new Set(["c","v","a","ad"]);var et="unlisten";function it(t,n,r){var e=function(t,n){var r=t.listeningFors;return!r&&n&&(r=t.listeningFors=Object.create(null)),r||null}(t,r);if(!e)return e;var i=e[n];return!i&&r&&(i=e[n]=[]),i||null}function at(t,n){for(var r=n;r&&r!=r.parent;r=r.parent)if(r==t)return!0;return!1}function ot(t){for(var n={"sentinel":et},r=t.length-1;r>=0;r--){var e=t[r];if(!e.frame.contentWindow){t.splice(r,1);var i=e.events;for(var a in i)i[a].splice(0,1/0).forEach((function(t){t(n)}))}}}function ut(t,n,r,e,i,a){L(t.src),L(!t.parentNode),L(r);var o=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(Q(n)){var r=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?d(t,(function(t){T().warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",t)}))||null:K(t)?function(t){if(!K(t))return null;var n=t.indexOf("{");return d(t.substr(n),(function(n){!function(t){var n=S.apply(null,arguments);setTimeout((function(){throw z(n),n}))}(new Error("MESSAGING: Failed to parse message: ".concat(t,"\n").concat(n.message)))}))}(t):null),t}(Q(n));if(r&&r.sentinel){var e=function(t,n,r,e){var i,a=it(t,n);if(!a)return a;for(var o=0;o<a.length;o++){var u=a[o],s=u.frame.contentWindow;if(s){if(e==s||at(s,e)){i=u;break}}else setTimeout(ot,0,a)}return i?i.events:null}(t,r.sentinel,n.origin,n.source);if(e){var i=e[r.type];if(i){i=i.slice();for(var a=0;a<i.length;a++)(0,i[a])(r,n.source,n.origin,n)}}}}}))}(o);var u,s,c=function(t,n,r){for(var e,i=it(t,st(n,r),!0),a=0;a<i.length;a++){var o=i[a];if(o.frame===n){e=o;break}}return e||(e={frame:n,events:Object.create(null)},i.push(e)),e.events}(o,t,e),f=(s=t.src,Y||(Y=self.document.createElement("a"),tt=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new nt(100))),function(t,n,r){if(r&&r.has(n))return r.get(n);t.href=n,t.protocol||(t.href=t.href);var e,i={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==i.pathname[0]&&(i.pathname="/"+i.pathname),("http:"==i.protocol&&80==i.port||"https:"==i.protocol&&443==i.port)&&(i.port="",i.host=i.hostname),e=t.origin&&"null"!=t.origin?t.origin:"data:"!=i.protocol&&i.host?i.protocol+"//"+i.host:i.href,i.origin=e;var a=i;return r&&r.put(n,a),a}(Y,s,tt)).origin,l=c[n]||(c[n]=[]),p=function(n,e,o,s){if("amp"==n.sentinel){if(e!=t.contentWindow)return;if(f!=o&&("null"!=o||!a))return}(i||e==t.contentWindow)&&(n.sentinel!=et?r(n,e,o,s):u())};return l.push(p),u=function(){if(p){var t=l.indexOf(p);t>-1&&l.splice(t,1),p=null,l=null,r=null}}}function st(t,n){return n?t.getAttribute("data-amp-3p-sentinel"):"amp"}var ct=function(){function t(t,n,r,e){var i=this;this.tb=t,this.nb=r,this.rb=[],this.ib=ut(this.tb,n,(function(t,n,r){i.rb.some((function(t){return t.win==n}))||i.rb.push({win:n,origin:r}),e(t,n,r)}),this.nb,this.nb)}var n=t.prototype;return n.send=function(t,n){(function(t,n){for(var r=[],e=0,i=0;i<t.length;i++){var a=t[i];a.win.parent?(e<i&&(t[e]=a),e++):r.push(a)}e<t.length&&(t.length=e)})(this.rb),function(t,n,r,e,i){if(t.contentWindow){e.type=r,e.sentinel=st(t,i);var a=e;i&&(a="amp-"+JSON.stringify(e));for(var o=0;o<n.length;o++){var u=n[o];u.win.postMessage(a,u.origin)}}}(this.tb,this.rb,t,n,this.nb)},n.destroy=function(){this.ib(),this.rb.length=0},t}(),ft=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1],lt=(Date.now(),function(){function t(t,n){var r=this;this.eb=t,this.ob=null,this.ub=new ct(n,"send-intersections",!1,(function(){r.ab()})),this.ob=new IntersectionObserver((function(t){r.ub.send("intersection",{"changes":t.map(pt)})}),{threshold:ft})}var n=t.prototype;return n.ab=function(){this.ob.observe(this.eb.element)},n.destroy=function(){this.ob.disconnect(),this.ob=null,this.ub.destroy(),this.ub=null},t}());function pt(t){return{"time":t.time,"rootBounds":t.rootBounds,"boundingClientRect":t.boundingClientRect,"intersectionRect":t.intersectionRect,"intersectionRatio":t.intersectionRatio}}function dt(t){var n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}var ht="amp-apester-media";var vt=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig");function mt(){var t,n=!!navigator.userAgent.match(vt);return t=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?"mobile".concat(n?"-webview":""):"desktop"}function bt(t,n,r,e,i){var a,o,u,s,c,f,l=(a="message",o=void 0,u=r,s=function(r){var i=e.contentWindow===r.source;Q(r).type===t&&i&&n(Q(r))},c=function(t){try{return s(t)}catch(t){var n,r;throw null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t),t}},f=function(){if(void 0!==V)return V;V=!1;try{var t={get capture(){return V=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return V}(),u.addEventListener(a,c,!!f&&o),function(){null==u||u.removeEventListener(a,c,!!f&&o),s=null,u=null,c=null});i.push(l)}var gt="amp-apester-media",wt={"type":"has_bottom_ad","adHeight":50},yt=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}(u,t);var e,a,o=(e=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(e);if(a){var o=r(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return i(this,t)});function u(t){var n;return(n=o.call(this,t)).zet="https://renderer.apester.com",n.Eet="https://display.apester.com",n.Ret="https://static.qmerce.com",n.Aet="https://static.apester.com/js/assets/loader_100x100.gif",n.TA=!1,n.tb=null,n.sb=null,n.Iet=null,n.Pet=null,n.Met=!1,n.Det=!1,n.Tet=null,n.Let={},n.Wb=null,n.yw=[],n.mb=null,n.Ng=null,n}var s=u.prototype;return s.preconnectCallback=function(t){var n=U(this.win,"preconnect");n.url(this.getAmpDoc(),this.Eet,t),n.url(this.getAmpDoc(),this.zet,t),n.url(this.getAmpDoc(),this.Ret,t)},s.isLayoutSupported=function(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)},s.Gg=function(t){t&&!this.TA&&this.tb&&this.tb.contentWindow&&(T().fine(gt,"media seen"),this.TA=!0,this.tb.contentWindow.postMessage("interaction seen","*"))},s.buildCallback=function(){var t,n,r,e,i,a,o,u,s=this.element.getAttribute("width"),c=this.element.getAttribute("height");this.Iet=g(s),this.Pet=g(c),this.Met=this.element.hasAttribute("data-apester-channel-token"),this.Tet=(t=this.element.getAttribute("data-apester-media-id")||this.element.getAttribute("data-apester-channel-token"),"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",n=this.element,C().assert(t,"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",n,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.Let={playlist:this.Met,idOrToken:this.Tet,inative:"true"===this.element.getAttribute("data-apester-inative"),fallback:this.element.getAttribute("data-apester-fallback"),distributionChannelId:this.element.getAttribute("data-apester-channel-id"),renderer:!0,tags:(r=this.getAmpDoc(),e=this.element,o=function(t){var n=t&&t.getAttribute("data-apester-tags");return n&&n.split(",").map((function(t){return t.trim()}))||[]}(e)||[],u=function(t){return(t.getMetaByName("keywords")||"").split(",").map((function(t){return t.trim()})).filter(Boolean)}(r),o.concat(u.length?u:(i=r.getRootNode(),((a=i.querySelectorAll('script[type="application/ld+json"]'))?Array.prototype.slice.call(a):[]).map((function(t){return t&&"SCRIPT"==(n=t).tagName&&"APPLICATION/LD+JSON"==(null===(r=n.getAttribute("type"))||void 0===r?void 0:r.toUpperCase())&&d(t.textContent)||{};var n,r})).map((function(t){return t&&t.headline})).filter((function(t){return"string"==typeof t})).map((function(t){return t.trim().split(" ").filter((function(t){return t.length>2}))})).reduce((function(t,n){return t.concat(n)}),[]).slice(0,5)||[])).map((function(t){return t.toLowerCase().trim()})).filter((function(t,n,r){return r.indexOf(t)===n})))}},s.Net=function(){var t=this.Let,n=t.distributionChannelId,r=t.fallback,e=t.idOrToken,i=t.inative,a=t.playlist,o=t.tags,u=encodeURIComponent(this.Tet),s="",c={renderer:!1};return c.platform=mt(),i?e?s="/inatives/".concat(e):n&&(s="/channels/".concat(n,"/inatives")):a&&o?(s="/tokens/".concat(u,"/interactions/random"),c.tags=o,c.fallback=!!r):s=a?"/tokens/".concat(u,"/interactions/random"):"/interactions/".concat(u,"/display"),rt("".concat(this.Eet).concat(s),c)},s.Uet=function(){var t,n=this.Net();return(t=this.win,U(t,"xhr")).fetchJson(n,{}).then((function(t){return 200===t.status?t.json():t}))},s.qet=function(t,n){var r={};return r.channelId=this.Let.distributionChannelId,r.type=this.Let.playlist?"playlist":"editorial",r.platform=mt(),r.cannonicalUrl=X(this.element).canonicalUrl,r.sdk="amp",rt("".concat(this.zet,"/").concat(n?"v2":"interaction","/")+"".concat(encodeURIComponent(t)),r)},s.Fet=function(t){var n=this.element.ownerDocument.createElement("iframe");return n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),n.setAttribute("scrolling","no"),n.src=t,n.name=this.win.location.href,n.height=this.Pet,n.width=this.Iet,n.classList.add("amp-apester-iframe"),n.classList.add("i-amphtml-fill-content"),n},s.Jet=function(){var t=this.element.ownerDocument.createElement("img");return t.setAttribute("loading","lazy"),t.setAttribute("src",this.Aet),R(t,{"width":A(100),"height":A(100)}),t},s.Bet=function(){var t=this.element.ownerDocument.createElement("div");t.setAttribute("overflow",""),t.className="amp-apester-overflow";var n=this.element.ownerDocument.createElement("button");return n.textContent="Full Size",t.appendChild(n),t},s.layoutCallback=function(){var t=this;this.element.classList.add("amp-apester-container");var n=U(this.win,"vsync");return this.Uet().then((function(r){if(!r||204===r.status)return T().warn(gt,"Display","No Content for provided tag"),t.unlayoutCallback();var e=r.payload,i=t.Let.playlist?e[Math.floor(Math.random()*e.length)]:e,a=i.interactionId,o=i.usePlayer,u=t.qet(a,o),s=t.Fet(u);return t.mb=new lt(t,s),t.Wb=a,t.tb=s,t.Wet(),n.mutatePromise((function(){var n=t.Bet();t.element.appendChild(n),t.element.appendChild(s),function(t,n){var r=t.campaignData;r&&!r.disabledAmpCompanionAds?function(t){var n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return $(t).then((function(t){return t?t.whenPolicyResolved(n):null}))}(t).catch((function(t){return T().error(ht,"Error determining consent state",t),4})),r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return $(t).then((function(t){return t?t.getConsentStringInfo(n):null}))}(t,"default").catch((function(t){T().error(ht,"Error determining consent string",t)})),e=Promise.all([n,r]);return Promise.race([e,new Promise((function(t){setTimeout((function(){t([4,void 0])}),3e3)}))]).then((function(t){var n=t[0],r=t[1];switch(n){case 1:return{"gdpr":1,"user_consent":1,"gdprString":r};case 2:case 4:return{"gdpr":1,"user_consent":0,"gdprString":r};default:return{}}}))}(n).then((function(r){(function(t,n){var r=p(t,"campaignData.companionOptions");if(r){var e=p(r,"enabled"),i=p(r,"settings");if(e&&i&&"gdt"===i.bannerAdProvider){var a=i.slot,o=6e4===i.options.autoRefreshTime?60:30;!function(t,n,r,e){var i=Math.max.apply(null,n.map((function(t){return t[0]}))),a=Math.max.apply(null,n.map((function(t){return t[1]}))),o=n.map((function(t){return t.join("x")})).join(),u=m(r.ownerDocument,"amp-ad",{"width":"".concat(i),"height":"0","type":"doubleclick","layout":"fixed","data-slot":"".concat(t),"data-multi-size-validation":"false","data-multi-size":o,"data-enable-refresh":"".concat(e)});u.classList.add("i-amphtml-amp-apester-companion"),r.parentNode.insertBefore(u,r.nextSibling),Z(r).requestChangeSize(u,a,void 0)}(a,i.bannerSizes||[[300,250]],n,o)}}})(t,n),function(t,n,r){var e,i=p(t,"campaignData.companionCampaignOptions"),a=p(t,"campaignData.companionOptions.video"),o=(e=a)?e.companion.enabled?"above":e.companion_below.enabled?"below":e.floating.enabled?"floating":null:null;if(a&&a.enabled&&o&&"floating"!==o)switch(a.provider){case"sr":var u=null==i?void 0:i.companionCampaignId,s=a.videoTag;if(!u||!s)return;var c=function(t,n,r,e){var i=t.interactionId,a=t.publisherId,o=t.publisher,u={"param1":i,"param2":a,"param6":n,"page_url":X(r).canonicalUrl};return e.gdpr&&(u.gdpr=e.gdpr,u.user_consent=e.user_consent,u.param4=e.gdprString),o&&o.groupId&&(u.param7="apester.com:".concat(o.groupId),u.schain="1.0,1!apester.com,".concat(o.groupId,",1,,,,")),u}(t,u,n,r);!function(t,n,r,e){var i=dt(e),a=m(e.ownerDocument,"amp-ad",{"width":i.width,"height":i.height,"type":"blade","layout":"fixed","data-blade_player_type":"bladex","servingDomain":"ssr.streamrail.net","data-blade_macros":JSON.stringify(r),"data-blade_player_id":t,"data-blade_api_key":"5857d2ee263dc90002000001","data-enable-refresh":"".concat(30)});a.classList.add("i-amphtml-amp-apester-companion");var o="below"===n?e.nextSibling:e;e.parentNode.insertBefore(a,o),Z(e).requestChangeSize(a,i.height)}(s,o,c,n);break;case"aniview":var f=a.playerOptions,l=void 0===f?{}:f;if(!l.aniviewChannelId)return;!function(t,n,r,e){var i=dt(r),a=m(r.ownerDocument,"amp-ad",{"width":i.width,"height":i.height,"type":"aniview","data-publisherid":"5fabb425e5d4cb4bbc0ca7e4","data-channelid":t.aniviewChannelId,"data-enable-refresh":"".concat(30)});e.gdpr&&(a["data-av_gdpr"]=e.gdpr,a["data-av_consent"]=e.user_consent),a.classList.add("i-amphtml-amp-apester-companion");var o="below"===n?r.nextSibling:r;r.parentNode.insertBefore(a,o),Z(r).requestChangeSize(a,i.height)}(l,o,n,r)}}(t,n,r),function(t,n){var r=p(t,"campaignData.bottomAdOptions");r&&p(r,"enabled")&&"gpt"===r.videoPlayer&&function(t,n,r){var e=n[0][0],i=n[0][1],a=m(r.ownerDocument,"amp-ad",{"width":"".concat(e),"height":"".concat(i),"type":"doubleclick","layout":"fixed","data-slot":"".concat(t),"data-multi-size-validation":"false","data-enable-refresh":"".concat(30)});a.classList.add("i-amphtml-amp-apester-bottom-ad"),r.appendChild(a),Z(r).requestChangeSize(a,i)}(r.tag,[[300,50]],n)}(t,n)})):I||(I=Promise.resolve(void 0))}(i,t.element)})).then((function(){return t.loadPromise(s)})).then((function(){return n.mutatePromise((function(){var n,r,e,a;if(t.tb){t.tb.classList.add("i-amphtml-apester-iframe-ready");var o=i.campaignData;if(o){var u=o.bottomAdOptions;if(null!=u&&u.enabled){t.Det=!0;var s=t.getAmpDoc();(a=t.win,U(a,"extensions")).installExtensionForDoc(s,"amp-ad"),t.tb.contentWindow.postMessage(wt,"*")}t.tb.contentWindow.postMessage({type:"campaigns",data:o},"*")}}var c=null!==(n=null==i||null===(r=i.data)||void 0===r||null===(e=r.size)||void 0===e?void 0:e.height)&&void 0!==n?n:0;c!=t.Pet&&(t.Pet=c,t.Met?t.attemptChangeHeight(c):t.forceChangeHeight(c))}))})).then((function(){t.Ng=function(t,n,r){var e=h(t),i=k.get(e);i||k.set(e,i=w(j,e));var a=x.get(t);return a||(a=[],x.set(t,a)),a.push(n),i.observe(t),function(){!function(t,n){var r,e,i,a=x.get(t);if(a&&(e=n,-1!=(i=(r=a).indexOf(e))&&(r.splice(i,1),1)&&!a.length)){var o=h(t),u=k.get(o);null==u||u.unobserve(t),x.delete(t)}}(t,n)}}(t.element,(function(n){var r=n.isIntersecting;return t.Gg(r)}))}))})).catch((function(t){C().error(gt,"Display",t)}))},s.createPlaceholderCallback=function(){var t=this.element.ownerDocument.createElement("div"),n=this.Jet();return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading Apester Media"),t.setAttribute("placeholder",""),t.className="amp-apester-loader",R(n,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),t.appendChild(n),this.sb=t,t},s.unlayoutOnPause=function(){return!0},s.unlayoutCallback=function(){var t;return null===(t=this.Ng)||void 0===t||t.call(this),this.Ng=null,this.tb&&(this.mb.destroy(),this.mb=null,this.yw.forEach((function(t){return t()})),v(this.tb),this.tb=null),this.sb&&(v(this.sb),this.sb=null),!1},s.Wet=function(){var t=this;bt("fullscreen_on",(function(n){t.Wb===n.id&&t.element.classList.add("amp-apester-fullscreen")}),this.win,this.tb,this.yw),bt("fullscreen_off",(function(n){t.Wb===n.id&&t.element.classList.remove("amp-apester-fullscreen")}),this.win,this.tb,this.yw),bt("apester_resize_unit",(function(n){t.Wb===n.id&&n.height&&(t.attemptChangeHeight(n.height),t.Det&&t.tb.contentWindow.postMessage(wt,"*"))}),this.win,this.tb,this.yw)},u}(t.BaseElement);t.registerElement(gt,yt,".amp-apester-iframe{transition:opacity 0.4s;opacity:0}.i-amphtml-apester-iframe-ready{transition:opacity 1s ease-out;opacity:1!important}.amp-apester-loader{height:100%;width:100%;background-color:#fff}.amp-apester-container{max-width:700px;margin:0 auto;display:block;position:relative;width:100%}.amp-apester-overflow{position:absolute;margin:auto;top:50%;left:50%;transform:translate(-50%,-50%)}.amp-apester-overflow button{border:none;background:#fff;cursor:pointer;padding:25px 80px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative}.amp-apester-fullscreen{background:rgba(34,36,38,0.97)!important;position:fixed!important;width:100vw!important;height:100vh!important;z-index:2147483646!important;top:0;zoom:1;-webkit-overflow-scrolling:touch!important}.i-amphtml-amp-apester-companion{display:block;margin:10px auto}.i-amphtml-amp-apester-bottom-ad{display:block!important;position:absolute!important;bottom:0!important;left:50%!important;transform:translateX(-50%)!important;margin:0!important}\n/*# sourceURL=/extensions/amp-apester-media/0.1/amp-apester-media.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-apester-media-0.1.js.map